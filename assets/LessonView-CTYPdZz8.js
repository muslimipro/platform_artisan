import{s as A,S as F,_ as H,T as O,a as X}from"./SimulationView-Bgf6Y9bS.js";import{an as G,e as w,ab as z,al as I,af as J,ao as P,am as B,o as V,w as D,D as s,E as h,I as y,T as n,ae as t,V as r,a3 as N,a9 as K,ah as T,c as Q,X as x,_ as v,ak as U}from"./index-RW0gPhT6.js";import{s as W}from"./index-BtzmQAXC.js";import{s as Y,a as Z,t as ee}from"./types-Bvcz5iWp.js";import{L as te,b as se}from"./logo-B6ezLIKK.js";import{_ as ne}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-DLeo4-HJ.js";import{a as ae,t as le,_ as oe,b as ie,M as re,c as ce,d as ue}from"./QuestionStep.vue_vue_type_script_setup_true_lang-F-5srDDD.js";import"./_plugin-vue_export-helper-6uhltXGq.js";import"./http-CLrmqCzG.js";import"./index-dZ05eilR.js";const j=G("useLessonStore",()=>{const p=w(null),l=w(null);function o(e){e!=null&&(p.value=e,l.value=0)}function a(e){p.value!=null&&(p.value.steps=e)}function c(e){p.value!=null&&(l.value=e)}return{lesson:p,stepIndex:l,setLesson:o,setSteps:a,changeStep:c}}),pe={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},fe={class:"flex flex-1 items-center"},me={key:1,class:"flex items-center gap-1"},_e={class:"flex items-center gap-1"},de={class:"flex flex-1 justify-end items-center gap-2"},ve=z({__name:"LessonHeader",setup(p){const{locale:l}=I(),o=J(),a=P(),c=j(),{lesson:e,stepIndex:m}=B(c),{changeStep:g,setSteps:f}=c,i=w(!1);function _(u){switch(u){case"article":return"pi pi-align-left";case"code":return"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function L(){if(!i.value){i.value=!0;try{const{data:u}=await ae.getProjectStepsByID(a.params.id.toString()),d=[];for(const k of u){const S=await le(k,l.value,!1);d.push(S)}f(d)}catch(u){alert(u)}finally{i.value=!1}}}V(L),D(l,L,{immediate:!0});const C=w(),M=w([{label:"Profile",icon:"pi pi-user"},{label:"Log out",icon:"pi pi-sign-out"}]),q=u=>{C.value.toggle(u)};return(u,d)=>{const k=se,S=T,R=Y,E=W;return s(),h("div",pe,[y("div",fe,[n(k,{src:t(te),width:"32"},null,8,["src"]),d[1]||(d[1]=y("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),n(S,{id:"#projects",icon:"pi pi-angle-left",label:u.$t("projects"),severity:"secondary",variant:"text",onClick:d[0]||(d[0]=$=>t(o).push({name:"projects"})),size:"small"},null,8,["label"])]),i.value||t(e)==null?(s(),r(R,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(s(),h("div",me,[y("div",_e,[(s(!0),h(N,null,K(t(e).steps,($,b)=>(s(),r(S,{key:$.id,icon:_($.type),rounded:"",severity:t(m)==b?void 0:"secondary",variant:t(m)==b?void 0:"outlined",onClick:$e=>t(g)(b),class:"h-8 w-8"},null,8,["icon","severity","variant","onClick"]))),128))])])),y("div",de,[n(ne),n(S,{type:"button",icon:"pi pi-ellipsis-v",onClick:q,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",variant:"outlined",severity:"secondary",class:"border border-slate-300 bg-slate-50",style:{width:"34px"}}),n(E,{ref_key:"menu",ref:C,id:"overlay_menu",model:M.value,popup:!0},null,8,["model"])])])}}}),ye={class:"flex flex-col p-4 gap-4 overflow-scroll h-full justify-between bg-white"},he={key:0},ge={key:1,class:"flex"},xe=z({__name:"LessonDiv",setup(p){const l=j(),{lesson:o,stepIndex:a}=B(l),{changeStep:c}=l,e=Q(()=>{var f;return a.value==null?null:((f=o.value)==null?void 0:f.steps[a.value])??null});async function m(){a.value!=null&&c(a.value-1)}async function g(){a.value!=null&&c(a.value+1)}return(f,i)=>{const _=T;return s(),h("div",ye,[e.value?(s(),h("div",he,[e.value.type=="article"?(s(),r(t(oe),{key:0,step:e.value},null,8,["step"])):e.value.type=="code"?(s(),r(t(ie),{key:1,step:e.value},null,8,["step"])):e.value.type=="matching"?(s(),r(t(re),{key:2,step:e.value},null,8,["step"])):e.value.type=="open"?(s(),r(t(ce),{key:3,step:e.value},null,8,["step"])):e.value.type=="question"?(s(),r(t(ue),{key:4,step:e.value},null,8,["step"])):x("",!0)])):x("",!0),t(o)!=null&&t(o).steps!=null&&t(o).steps.length>0&&e.value?(s(),h("div",ge,[t(a)!==0?(s(),r(_,{key:0,label:"Previous",icon:"pi pi-angle-left",size:"small",onClick:m})):x("",!0),t(a)<t(o).steps.length-1?(s(),r(_,{key:1,label:"Next",icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:g})):x("",!0)])):x("",!0)])}}}),we={class:"flex bg-surface-0",style:{height:"calc(100vh - 52px)"}},Se={class:"flex justify-center h-full"},ke={class:"max-w-[400px] w-full"},Ne=z({__name:"LessonView",setup(p){const{locale:l}=I(),o=P(),a=j(),{setLesson:c}=a,e=w(!1);async function m(){if(!e.value){e.value=!0;try{const{data:g}=await Z.getProjectByID(o.params.id.toString()),f=await ee(g,l.value);c(f)}finally{e.value=!1}}}return V(m),D(l,m),(g,f)=>{const i=X,_=A;return s(),h(N,null,[n(ve),y("div",we,[n(_,{class:"w-full rounded-none"},{default:v(()=>[n(i,{size:50,minSize:10,class:"max-w-[467px] w-full"},{default:v(()=>[n(F)]),_:1}),n(i,{size:50,minSize:10},{default:v(()=>[n(_,{layout:"vertical",class:"h-full w-full"},{default:v(()=>[n(i,{size:65,minSize:10},{default:v(()=>[n(H)]),_:1}),n(i,{size:35,minSize:10},{default:v(()=>[n(O)]),_:1})]),_:1})]),_:1}),n(i,{size:30,minSize:10,class:U(["max-w-md mx-auto",{"animate-fadeinright animate-once animate-duration-1000 animate-ease-in-out":!0}])},{default:v(()=>[y("div",Se,[y("div",ke,[e.value?x("",!0):(s(),r(xe,{key:0}))])])]),_:1})]),_:1})])],64)}}});export{Ne as default};
