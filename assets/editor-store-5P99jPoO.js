import{aQ as B,h as a,q as F}from"./index-C34AB3hb.js";const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function G(e,n=0){return(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase()}let h;const J=new Uint8Array(16);function K(){if(!h){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");h=crypto.getRandomValues.bind(crypto)}return h(J)}const M=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f={randomUUID:M};function p(e,n,i){if(f.randomUUID&&!n&&!e)return f.randomUUID();e=e||{};const s=e.random||(e.rng||K)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,G(s)}const X=B("useEditorStore",()=>{const e=a(null),n=a(null),i=a(null),s=a(null),r=a(null),o=a(null),c=a(!1),d=a(!1),g=F(()=>c.value||d.value);function m(l){e.value=l}function y(l){c.value=l}function x(l){d.value=l}function S(l){l!=null&&(e.value=l)}function U(l){e.value!=null&&(e.value.steps=l,c.value=!1,d.value=!1)}function I(l){e.value==null||n.value==null||(e.value.steps[n.value].title=l.title,e.value.steps[n.value].inner=l.inner)}function b(l,t){e.value!=null&&(e.value.steps.push({id:t.id,title:t.title,type:l,progress:"nothing",inner:{contents:[],modules:[],skip_submit:!1},answer:{},state:{code:"",stdout:"",slots:[]}}),n.value=e.value.steps.length-1)}function w(l){e.value==null||n.value==null||(e.value.steps[n.value].inner.contents.push({id:p(),type:l,text:l=="text"?"":void 0,src:void 0}),i.value=e.value.steps[n.value].inner.contents.length-1)}function A(l,t,v){e.value==null||n.value==null||(i.value=v,(e.value.steps[n.value].inner.contents[i.value].type=="text"&&l!=null||e.value.steps[n.value].inner.contents[i.value].type=="video"&&l!=null)&&(e.value.steps[n.value].inner.contents[i.value].text=l))}function C(l){e.value==null||n.value==null||e.value.steps[n.value].inner.contents.splice(l,1)}function D(l){if(e.value==null)return;n.value=l;const t=e.value.steps[n.value].inner.contents.length;i.value=t>0?t-1:null}function H(){e.value==null||n.value==null||(e.value.steps[n.value].inner.options==null&&(e.value.steps[n.value].inner.options=[]),e.value.steps[n.value].inner.options.push({id:p(),text:"",correct:!1}),s.value=e.value.steps[n.value].inner.options.length-1)}function P(l,t,v){e.value==null||n.value==null||e.value.steps[n.value].inner.options!=null&&(s.value=v,e.value.steps[n.value].inner.options[s.value].text=l,e.value.steps[n.value].inner.options[s.value].correct=t)}function R(l){e.value==null||n.value==null||e.value.steps[n.value].inner.options!=null&&(e.value.steps[n.value].inner.options.splice(l,1),e.value.steps[n.value].inner.options.length==0&&(e.value.steps[n.value].inner.options=void 0))}function T(){e.value==null||n.value==null||(e.value.steps[n.value].inner.pairs==null&&(e.value.steps[n.value].inner.pairs=[]),e.value.steps[n.value].inner.pairs.push({id:p(),key:"",value:""}),r.value=e.value.steps[n.value].inner.pairs.length-1)}function V(l,t,v){e.value==null||n.value==null||e.value.steps[n.value].inner.pairs!=null&&(r.value=v,e.value.steps[n.value].inner.pairs[r.value].key=l,e.value.steps[n.value].inner.pairs[r.value].value=t)}function k(l){e.value==null||n.value==null||e.value.steps[n.value].inner.pairs!=null&&(e.value.steps[n.value].inner.pairs.splice(l,1),e.value.steps[n.value].inner.pairs.length==0&&(e.value.steps[n.value].inner.pairs=void 0))}function E(l){e.value==null||n.value==null||(e.value.steps[n.value].inner.userActions=l??void 0)}function L(l){e.value==null||n.value==null||(e.value.steps[n.value].inner.platformActions=l??void 0)}function O(){e.value==null||n.value==null||(e.value.steps[n.value].inner.highlights==null&&(e.value.steps[n.value].inner.highlights=[]),e.value.steps[n.value].inner.highlights.push({id:p(),module:null,slot:null}),o.value=e.value.steps[n.value].inner.highlights.length-1)}function j(l,t,v){e.value==null||n.value==null||e.value.steps[n.value].inner.highlights!=null&&(o.value=v,e.value.steps[n.value].inner.highlights[o.value].module=l,e.value.steps[n.value].inner.highlights[o.value].slot=t)}function q(l){e.value==null||n.value==null||e.value.steps[n.value].inner.highlights!=null&&(e.value.steps[n.value].inner.highlights.splice(l,1),e.value.steps[n.value].inner.highlights.length==0&&(e.value.steps[n.value].inner.highlights=void 0))}function N(){e.value==null||n.value==null||e.value.steps.splice(n.value,1)}function Q(){console.log("add test Not implemented")}function _(l,t){e.value==null||n.value==null||e.value.steps[n.value].inner.tests!=null&&(e.value.steps[n.value].inner.tests[t]=l)}function z(l){e.value==null||n.value==null||e.value.steps[n.value].inner.tests!=null&&e.value.steps[n.value].inner.tests.splice(l,1)}return{lesson:e,stepIndex:n,contentIndex:i,optionIndex:s,saving:g,addLesson:m,setLesson:S,setSteps:U,setStep:I,addStep:b,changeStep:D,addContent:w,saveContent:A,removeContent:C,addOption:H,saveOption:P,removeOption:R,addPair:T,savePair:V,removePair:k,saveUserActions:E,savePlatformActions:L,addHighlight:O,saveHighlight:j,removeHighlight:q,removeStep:N,setCardSaving:y,setStepSaving:x,addTest:Q,saveTest:_,removeTest:z}});export{X as u};
