import{s as M}from"./index-BM8y864Q.js";import{s as B}from"./index-Ddejf8YF.js";import{s as N}from"./index-DhS2ptY1.js";import{s as S}from"./index-CxlVj7Ab.js";import{_ as V}from"./AHeader.vue_vue_type_script_setup_true_lang-JHkau7OH.js";import{_ as C}from"./ProjectCard.vue_vue_type_script_setup_true_lang-CpD5x872.js";import{a as E}from"./index-DoPblL-P.js";import{t as F}from"./types-81Qs7ZwA.js";import{a as R,R as T,r as u,o as A,E as I,c as K,b as s,e as r,f as c,F as a,k as d,w as y,D as w,t as k,K as p,n as O,i as f}from"./index-D3Xw5qxA.js";import"./index-BMH0whIo.js";import"./index-BOssJ-l5.js";import"./logo-D1-3uCnC.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-B8B4sz21.js";import"./index-DJdLyTK3.js";import"./index-ButxQo1H.js";import"./index-CXIZJphG.js";import"./index-xzdyhczQ.js";import"./index-DRYH8h8X.js";import"./StudentViewToggle.vue_vue_type_script_setup_true_lang-D20-3s7Y.js";import"./index-C4S87ejV.js";import"./index-BsfAQShN.js";import"./index-CuTGLVL7.js";import"./index-0_pX67_2.js";import"./http-BF3VYmLO.js";import"./profile-CNbQ_Ux3.js";import"./index-C9_llAIY.js";import"./index-BUPrWENi.js";import"./index-CLgHi_VT.js";import"./pibody-BwAjMvHk.js";const q={class:"flex flex-col min-h-screen bg-slate-50"},G={key:0,class:"flex px-4 sm:px-12"},H={key:1,class:"flex px-4 sm:px-12"},J={key:3,class:"flex px-4 sm:px-12"},Q={key:4,class:"flex flex-wrap justify-center gap-8 px-4 sm:px-12 pb-8"},$e=R({__name:"LegoPage",setup(U){const{locale:L}=T(),j=u([]),g=u([]),h=u([]),_=u([0,0,0,0,0,0]),v=u([0,0,0,0,0,0]),m=u(!1);async function x(){if(!m.value){m.value=!0;try{const{data:i}=await E.getProjects();m.value=!1,j.value=[],g.value=[],h.value=[],_.value=[0,0,0,0,0,0],v.value=[0,0,0,0,0,0];for(const o of i)o.lego&&(o.is_guidable?_.value[o.layer]++:v.value[o.layer]++);for(const o of i){if(!o.lego)continue;const n=await F(o);o.layer>0&&j.value.push(n),n.is_guidable?g.value.push(n):h.value.push(n)}}catch(i){console.log(i)}finally{m.value=!1}}}A(x),I(L,x);const P=K(()=>{const i=new Map,o=new Map;for(const e of g.value)i.has(e.layer)||i.set(e.layer,[]),i.get(e.layer).push(e);for(const e of h.value)o.has(e.layer)||o.set(e.layer,[]),o.get(e.layer).push(e);const n=[];for(let e=1;e<=5;e++)n.push({id:e,guided:i.get(e)||[],unguided:o.get(e)||[]});return n}),z=["secondary","success","info","warn","danger","contrast"];return(i,o)=>{const n=S,e=N,$=B,b=M;return s(),r("div",q,[c(V,{class:"sticky top-0 z-10 mb-4"}),(s(!0),r(a,null,d(P.value,t=>(s(),r("div",{key:t.id,class:"flex flex-col gap-2"},[t.guided.length>0||t.unguided.length>0?(s(),r("div",G,[c(n),c(e,{class:"min-w-fit text-2xl px-4",severity:z[t.id]},{default:y(()=>[w(k(t.id>0?`Level -
          ${t.id-1}`:"Other"),1)]),_:2},1032,["severity"]),c(n)])):p("",!0),t.guided.length>0?(s(),r("div",H,[c($,{class:"min-w-fit pr-4",size:"small",severity:"success"},{default:y(()=>[w(k(i.$t("pages.projects.learn")),1)]),_:1})])):p("",!0),t.guided.length>0?(s(),r("div",{key:2,class:O(["flex flex-wrap justify-center gap-8 px-4 sm:px-12",{"pb-8":t.unguided.length==0}])},[(s(!0),r(a,null,d(t.guided,l=>(s(),f(C,{key:l.id,project:l,id:l.id},null,8,["project","id"]))),128)),(s(!0),r(a,null,d(_.value[t.id]-t.guided.length,l=>(s(),f(b,{key:l,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))],2)):p("",!0),t.unguided.length>0?(s(),r("div",J,[c($,{class:"min-w-fit pr-4",size:"small",severity:"info"},{default:y(()=>[w(k(i.$t("pages.projects.practice")),1)]),_:1})])):p("",!0),t.unguided.length>0?(s(),r("div",Q,[(s(!0),r(a,null,d(t.unguided,l=>(s(),f(C,{key:l.id,project:l,onAfterRemove:x},null,8,["project"]))),128)),(s(!0),r(a,null,d(v.value[t.id]-t.unguided.length,l=>(s(),f(b,{key:l,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))])):p("",!0)]))),128))])}}});export{$e as default};
