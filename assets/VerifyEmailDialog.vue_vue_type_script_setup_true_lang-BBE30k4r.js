import{a as S,a3 as w,u as B,Y as I,s as T,r as m,a0 as x,b as v,k as f,w as o,h as i,f as d,g as p,i as N,t as g,l as A,p as D,Q as M,q as R,v as q}from"./index-CpNfsgee.js";import{s as U}from"./index-DT-EUPkV.js";import{S as Y}from"./index-BNclWPK1.js";const j={class:"text-blue-500"},H={class:"flex flex-col gap-1"},L={class:"flex gap-1 justify-end"},G=S({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(y){const n=w(y,"modelValue"),_=D(),u=B(),b=I(),{user:V}=T(b),t=m(!1),a=m(0);let r;const $=()=>{a.value=60,r=setInterval(()=>{a.value>0?a.value--:clearInterval(r)},1e3)};async function h(){t.value=!0;try{const{data:e}=await Y.sendVerificationEmail();u.add({severity:"success",summary:e.message,life:2e3}),$()}catch(e){u.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}finally{t.value=!1}}return x(()=>{clearInterval(r)}),(e,l)=>{const k=M("i18n-t"),c=R,E=U,C=q;return v(),f(C,{visible:n.value,"onUpdate:visible":l[1]||(l[1]=s=>n.value=s),modal:"",draggable:!1,class:"m-4 max-w-md",header:e.$t("dialog.verifyYourEmail")},{footer:o(()=>[i("div",H,[i("div",L,[d(c,{label:e.$t("dialog.changeEmail"),severity:"secondary",onClick:l[0]||(l[0]=s=>{p(_).replace({path:"/settings/change-email"}),n.value=!1})},null,8,["label"]),d(c,{label:a.value>0?`${e.$t("pages.login.resendIn")} ${a.value}s`:e.$t("dialog.sendVerificationEmail"),onClick:h,loading:t.value,disabled:t.value||a.value>0},null,8,["label","loading","disabled"])]),a.value>0?(v(),f(E,{key:0,severity:"success"},{default:o(()=>[N(g(e.$t("pages.settings.weHaveSentLinkToVerifyEmail")),1)]),_:1})):A("",!0)])]),default:o(()=>[i("div",null,[d(k,{keypath:"dialog.confirmEmailAddress"},{email:o(()=>{var s;return[i("span",j,g((s=p(V))==null?void 0:s.email),1)]}),_:1})])]),_:1},8,["visible","header"])}}});export{G as _};
