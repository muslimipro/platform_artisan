import{d as w,u as L,r as g,a as C,s as j,o as N,b as s,e as a,f as R,g as o,h as e,k as $,t as n,F as x,j as _,n as v,x as F,p as I,q as T}from"./index-CpNfsgee.js";import{s as q}from"./index-BFlIjYqR.js";import{_ as A}from"./MainHeader.vue_vue_type_script_setup_true_lang-DYrXSIBy.js";import{R as D,m as P}from"./mapRouteFromDto-DRjVAvBq.js";import"./http-uAg3sWem.js";import{g as V}from"./groupLessonsByLevelAndType-D70aJuVS.js";import"./index-D5xNLMSZ.js";import"./index-Dl1GEnYT.js";import"./index-CLdqn1Ns.js";import"./mapLessonFromDto-BcisFAGx.js";import"./mapUnitFromDto-CYGc5n9V.js";const z=w("route-store",()=>{const y=L(),l=g(null),d=g({}),c=g(!1);async function f(r){var i,p;try{c.value=!0;const{data:u}=await D.getRouteById(r);l.value=P(u),d.value=V(((i=l.value)==null?void 0:i.lessons)??[],((p=l.value)==null?void 0:p.levels)??[])}catch(u){y.add({severity:"error",summary:u.response.data.error,life:2e3})}finally{c.value=!1}}return{selectedRoute:l,isRouteLoading:c,groupedLessons:d,loadRouteById:f}}),E={class:"flex flex-col items-center h-screen"},M={class:"w-full h-full max-w-screen-xl px-4 md:px-28 py-8"},O={key:1,class:"flex justify-center"},G={key:2,class:"flex flex-col gap-8"},H={class:"flex flex-col bg-gray-50 px-8 py-4 rounded-3xl"},J={class:"text-2xl"},K={class:"text-lg text-gray-500"},Q={class:"flex flex-wrap gap-8"},U={class:"flex flex-wrap gap-8"},ie=C({__name:"RoutePage",setup(y){const l=F(),d=I(),c=z(),{isRouteLoading:f,selectedRoute:r,groupedLessons:i}=j(c),{loadRouteById:p}=c,u=["bg-green-50","bg-blue-50"],k=["text-green-600","text-blue-600"];return N(()=>p(Number(l.params.id))),(W,X)=>{const B=q,S=T;return s(),a("div",E,[R(o(A)),e("div",M,[o(f)?(s(),$(B,{key:0,class:"flex justify-center"})):o(r)?(s(),a("div",G,[e("div",H,[e("div",J,n(o(r).name),1),e("div",K,n(o(r).description),1)]),(s(!0),a(x,null,_(o(r).levels,(m,h)=>(s(),a("div",{key:m.id,class:"flex flex-col items-center gap-8"},[e("div",{class:v(["py-1 px-4 text-lg font-semibold w-fit rounded-lg",`${u[h]} ${k[h]}`])},n(m.name),3),e("div",Q,[(s(!0),a(x,null,_(o(i)[m.id].learn,t=>(s(),a("div",{key:t.id},[e("div",{class:v(["flex flex-col items-center justify-center gap-2 p-4 rounded-3xl h-40 w-56",t.accessStatus=="available"?"bg-green-50":"bg-gray-50"])},[e("div",null,n(t.name),1),e("div",null,n(t.accessStatus),1),R(S,{label:"Open",onClick:()=>{var b;return o(d).push({name:"lesson",params:{id:t.id},query:{route_id:(b=o(r))==null?void 0:b.id}})}},null,8,["onClick"])],2)]))),128))]),e("div",U,[(s(!0),a(x,null,_(o(i)[m.id].practice,t=>(s(),a("div",{key:t.id},[e("div",{class:v(["p-4 rounded-3xl h-40 w-56",t.accessStatus=="available"?"bg-green-50":"bg-gray-50"])},[e("div",null,n(t.name),1),e("div",null,n(t.accessStatus),1)],2)]))),128))])]))),128))])):(s(),a("div",O,"No route found"))])])}}});export{ie as default};
