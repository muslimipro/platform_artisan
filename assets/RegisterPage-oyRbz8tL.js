import{z as A,a as o,b as L,s as U,_ as D,c as I}from"./index-9Ag14WnE.js";import{d as Z,r as x,l as G,f as H,g as J,c as m,b as t,a,w as i,e as B,F as y,u as K,s as O,o as n,h as c,i as C,t as d,j as p,k as F}from"./index-CxyCel7M.js";import{s as Q}from"./index-BAOoh0gY.js";import{s as W}from"./index-DE2X4gBR.js";import{s as X}from"./index-oCkN5M1f.js";import"./logo-Ba5PqW90.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-3PKddi90.js";import"./http-B1ARadxs.js";const Y={class:"card flex flex-col items-center pt-4"},$={class:"flex flex-col gap-1"},ee={class:"flex gap-2"},se={class:"flex flex-col gap-1"},ae={class:"flex flex-col gap-1"},te={class:"my-0 px-4 flex flex-col gap-1"},re={class:"flex flex-col gap-1"},ie={class:"my-0 px-4 flex flex-col gap-1"},ve=Z({__name:"RegisterPage",setup(ne){const P=x([]),f=x(!1);G(async()=>{const s=await fetch("src/assets/countries.json");P.value=await s.json()});const w=H(),b=K(),k=J(),R=x({name:"",surname:"",email:"",password:"",city:""}),T=A(o.object({name:o.string().min(1,{message:"Name "}).max(100,{message:"Maximum 100 characters."}),surname:o.string().min(1,{message:"Surname "}).max(100,{message:"Maximum 100 characters."}),email:o.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:o.string().min(8,{message:"Minimum 8 characters."}).max(100,{message:"Maximum 100 characters."}).refine(s=>/[a-z]/.test(s),{message:"Must have a lowercase letter."}).refine(s=>/[A-Z]/.test(s),{message:"Must have an uppercase letter."}).refine(s=>/[0-9]/.test(s),{message:"Must have a number."}),confirm_password:o.string()}).refine(s=>s.password===s.confirm_password,{message:"Passwords must match",path:["confirm_password"]})),E=async s=>{if(!f.value&&s.valid){f.value=!0;try{const{data:e}=await L.signUp(s.states.name.value,s.states.surname.value,s.states.email.value,s.states.password.value);k.setToken(e),k.setUser(e),b.push({name:"projects"}),w.add({severity:"success",summary:"Success",life:3e3})}catch(e){w.add({severity:"error",summary:e.toString(),life:3e3})}finally{f.value=!1}}};return(s,e)=>{const v=X,l=W,u=Q,h=I,M=O,q=U;return n(),m(y,null,[t(D),a("div",Y,[t(q,{initialValues:R.value,resolver:B(T),onSubmit:E,class:"flex flex-col gap-4 w-full sm:w-80"},{default:i(r=>{var S,z,V,j,N;return[e[6]||(e[6]=a("div",{class:"flex flex-1 items-center justify-center my-4"},[a("p",{class:"text-4xl font-semibold px-2 mr-4"},"Registration")],-1)),a("div",$,[a("div",ee,[t(l,{variant:"on"},{default:i(()=>[t(v,{id:"name",name:"name",type:"text",fluid:""}),e[1]||(e[1]=a("label",{for:"name"},"Name",-1))]),_:1}),t(l,{variant:"on"},{default:i(()=>[t(v,{id:"surname",name:"surname",type:"text",fluid:""}),e[2]||(e[2]=a("label",{for:"surname"},"Surname",-1))]),_:1})]),(S=r.name)!=null&&S.invalid||(z=r.surname)!=null&&z.invalid?(n(),c(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[C(d(r.name.error.message+r.surname.error.message+"is required."),1)]),_:2},1024)):p("",!0)]),a("div",se,[t(l,{variant:"on"},{default:i(()=>[t(v,{id:"email",name:"email",type:"text",fluid:""}),e[3]||(e[3]=a("label",{for:"email"},"Email",-1))]),_:1}),(V=r.email)!=null&&V.invalid?(n(),c(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[C(d(r.email.error.message),1)]),_:2},1024)):p("",!0)]),a("div",ae,[t(l,{variant:"on"},{default:i(()=>[t(h,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),e[4]||(e[4]=a("label",{for:"password"},"Password",-1))]),_:1}),(j=r.password)!=null&&j.invalid?(n(),c(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[a("ul",te,[(n(!0),m(y,null,F(r.password.errors,(g,_)=>(n(),m("li",{key:_},d(g.message),1))),128))])]),_:2},1024)):p("",!0)]),a("div",re,[t(l,{variant:"on"},{default:i(()=>[t(h,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),e[5]||(e[5]=a("label",{for:"confirm_password"},"Confirm password",-1))]),_:1}),(N=r.confirm_password)!=null&&N.invalid?(n(),c(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[a("ul",ie,[(n(!0),m(y,null,F(r.confirm_password.errors,(g,_)=>(n(),m("li",{key:_},d(g.message),1))),128))])]),_:2},1024)):p("",!0)]),t(M,{type:"submit",label:"Sign up"})]}),_:1},8,["initialValues","resolver"]),t(M,{severity:"secondary",variant:"link",label:"Already have an account",onClick:e[0]||(e[0]=r=>B(b).push({name:"login"}))})])],64)}}});export{ve as default};
