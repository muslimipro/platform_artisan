import{h as S,z as d,s as M}from"./index-BiNA2n31.js";import{d as N,u as P,a as T,r as w,o,c as m,b as a,e as t,w as i,t as n,f as y,g as I,h as L,F as h,i as q,j as u,k as A,s as E}from"./index-CbeY2LTE.js";import{s as D}from"./index-7iI5GcAi.js";import{s as H}from"./index-BE3N1hIV.js";import{s as R}from"./index-UGns2RAB.js";import{s as U}from"./index-BZp1jHCN.js";import{_ as G}from"./AuthHeader.vue_vue_type_script_setup_true_lang-DrV4-lbB.js";import{a as J}from"./index-C8kuHmDy.js";import"./index-d49K2imb.js";import"./logo-696IDFK-.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BEPNjsy-.js";import"./index-DodnuFeH.js";import"./index-D0AiXIN_.js";import"./index-C7nsC40x.js";import"./index-DIQ4u2n9.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-1 items-center justify-center my-4"},Q={class:"text-4xl font-semibold px-2 mr-4"},W={class:"flex flex-col gap-1"},X={for:"email"},Y={class:"flex flex-col gap-1"},Z={for:"password"},ee={class:"flex justify-between"},se={class:"my-0 flex flex-col gap-1"},ae={key:1},be=N({__name:"LoginPage",setup(te){const k=P(),c=A(),f=T(),l=w(!1),$=w({email:"",password:""}),V=S(d.object({email:d.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:d.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),j=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:s}=await J.login(e.states.email.value,e.states.password.value);f.setToken(s),f.setUser(s),c.push({name:"projects"})}catch(s){k.add({severity:"error",summary:s.response.data.error,life:3e3})}finally{l.value=!1}}};return(e,s)=>{const z=U,_=R,v=H,B=D,p=E,C=M;return o(),m(h,null,[a(G),t("div",K,[a(C,{initialValues:$.value,resolver:u(V),onSubmit:j,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(r=>{var g,x;return[t("div",O,[t("p",Q,n(e.$t("logIn")),1)]),t("div",W,[a(_,{variant:"on"},{default:i(()=>[a(z,{id:"email",name:"email",type:"text",fluid:""}),t("label",X,n(e.$t("email")),1)]),_:1}),(g=r.email)!=null&&g.invalid?(o(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[I(n(r.email.error.message),1)]),_:2},1024)):L("",!0)]),t("div",Y,[a(_,{variant:"on"},{default:i(()=>[a(B,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",Z,n(e.$t("password")),1)]),_:1}),t("div",ee,[(x=r.password)!=null&&x.invalid?(o(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[t("ul",se,[(o(!0),m(h,null,q(r.password.errors,(b,F)=>(o(),m("li",{key:F},n(b.message),1))),128))])]),_:2},1024)):(o(),m("div",ae)),a(p,{label:e.$t("pages.login.forgotPassword"),variant:"link",size:"small",class:"p-0",onClick:s[0]||(s[0]=b=>u(c).push({name:"forgot-password"}))},null,8,["label"])])]),a(p,{type:"submit",label:e.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),a(p,{variant:"link",label:e.$t("dontHaveAnAccount"),onClick:s[1]||(s[1]=r=>u(c).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{be as default};
