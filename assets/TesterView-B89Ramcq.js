import{s as M,S as O,_ as P,T as U,a as I}from"./SimulationView-T0mx162f.js";import{_ as q}from"./IdeHeader.vue_vue_type_script_setup_true_lang-CL9MI9YH.js";import{s as G}from"./index-DI57IaRc.js";import{s as H}from"./index-Do9Zfnqk.js";import{d as z,ad as C,r as p,f as K,o as S,c as x,a as o,b as e,w as s,t as n,e as c,j as Q,i as W,F as N,q as X,s as Y,y as Z}from"./index-CFuF3Kxc.js";import{f as ee,d as te,i as ae,j as se}from"./store-DEjHWkQz.js";import"./logo-Btmn_lIa.js";import"./pibody-BwAjMvHk.js";import"./http-PPAb52Uj.js";const ie={class:"material-icons"},le={class:"material-icons"},oe={class:"material-icons"},ne={class:"material-icons"},ce={class:"material-icons"},re={key:0},ue=z({__name:"TesterControls",setup(A){const{fileContent:b}=C(ee()),i=te(),{isLoading:t,isReplaying:y,isReplayTimeout:$}=C(i),v=p({activity:[],userActivity:[]}),w=p({activity:[],userActivity:[]}),r=p({activity:[],userActivity:[]}),_=p(""),f=p("");let h="",m=[];const u=p(null),T=K(),V=p([]);function D(){m=[];for(const l of i.getSlots())m.push(l.with.type);h=b.value,i.startRecording()}function F(){v.value=i.stopRecording()}function J(){ae(v.value.activity,v.value.userActivity,h,m,_.value,f.value)}const L=async l=>{var d;const a=(d=l.target.files)==null?void 0:d[0];if(a)try{u.value=await se(a),r.value.activity=u.value.activity,r.value.userActivity=u.value.userActivity,h=u.value.code,_.value=u.value.name,f.value=u.value.description,m=u.value.moduleList,console.log("Loaded Test Data:",u.value)}catch(g){console.error("Error loading JSON:",g)}};function k(){i.startReplaying(r.value.userActivity,r.value.activity.length);const l=Z(y,()=>{if(!y.value){w.value=i.getRecordedResults();let a="error";JSON.stringify(r.value.activity)===JSON.stringify(w.value.activity)&&(a="success"),T.add({severity:a,summary:"Replayed",life:3e3}),i.stop()}$.value&&T.add({severity:"warn",summary:"Replay timeout",life:3e3}),l.stop()})}const B=async()=>{b.value=h;for(let l=0;l<m.length;l++){const a=m[l];i.newModuleToSlotIndex(a,l)}X(()=>{k()})},j=async()=>{k()};return(l,a)=>{const d=Y,g=H,E=G;return S(),x(N,null,[o("div",null,[e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"success",rounded:"",onClick:D,disabled:c(t)||c(i).isRecording},{default:s(()=>[o("span",ie,n(c(t)?"hourglass_top":"play_arrow"),1)]),_:1},8,["disabled"]),e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"danger",rounded:"",onClick:F,disabled:c(t)||!c(i).isRecording},{default:s(()=>[o("span",le,n(c(t)?"hourglass_top":"stop"),1)]),_:1},8,["disabled"]),e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"info",rounded:"",onClick:J,disabled:v.value.activity.length<=0},{default:s(()=>[o("span",oe,n(c(t)?"hourglass_top":"save"),1)]),_:1},8,["disabled"])]),o("div",null,[e(g,{type:"text",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=R=>_.value=R),placeholder:"Name",disabled:v.value.activity.length>0},null,8,["modelValue","disabled"])]),o("div",null,[e(E,{type:"text",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=R=>f.value=R),placeholder:"Description",disabled:v.value.activity.length>0},null,8,["modelValue","disabled"])]),o("div",null,[e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"info",rounded:"",onClick:B,disabled:r.value.activity.length<=0},{default:s(()=>[o("span",ne,n(c(t)?"hourglass_top":"bug_report"),1)]),_:1},8,["disabled"]),e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"warn",rounded:"",onClick:j,disabled:r.value.activity.length<=0},{default:s(()=>[o("span",ce,n(c(t)?"hourglass_top":"task"),1)]),_:1},8,["disabled"]),e(g,{type:"file",onChange:L,accept:"application/json",placeholder:"Name"})]),V.value.length>0?(S(),x("div",re,n(V.value.length),1)):Q("",!0),W(" Recorded: "+n(v.value.activity.length)+" Replayed: "+n(w.value.activity.length)+" Loaded: "+n(r.value.activity.length),1)],64)}}}),de={class:"flex bg-surface-0",style:{height:"calc(100vh - 52px)"}},we=z({__name:"TesterView",setup(A){return(b,i)=>{const t=I,y=M;return S(),x(N,null,[e(q),o("div",de,[e(y,{class:"w-full rounded-none"},{default:s(()=>[e(t,{size:50,minSize:10,class:"max-w-[467px] w-full"},{default:s(()=>[e(O)]),_:1}),e(t,{size:50,minSize:10},{default:s(()=>[e(y,{layout:"vertical",class:"h-full w-full"},{default:s(()=>[e(t,{size:65,minSize:10},{default:s(()=>[e(P)]),_:1}),e(t,{size:35,minSize:10},{default:s(()=>[e(U)]),_:1})]),_:1})]),_:1}),e(t,{size:50,minSize:10},{default:s(()=>[e(ue)]),_:1})]),_:1})])],64)}}});export{we as default};
