import{z as S,a as g,s as z}from"./index-G1MXCw0R.js";import{s as B}from"./index-BMaFWavY.js";import{s as P}from"./index-D5eZl8q_.js";import{s as C}from"./index-hgS5cF5J.js";import{d as N,p as j,u as q,r as c,q as E,o as u,c as L,b as t,e as o,j as _,w as i,t as r,f as x,g as b,h as y,F as A,k as M,s as D}from"./index-CrZk4WSl.js";import{_ as H}from"./AuthHeader.vue_vue_type_script_setup_true_lang-Bi75pP_Z.js";import{a as U}from"./index-BsBNJozc.js";import"./logo-CkXcmcLO.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-DBI2jhCR.js";import"./index-Cc6t9hEq.js";import"./index-B8QDPJ39.js";const Y={class:"card flex flex-col items-center pt-4"},G={class:"flex flex-col flex-1 items-center justify-center my-4"},J={class:"text-4xl font-semibold px-2 mr-4 text-center"},K={class:"text-md px-2 mt-4 mr-4 text-slate-500 text-center"},O={class:"flex flex-col gap-1"},Q={for:"email"},me=N({__name:"ForgotPassword",setup(W){const{locale:$}=j(),d=q(),w=M(),l=c(!1),s=c(0);let n;const h=()=>{s.value=60,n=setInterval(()=>{s.value>0?s.value--:clearInterval(n)},1e3)},k=c({email:""}),I=S(g.object({email:g.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."})})),T=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:a}=await U.requestPasswordReset(e.states.email.value,$.value);console.log(a),d.add({severity:"success",summary:"Success",life:3e3}),h()}catch(a){d.add({severity:"error",summary:a.toString(),life:3e3})}finally{l.value=!1}}};return E(()=>{clearInterval(n)}),(e,a)=>{const p=D,V=C,F=P,f=B,R=z;return u(),L(A,null,[t(H),o("div",Y,[t(p,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:a[0]||(a[0]=m=>_(w).replace({name:"login"}))},null,8,["label"]),t(R,{initialValues:k.value,resolver:_(I),onSubmit:T,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(m=>{var v;return[o("div",G,[o("p",J,r(e.$t("pages.login.forgotPassword")),1),o("p",K,r(e.$t("pages.login.provideYourAccountsEmailToResetPassword")),1)]),o("div",O,[t(F,{variant:"on"},{default:i(()=>[t(V,{id:"email",name:"email",type:"text",fluid:""}),o("label",Q,r(e.$t("email")),1)]),_:1}),(v=m.email)!=null&&v.invalid?(u(),x(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[b(r(m.email.error.message),1)]),_:2},1024)):y("",!0)]),s.value>0?(u(),x(f,{key:0,severity:"success"},{default:i(()=>[b(r(e.$t("pages.login.weHaveSentLinkToResetPassword")),1)]),_:1})):y("",!0),t(p,{type:"submit",label:s.value>0?`${e.$t("pages.login.resendIn")} ${s.value}s`:e.$t("pages.login.send"),loading:l.value,disabled:l.value||s.value>0},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{me as default};
