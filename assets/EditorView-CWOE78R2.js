import{s as xe}from"./index-D7N8R-dZ.js";import{u as T}from"./editor-store-CREgfSfV.js";import{s as se}from"./index-BUJyY_Tq.js";import{s as $e}from"./index-CBTzXTNN.js";import{s as Te}from"./index-BHR8iGiG.js";import{s as Ce}from"./index-Dyhdg-S7.js";import{a as Ae,s as X}from"./index-B7xbQbD6.js";import{ak as ie,b as i,e as g,h as y,S as q,I as Fe,ai as ge,al as ze,K as Ue,F as H,j as K,V as he,k as x,W as ye,n as be,a as P,x as te,s as W,r as $,o as E,G as R,g as d,l as C,f as c,w as S,a3 as Me,a5 as Re,Q as re,q as z,i as J,c as ee,p as ce,t as ke,D as De,a6 as Se,a7 as Oe,u as Ee,E as qe,v as He,Y as Ne}from"./index-DHVnmQPM.js";import{s as Ge}from"./index-DJ9tfIq2.js";import{s as Ie}from"./index-Cr72xZbi.js";import{s as Ze}from"./index-CKgSSqZR.js";import{a as le}from"./index-DU_ItY1l.js";import{a as ae,t as We}from"./types-CtbR_nAG.js";import{a as M}from"./index-BRW_0eBm.js";import{u as Ve}from"./index-CG6SXWyB.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as Z}from"./index-BTL82xS8.js";import{s as Ke}from"./index-3jHnhs7S.js";import{s as ue}from"./index-GdTgxm_8.js";import{s as Qe}from"./index-BM6hZtEV.js";import{s as de,a as pe}from"./index-CoVdCniq.js";import{s as Ye}from"./index-BQXR58SR.js";import"./CodeEditorView.vue_vue_type_script_setup_true_lang-DhEu2zYO.js";import{s as Je}from"./index-BzCzRpCo.js";import{_ as Xe}from"./CodeEditor.vue_vue_type_script_setup_true_lang-CB3fZ81W.js";import{L as et}from"./logo-D1-3uCnC.js";import{_ as tt,a as ot,b as nt}from"./StudentViewToggle.vue_vue_type_script_setup_true_lang-BJoGP8im.js";import{_ as lt}from"./SavedCloud.vue_vue_type_script_setup_true_lang-C9b2KFbl.js";import{b as we,_ as at,c as st,M as it,d as rt,e as ct}from"./QuestionStep.vue_vue_type_script_setup_true_lang-IR211RB_.js";import{u as ut,m as dt}from"./useSortable-DEYU19Sm.js";import{h as D}from"./http-Dcz7Gd9U.js";import{t as pt}from"./types-81Qs7ZwA.js";import"./v4-CmTdKEVZ.js";import"./index-HGiDyU5z.js";import"./index-BOWzKnTG.js";import"./index-C4F8jACC.js";import"./index-DRCcxSDj.js";import"./index-DhqsrCfS.js";import"./index-PBST-dQM.js";import"./index-DimdtQOL.js";import"./index-COm9ynAh.js";import"./index-CzTZ9E-d.js";import"./index-BlDh53mH.js";import"./profile-PDhrVDtH.js";import"./index-D-99ObJy.js";import"./index-D3Cxxuxn.js";import"./stores-CINz-4gA.js";import"./sortable.esm-FZSyJVGy.js";var je={name:"BanIcon",extends:ie};function mt(a,e,n,o,p,t){return i(),g("svg",q({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),e[0]||(e[0]=[y("path",{d:"M7 0C5.61553 0 4.26215 0.410543 3.11101 1.17971C1.95987 1.94888 1.06266 3.04213 0.532846 4.32122C0.00303296 5.6003 -0.13559 7.00776 0.134506 8.36563C0.404603 9.7235 1.07129 10.9708 2.05026 11.9497C3.02922 12.9287 4.2765 13.5954 5.63437 13.8655C6.99224 14.1356 8.3997 13.997 9.67879 13.4672C10.9579 12.9373 12.0511 12.0401 12.8203 10.889C13.5895 9.73785 14 8.38447 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0ZM1.16667 7C1.16549 5.65478 1.63303 4.35118 2.48889 3.31333L10.6867 11.5111C9.83309 12.2112 8.79816 12.6544 7.70243 12.789C6.60669 12.9236 5.49527 12.744 4.49764 12.2713C3.50001 11.7986 2.65724 11.0521 2.06751 10.1188C1.47778 9.18558 1.16537 8.10397 1.16667 7ZM11.5111 10.6867L3.31334 2.48889C4.43144 1.57388 5.84966 1.10701 7.29265 1.1789C8.73565 1.2508 10.1004 1.85633 11.1221 2.87795C12.1437 3.89956 12.7492 5.26435 12.8211 6.70735C12.893 8.15034 12.4261 9.56856 11.5111 10.6867Z",fill:"currentColor"},null,-1)]),16)}je.render=mt;var Pe={name:"StarIcon",extends:ie};function vt(a,e,n,o,p,t){return i(),g("svg",q({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),e[0]||(e[0]=[y("path",{d:"M10.9741 13.6721C10.8806 13.6719 10.7886 13.6483 10.7066 13.6033L7.00002 11.6545L3.29345 13.6033C3.19926 13.6539 3.09281 13.6771 2.98612 13.6703C2.87943 13.6636 2.77676 13.6271 2.6897 13.5651C2.60277 13.5014 2.53529 13.4147 2.4948 13.3148C2.45431 13.215 2.44241 13.1058 2.46042 12.9995L3.17881 8.87264L0.167699 5.95324C0.0922333 5.8777 0.039368 5.78258 0.0150625 5.67861C-0.00924303 5.57463 -0.00402231 5.46594 0.030136 5.36477C0.0621323 5.26323 0.122141 5.17278 0.203259 5.10383C0.284377 5.03488 0.383311 4.99023 0.488681 4.97501L4.63087 4.37126L6.48797 0.618832C6.54083 0.530159 6.61581 0.456732 6.70556 0.405741C6.79532 0.35475 6.89678 0.327942 7.00002 0.327942C7.10325 0.327942 7.20471 0.35475 7.29447 0.405741C7.38422 0.456732 7.4592 0.530159 7.51206 0.618832L9.36916 4.37126L13.5114 4.97501C13.6167 4.99023 13.7157 5.03488 13.7968 5.10383C13.8779 5.17278 13.9379 5.26323 13.9699 5.36477C14.0041 5.46594 14.0093 5.57463 13.985 5.67861C13.9607 5.78258 13.9078 5.8777 13.8323 5.95324L10.8212 8.87264L11.532 12.9995C11.55 13.1058 11.5381 13.215 11.4976 13.3148C11.4571 13.4147 11.3896 13.5014 11.3027 13.5651C11.2059 13.632 11.0917 13.6692 10.9741 13.6721ZM7.00002 10.4393C7.09251 10.4404 7.18371 10.4613 7.2675 10.5005L10.2098 12.029L9.65193 8.75036C9.6368 8.6584 9.64343 8.56418 9.6713 8.47526C9.69918 8.38633 9.74751 8.30518 9.81242 8.23832L12.1969 5.94559L8.90298 5.45648C8.81188 5.44198 8.72555 5.406 8.65113 5.35152C8.57671 5.29703 8.51633 5.2256 8.475 5.14314L7.00002 2.1626L5.52503 5.15078C5.4837 5.23324 5.42332 5.30467 5.3489 5.35916C5.27448 5.41365 5.18815 5.44963 5.09705 5.46412L1.80318 5.94559L4.18761 8.23832C4.25252 8.30518 4.30085 8.38633 4.32873 8.47526C4.3566 8.56418 4.36323 8.6584 4.3481 8.75036L3.7902 12.0519L6.73253 10.5234C6.81451 10.4762 6.9058 10.4475 7.00002 10.4393Z",fill:"currentColor"},null,-1)]),16)}Pe.render=vt;var Be={name:"StarFillIcon",extends:ie};function ft(a,e,n,o,p,t){return i(),g("svg",q({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),e[0]||(e[0]=[y("path",{d:"M13.9718 5.36453C13.9398 5.26298 13.8798 5.17252 13.7986 5.10356C13.7175 5.0346 13.6186 4.98994 13.5132 4.97472L9.37043 4.37088L7.51307 0.617955C7.46021 0.529271 7.38522 0.455834 7.29545 0.404836C7.20568 0.353838 7.1042 0.327026 7.00096 0.327026C6.89771 0.327026 6.79624 0.353838 6.70647 0.404836C6.6167 0.455834 6.54171 0.529271 6.48885 0.617955L4.63149 4.37088L0.488746 4.97472C0.383363 4.98994 0.284416 5.0346 0.203286 5.10356C0.122157 5.17252 0.0621407 5.26298 0.03014 5.36453C-0.00402286 5.46571 -0.00924428 5.57442 0.0150645 5.67841C0.0393733 5.7824 0.0922457 5.87753 0.167722 5.95308L3.17924 8.87287L2.4684 13.0003C2.45038 13.1066 2.46229 13.2158 2.50278 13.3157C2.54328 13.4156 2.61077 13.5022 2.6977 13.5659C2.78477 13.628 2.88746 13.6644 2.99416 13.6712C3.10087 13.678 3.20733 13.6547 3.30153 13.6042L7.00096 11.6551L10.708 13.6042C10.79 13.6491 10.882 13.6728 10.9755 13.673C11.0958 13.6716 11.2129 13.6343 11.3119 13.5659C11.3988 13.5022 11.4663 13.4156 11.5068 13.3157C11.5473 13.2158 11.5592 13.1066 11.5412 13.0003L10.8227 8.87287L13.8266 5.95308C13.9033 5.87835 13.9577 5.7836 13.9833 5.67957C14.009 5.57554 14.005 5.4664 13.9718 5.36453Z",fill:"currentColor"},null,-1)]),16)}Be.render=ft;var _t=function(e){var n=e.dt;return`
.p-rating {
    position: relative;
    display: flex;
    align-items: center;
    gap: `.concat(n("rating.gap"),`;
}

.p-rating-option {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    outline-color: transparent;
    border-radius: 50%;
    transition: background `).concat(n("rating.transition.duration"),", color ").concat(n("rating.transition.duration"),", border-color ").concat(n("rating.transition.duration"),", outline-color ").concat(n("rating.transition.duration"),", box-shadow ").concat(n("rating.transition.duration"),`;
}

.p-rating-option.p-focus-visible {
    box-shadow: `).concat(n("rating.focus.ring.shadow"),`;
    outline: `).concat(n("rating.focus.ring.width")," ").concat(n("rating.focus.ring.style")," ").concat(n("rating.focus.ring.color"),`;
    outline-offset: `).concat(n("rating.focus.ring.offset"),`;
}

.p-rating-icon {
    color: `).concat(n("rating.icon.color"),`;
    transition: background `).concat(n("rating.transition.duration"),", color ").concat(n("rating.transition.duration"),", border-color ").concat(n("rating.transition.duration"),", outline-color ").concat(n("rating.transition.duration"),", box-shadow ").concat(n("rating.transition.duration"),`;
    font-size: `).concat(n("rating.icon.size"),`;
    width: `).concat(n("rating.icon.size"),`;
    height: `).concat(n("rating.icon.size"),`;
}

.p-rating:not(.p-disabled):not(.p-readonly) .p-rating-option:hover .p-rating-icon {
    color: `).concat(n("rating.icon.hover.color"),`;
}

.p-rating-option-active .p-rating-icon {
    color: `).concat(n("rating.icon.active.color"),`;
}

.p-rating-icon.p-invalid { /* @todo */
    stroke: `).concat(n("rating.invalid.icon.color"),`;
}
`)},gt={root:function(e){var n=e.props;return["p-rating",{"p-readonly":n.readonly,"p-disabled":n.disabled}]},option:function(e){var n=e.instance,o=e.value;return["p-rating-option",{"p-rating-option-active":o<=n.d_value,"p-focus-visible":o===n.focusedOptionIndex&&n.isFocusVisibleItem}]},onIcon:function(e){var n=e.instance;return["p-rating-icon p-rating-on-icon",{"p-invalid":n.$invalid}]},offIcon:function(e){var n=e.instance;return["p-rating-icon p-rating-off-icon",{"p-invalid":n.$invalid}]}},ht=Fe.extend({name:"rating",theme:_t,classes:gt}),yt={name:"BaseRating",extends:Ae,props:{readonly:{type:Boolean,default:!1},stars:{type:Number,default:5},onIcon:{type:String,default:void 0},offIcon:{type:String,default:void 0}},style:ht,provide:function(){return{$pcRating:this,$parentInstance:this}}},Le={name:"Rating",extends:yt,inheritAttrs:!1,emits:["change","focus","blur"],data:function(){return{d_name:this.name,focusedOptionIndex:-1,isFocusVisibleItem:!0}},watch:{name:function(e){this.d_name=e||ge()}},mounted:function(){this.d_name=this.d_name||ge()},methods:{getPTOptions:function(e,n){return this.ptm(e,{context:{active:n<=this.d_value,focused:n===this.focusedOptionIndex}})},onOptionClick:function(e,n){if(!this.readonly&&!this.disabled){this.onOptionSelect(e,n),this.isFocusVisibleItem=!1;var o=ze(e.currentTarget);o&&Ue(o)}},onFocus:function(e,n){this.focusedOptionIndex=n,this.$emit("focus",e)},onBlur:function(e){var n,o;this.focusedOptionIndex=-1,this.$emit("blur",e),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o)},onChange:function(e,n){this.onOptionSelect(e,n),this.isFocusVisibleItem=!0},onOptionSelect:function(e,n){this.focusedOptionIndex===n||this.d_value===n?(this.focusedOptionIndex=-1,this.updateModel(e,null)):(this.focusedOptionIndex=n,this.updateModel(e,n||null))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},starAriaLabel:function(e){return e===1?this.$primevue.config.locale.aria.star:this.$primevue.config.locale.aria.stars.replace(/{star}/g,e)}},components:{StarFillIcon:Be,StarIcon:Pe,BanIcon:je}},bt=["onClick","data-p-active","data-p-focused"],wt=["value","name","checked","disabled","readonly","aria-label","onFocus","onChange"];function xt(a,e,n,o,p,t){return i(),g("div",q({class:a.cx("root")},a.ptmi("root")),[(i(!0),g(H,null,K(a.stars,function(l){return i(),g("div",q({key:l,class:a.cx("option",{value:l}),onClick:function(f){return t.onOptionClick(f,l)},ref_for:!0},t.getPTOptions("option",l),{"data-p-active":l<=a.d_value,"data-p-focused":l===p.focusedOptionIndex}),[y("span",q({class:"p-hidden-accessible",ref_for:!0},a.ptm("hiddenOptionInputContainer"),{"data-p-hidden-accessible":!0}),[y("input",q({type:"radio",value:l,name:p.d_name,checked:a.d_value===l,disabled:a.disabled,readonly:a.readonly,"aria-label":t.starAriaLabel(l),onFocus:function(f){return t.onFocus(f,l)},onBlur:e[0]||(e[0]=function(){return t.onBlur&&t.onBlur.apply(t,arguments)}),onChange:function(f){return t.onChange(f,l)},ref_for:!0},a.ptm("hiddenOptionInput")),null,16,wt)],16),l<=a.d_value?he(a.$slots,"onicon",{key:0,value:l,class:be(a.cx("onIcon"))},function(){return[(i(),x(ye(a.onIcon?"span":"StarFillIcon"),q({class:[a.cx("onIcon"),a.onIcon],ref_for:!0},a.ptm("onIcon")),null,16,["class"]))]}):he(a.$slots,"officon",{key:1,value:l,class:be(a.cx("offIcon"))},function(){return[(i(),x(ye(a.offIcon?"span":"StarIcon"),q({class:[a.cx("offIcon"),a.offIcon],ref_for:!0},a.ptm("offIcon")),null,16,["class"]))]})],16,bt)}),128))],16)}Le.render=xt;const $t={class:"p-4 h-full overflow-y-scroll"},Ct={key:0},kt={key:1,class:"flex flex-col gap-4"},St={class:"relative flex flex-grow justify-center items-center dashed-border h-48"},It={key:3,class:"flex justify-end"},Vt={key:5,class:"flex justify-start gap-2"},jt={key:6,class:"flex justify-start gap-2"},Pt=P({__name:"LessonCard",setup(a){const e=te(),n=T(),{lesson:o}=W(n),{setCardSaving:p}=n,t=$(null),l=$(null),v=$(["freemium","premium","hackaton","demo"]);E(()=>{var r;t.value=((r=o.value)==null?void 0:r.source_url)??""}),R([()=>{var r;return(r=o.value)==null?void 0:r.title},()=>{var r;return(r=o.value)==null?void 0:r.description},()=>{var r;return(r=o.value)==null?void 0:r.level},t,()=>{var r;return(r=o.value)==null?void 0:r.is_guidable},()=>{var r;return(r=o.value)==null?void 0:r.access_type},()=>{var r;return(r=o.value)==null?void 0:r.layer},()=>{var r;return(r=o.value)==null?void 0:r.lego}],()=>{var r;(r=o.value)!=null&&r.is_editable&&(p(!0),m())},{deep:!0});async function f(r){const u=r.files[0],w=new FormData;w.append("file",u);try{const{data:_}=await M.uploadImage(w,!0);t.value=_.source_url,l.value=_.preview_url??""}catch(_){console.log(_)}}const m=Ve(()=>{s()},1e3,{maxWait:5e3});async function s(){var r,u,w;p(!0);try{e.name=="project-edit"?(await le.updateProjectByID(o.value.id,((r=l.value)==null?void 0:r.toString())??"",t.value??"",o.value.is_guidable,o.value.access_type,o.value.level,o.value.layer,((u=o.value)==null?void 0:u.lego)??!1),await le.updateProjectTranslationByID(o.value.id,o.value.title,o.value.description)):e.name=="module-edit"&&(await ae.updateModuleByID(o.value.id,((w=l.value)==null?void 0:w.toString())??"",t.value??"",o.value.access_type),await ae.updateModuleTranslationByID(o.value.id,o.value.title))}catch(_){console.log(_)}finally{p(!1)}}return(r,u)=>{const w=Ze,_=Ie,B=Ge,A=Le,k=X,V=Ce,b=Te,F=$e,I=se;return i(),g("div",$t,[d(o)?(i(),g("div",kt,[["prepare_for_submission","waiting_for_review","in_review","in_modify"].includes(d(o).stage)?(i(),x(w,{key:0,label:d(o).stage.replace(/_/g," ").replace(/^./,h=>h.toUpperCase()),icon:"pi pi-clock",pt:{icon:{class:"text-yellow-500"}},class:"h-8 bg-yellow-50 w-fit"},null,8,["label"])):["ready_for_publish","published"].includes(d(o).stage)?(i(),x(w,{key:1,label:d(o).stage.replace(/_/g," ").replace(/^./,h=>h.toUpperCase()),icon:"pi pi-check-circle",pt:{icon:{class:"text-green-500"}},class:"h-8 bg-green-50 w-fit"},null,8,["label"])):["rejected"].includes(d(o).stage)?(i(),x(w,{key:2,label:d(o).stage.replace(/_/g," ").replace(/^./,h=>h.toUpperCase()),icon:"pi pi-times-circle",pt:{icon:{class:"text-red-500"}},class:"h-8 bg-red-50 w-fit"},null,8,["label"])):C("",!0),y("div",St,[t.value?(i(),x(_,{key:0,src:t.value.toString(),alt:"Image",class:"absolute top-0 left-0 rounded-xl object-cover h-48 w-full"},null,8,["src"])):C("",!0),c(B,{mode:"basic",onSelect:f,customUpload:"",auto:"",severity:"secondary","choose-icon":t.value==null?"pi pi-plus":"pi pi-pencil","choose-label":t.value==null?"Choose":"Edit",class:"p-button-outlined absolute top-0 left-0"},null,8,["choose-icon","choose-label"])]),d(e).name=="project-edit"?(i(),g("div",It,[c(A,{id:"level",modelValue:d(o).level,"onUpdate:modelValue":u[0]||(u[0]=h=>d(o).level=h)},null,8,["modelValue"])])):C("",!0),c(V,{variant:"on",class:"w-full"},{default:S(()=>[u[7]||(u[7]=y("label",{for:"title"},"Title",-1)),c(k,{id:"title",modelValue:d(o).title,"onUpdate:modelValue":u[1]||(u[1]=h=>d(o).title=h),class:"w-full",size:"small"},null,8,["modelValue"])]),_:1}),d(e).name=="project-edit"?(i(),x(V,{key:4,variant:"on",class:"w-full"},{default:S(()=>[u[8]||(u[8]=y("label",{for:"description"},"Description",-1)),c(b,{id:"description",modelValue:d(o).description,"onUpdate:modelValue":u[2]||(u[2]=h=>d(o).description=h),rows:"3",class:"w-full"},null,8,["modelValue"])]),_:1})):C("",!0),d(e).name=="project-edit"?(i(),g("div",Vt,[c(F,{modelValue:d(o).is_guidable,"onUpdate:modelValue":u[3]||(u[3]=h=>d(o).is_guidable=h)},null,8,["modelValue"]),u[9]||(u[9]=y("div",{class:"text-base"},"Guidable",-1))])):C("",!0),c(I,{modelValue:d(o).access_type,"onUpdate:modelValue":u[4]||(u[4]=h=>d(o).access_type=h),options:v.value,placeholder:"Set Access",class:"w-full",size:"small"},null,8,["modelValue","options"]),c(I,{modelValue:d(o).layer,"onUpdate:modelValue":u[5]||(u[5]=h=>d(o).layer=h),options:[0,1,2,3,4,5],placeholder:"Set Layer",class:"w-full",size:"small"},null,8,["modelValue"]),d(e).name=="project-edit"?(i(),g("div",jt,[c(F,{modelValue:d(o).lego,"onUpdate:modelValue":u[6]||(u[6]=h=>d(o).lego=h)},null,8,["modelValue"]),u[10]||(u[10]=y("div",{class:"text-base"},"Lego",-1))])):C("",!0)])):(i(),g("div",Ct,"Null"))])}}}),Bt=oe(Pt,[["__scopeId","data-v-4fa98bb1"]]),Lt={class:"flex items-center"},Tt=P({__name:"AnswerPanel",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(a){const e=Me(a,"modelValue");return(n,o)=>{const p=X,t=Z;return i(),x(t,{header:"Answer"},{default:S(()=>[y("div",Lt,[c(p,{id:"answer",modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=l=>e.value=l),placeholder:"Enter answer",class:"w-full",size:"small"},null,8,["modelValue"])])]),_:1})}}}),At={class:"flex items-start"},Ft=P({__name:"MdEditor",props:{content:{},index:{}},setup(a){const e=T(),{saveContent:n,removeContent:o}=e,p=a,t=$(""),l=()=>{o(p.index)};E(()=>{t.value=p.content.text??"none"}),R(t,()=>{n(t.value,null,p.index)});const v=Re({title:{title:"Title",icon:"v-md-icon-tip",action(m){m.insert(s=>{const r="# <center>",u="</center>",_=s||"Title";return{text:`${r}${_}${u}`,selected:_}})}},icons:{title:"icons",icon:"v-md-icon-tip",menus:[{name:"Attention",text:"Attention",action(m){m.insert(()=>{const s='<span style="font-size: 20px">',r="</span>",u="⚠️";return{text:`${s}${u}${r}`,selected:u}})}},{name:"PiBody",text:"PiBody",action(m){m.insert(()=>{const s="<b>",r="</b>",u='<span style="color: #FF3F85"> Pi</span>Body';return{text:`${s}${u}${r}`,selected:u}})}},{name:"Run",text:"Run",action(m){m.insert(()=>({text:"▶️<b>Run</b>"}))}}]},style:{title:"Style",icon:"v-md-icon-tip",action(m){m.insert(s=>{const r='<span style="">',u="</span>",_=s||"placeholder";return{text:`${r}${_}${u}`,selected:_}})}},underline:{title:"Underline",icon:"v-md-icon-under-line",action(m){m.insert(s=>{const r='<span style="text-decoration: underline">',u="</span>",_=s||"placeholder";return{text:`${r}${_}${u}`,selected:_}})}},tip:{title:"Tip",icon:"v-md-icon-tip",action(m){m.insert(s=>{const r='<div style="background-color:#F3F5F7; padding: 20px; border-left: solid 8px #42B983">',u="</div>",_=s||"placeholder";return{text:`${r}${_}${u}`,selected:_}})}},note:{title:"Note",icon:"v-md-icon-tip",action(m){m.insert(s=>{const r='<div style="background-color:#F3F5F7; padding: 15px; border-left: solid 8px #FFCD6B; margin-bottom: 15px">',u="</div>",_=s||"placeholder";return{text:`${r}${_}${u}`,selected:_}})}}});async function f(m,s,r){const u=r[0],w=new FormData;w.append("file",u);try{const{data:_}=await M.uploadImage(w,!1),B=_.source_url;s({url:B,desc:"desc",width:"auto",height:"auto"})}catch(_){console.log(_)}}return(m,s)=>{const r=re("v-md-editor"),u=z;return i(),g("div",At,[c(r,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=w=>t.value=w),mode:"edit","left-toolbar":"undo redo clear | tip emoji todo-list | h bold italic strikethrough quote ul ol table hr link code image | title icons style underline tip note","right-toolbar":"",toolbar:v,"disabled-menus":[],onUploadImage:f},null,8,["modelValue","toolbar"]),c(u,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",class:"ml-2",onClick:l})])}}}),zt=oe(Ft,[["__scopeId","data-v-2ca7300e"]]),Ut={class:"flex items-center"},Mt=P({__name:"VideoEditor",props:{content:{},index:{}},setup(a){const e=a,n=T(),{saveContent:o,removeContent:p}=n,t=$(""),l=()=>{p(e.index)};return E(()=>{t.value=e.content.text??""}),R(t,()=>{o(t.value,null,e.index)}),(v,f)=>{const m=X,s=z;return i(),g("div",Ut,[c(m,{id:"video",modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=r=>t.value=r),placeholder:"Enter video url",class:"w-full mr-2",size:"small"},null,8,["modelValue"]),c(s,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:l})])}}}),Rt={class:"flex items-center"},Dt=P({__name:"TinkercadEditor",props:{content:{},index:{}},setup(a){const e=a,n=T(),{saveContent:o,removeContent:p}=n,t=$(""),l=()=>{p(e.index)};return E(()=>{t.value=e.content.text??""}),R(t,()=>{o(t.value,null,e.index)}),(v,f)=>{const m=X,s=z;return i(),g("div",Rt,[c(m,{id:"tinkercad",modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=r=>t.value=r),placeholder:"Enter embed tinkercad url",class:"w-full mr-2",size:"small"},null,8,["modelValue"]),c(s,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:l})])}}}),Ot={class:"flex flex-col gap-2"},Et=P({__name:"ContentsPanel",props:{contents:{},stepType:{}},setup(a){const e=a,n=T(),{addContent:o}=n,p=$(),t=$([{label:"Text",icon:"pi pi-align-left",command:()=>{o("text")}},{label:"Video",icon:"pi pi-play",command:()=>{o("video")}},{label:"Tinkercad",icon:"pi pi-box",command:()=>{o("tinkercad")}}]),l=v=>{p.value.toggle(v)};return(v,f)=>{const m=z,s=Qe,r=Z;return i(),x(r,{header:"Contents"},{default:S(()=>[y("div",Ot,[(i(!0),g(H,null,K(e.contents,(u,w)=>(i(),g("div",{key:u.id},[u.type=="text"?(i(),x(zt,{key:0,content:u,index:w},null,8,["content","index"])):u.type=="video"?(i(),x(Mt,{key:1,content:u,index:w},null,8,["content","index"])):u.type=="tinkercad"?(i(),x(Dt,{key:2,content:u,index:w},null,8,["content","index"])):C("",!0)]))),128))]),c(m,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:l,"aria-haspopup":"true","aria-controls":"overlay_menu"}),c(s,{ref_key:"menu",ref:p,id:"overlay_menu",model:t.value,popup:!0},null,8,["model"])]),_:1})}}}),qt={class:"flex items-center"},Ht=P({__name:"OptionEditor",props:{option:{},index:{}},setup(a){const e=T(),{saveOption:n,removeOption:o}=e,p=a,t=$(""),l=$(!1),v=()=>{o(p.index)};E(()=>{t.value=p.option.text??"",l.value=p.option.correct}),R([t,l],()=>{n(t.value,l.value,p.index)});async function f(m,s,r){const u=r[0],w=new FormData;w.append("file",u);try{const{data:_}=await M.uploadImage(w,!1),B=_.source_url;s({url:B,desc:"desc",width:"auto",height:"auto"})}catch(_){console.log(_)}}return(m,s)=>{const r=Ye,u=de,w=re("v-md-editor"),_=pe,B=z;return i(),g("div",qt,[c(_,null,{default:S(()=>[c(u,null,{default:S(()=>[c(r,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=A=>l.value=A),binary:!0},null,8,["modelValue"])]),_:1}),c(w,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=A=>t.value=A),mode:"edit","left-toolbar":"undo redo clear | tip emoji todo-list | h bold italic strikethrough quote ul ol table hr link code image | title icons style underline tip note","right-toolbar":"","disabled-menus":[],onUploadImage:f},null,8,["modelValue"])]),_:1}),c(B,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:v,class:"ml-2"})])}}}),Nt=oe(Ht,[["__scopeId","data-v-76be2a26"]]),Gt={class:"flex flex-col gap-2"},Zt=P({__name:"OptionsPanel",props:{options:{},guidable:{type:Boolean}},setup(a){const e=a,n=T(),{addOption:o}=n;return(p,t)=>{const l=ue,v=z,f=Z;return i(),x(f,{header:e.guidable?"Checklist":"Options"},{default:S(()=>[e.guidable?C("",!0):(i(),x(l,{key:0,size:"small",severity:"warn",variant:"simple",class:"mb-2"},{default:S(()=>t[0]||(t[0]=[J("*Create options and select correct ones ")])),_:1})),y("div",Gt,[(i(!0),g(H,null,K(e.options,(m,s)=>(i(),g("div",{key:m.id},[c(Nt,{option:m,index:s},null,8,["option","index"])]))),128))]),c(v,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:d(o)},null,8,["onClick"])]),_:1},8,["header"])}}}),Wt={class:"flex items-center"},Kt=P({__name:"PairEditor",props:{pair:{},index:{}},setup(a){const e=T(),{savePair:n,removePair:o}=e,p=a,t=$(""),l=$(""),v=()=>{o(p.index)};return E(()=>{t.value=p.pair.key,l.value=p.pair.value}),R([t,l],()=>{n(t.value,l.value,p.index)}),(f,m)=>{const s=X,r=de,u=pe,w=z;return i(),g("div",Wt,[c(u,null,{default:S(()=>[c(s,{placeholder:"Key",modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=_=>t.value=_),size:"small"},null,8,["modelValue"]),c(r,null,{default:S(()=>m[2]||(m[2]=[y("div",null,"=",-1)])),_:1}),c(s,{placeholder:"Value",modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=_=>l.value=_),size:"small"},null,8,["modelValue"])]),_:1}),c(w,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:v,class:"ml-2"})])}}}),Qt={class:"flex flex-col gap-2"},Yt=P({__name:"PairsPanel",props:{pairs:{}},setup(a){const e=a,n=T(),{addPair:o}=n;return(p,t)=>{const l=ue,v=z,f=Z;return i(),x(f,{header:"Pairs"},{default:S(()=>[c(l,{size:"small",severity:"warn",variant:"simple",class:"mb-2"},{default:S(()=>t[0]||(t[0]=[J("*Create matching pairs")])),_:1}),y("div",Qt,[(i(!0),g(H,null,K(e.pairs,(m,s)=>(i(),g("div",{key:m.id},[c(Kt,{pair:m,index:s},null,8,["pair","index"])]))),128))]),c(v,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:d(o)},null,8,["onClick"])]),_:1})}}});$([]);const Jt={class:"flex flex-col gap-2"},Xt={class:"flex items-center"},eo={class:"flex items-center"},to=P({__name:"ActionsPanel",props:{stepType:{},userActions:{},platformActions:{}},setup(a){const e=a,n=T(),{saveUserActions:o,savePlatformActions:p}=n,t=$(null),l=$(null),v=$(["put-module","run-code"]),f=$(["code2ide","light-up","auto-run","auto-put","hide-ide","hide-sim"]);function m(){e.userActions&&(t.value=e.userActions),e.platformActions?l.value=e.platformActions:e.stepType==="code"&&(l.value=["code2ide","light-up"])}return E(()=>{m()}),R([t,l],()=>{o(t.value),p(l.value)}),R([()=>e.userActions,()=>e.platformActions],()=>{m()}),(s,r)=>{const u=Je,w=Z;return i(),x(w,{header:"Actions"},{default:S(()=>[y("div",Jt,[y("div",Xt,[c(u,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=_=>t.value=_),display:"chip",options:v.value,placeholder:"Select user actions",class:"w-full"},null,8,["modelValue","options"])]),y("div",eo,[c(u,{modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=_=>l.value=_),display:"chip",options:f.value,placeholder:"Select platform actions",class:"w-full"},null,8,["modelValue","options"])])])]),_:1})}}}),oo={class:"flex items-center"},no=P({__name:"HighlightEditor",props:{highlight:{},index:{}},setup(a){const e=T(),{saveHighlight:n,removeHighlight:o}=e,p=a,t=$(null),l=$(null),v=()=>{o(p.index)};E(()=>{t.value=p.highlight.module,l.value=p.highlight.slot}),R([t,l],()=>{t.value==null||l.value==null||n(t.value,l.value,p.index)});const f=$(["A","B","C","D","E","F"]),m=$(["8","9"]),s=$(["LED","switch","push-button","light-sensor","touch-sensor","potentiometer","encoder","motion-detector","microphone","climate-sensor","gyro-accel","buzzer","color-sensor","joystick","distance-sensor","servo","led-tower"]),r=ee(()=>t.value?t.value==="servo"?m.value:f.value:[...f.value,...m.value]),u=ee(()=>l.value?l.value==="8"||l.value==="9"?["servo"]:s.value.filter(w=>w!=="servo"):s.value);return(w,_)=>{const B=se,A=de,k=pe,V=z;return i(),g("div",oo,[c(k,null,{default:S(()=>[c(B,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=b=>t.value=b),options:u.value,placeholder:"Select module",class:"place-content-center",size:"small"},null,8,["modelValue","options"]),c(A,{class:"h-[35px]"},{default:S(()=>_[2]||(_[2]=[y("div",null,"=>",-1)])),_:1}),c(B,{modelValue:l.value,"onUpdate:modelValue":_[1]||(_[1]=b=>l.value=b),options:r.value,placeholder:"Select slot",size:"small"},null,8,["modelValue","options"])]),_:1}),c(V,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:v,class:"ml-2"})])}}}),lo={class:"flex flex-col gap-2"},ao=P({__name:"HighlightPanel",props:{highlights:{}},setup(a){const e=a,n=T(),{addHighlight:o}=n;return(p,t)=>{const l=z,v=Z;return i(),x(v,{header:"Highlight slots & modules"},{default:S(()=>[y("div",lo,[(i(!0),g(H,null,K(e.highlights,(f,m)=>(i(),g("div",{key:f.id},[c(no,{highlight:f,index:m},null,8,["highlight","index"])]))),128))]),c(l,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:d(o)},null,8,["onClick"])]),_:1})}}}),so={class:"font-bold"},io={class:"flex gap-2 flex-wrap"},ro=P({__name:"TestsPanel",props:{tests:{}},setup(a){const e=T(),n=a,o=ce(),{lesson:p,stepIndex:t}=W(e),l=()=>{if(t.value==null||!p.value)return;const v=p.value.id,f=p.value.steps[t.value].id;o.push({path:`/tester/${v}/${f}/`})};return(v,f)=>{const m=z,s=Z;return i(),x(s,{header:"Tests"},{header:S(()=>[y("div",so,[f[0]||(f[0]=J(" Tests ")),c(m,{icon:"pi pi-pen-to-square",severity:"info",variant:"text",rounded:"","aria-label":"Edit",onClick:l})])]),default:S(()=>[y("div",io,[(i(!0),g(H,null,K(n.tests,(r,u)=>(i(),g("div",{key:r.url,class:"border p-2 px-4 rounded shadow"},ke(r.name?r.name:"test "+(u+1)),1))),128))])]),_:1})}}}),co={class:"flex flex-col gap-2"},uo={class:"flex items-center"},po={class:"flex justify-between"},mo={class:"flex gap-2"},vo={class:"flex justify-between items-center gap-4"},fo={class:"flex items-center justify-end gap-2 mb-8 mt-4"},_o=P({__name:"StepEditor",setup(a){const e=De(),n=ce(),o=T(),{lesson:p,stepIndex:t}=W(o),{removeStep:l,setStepSaving:v}=o,f=$(!1),m=$(["freemium","premium","hackaton","demo"]),s=ee(()=>{var V;return t.value==null?null:((V=p.value)==null?void 0:V.steps[t.value])??null}),r=ee(()=>t.value==null?{starting:"",answer:"",hashed_answer:""}:{starting:s.value.inner.starting??"",answer:s.value.inner.solution??"",hashed_answer:""}),u=Ve(()=>{w()},1e3,{maxWait:5e3});R(s,(V,b)=>{var F;V==null||b==null||V.id==b.id&&(F=p.value)!=null&&F.is_editable&&(v(!0),u())},{deep:!0});async function w(){if(s.value!=null){v(!0);try{await M.updateStepTranslationByID(s.value.id,s.value.title,s.value.inner),await M.updateStepByID(s.value.id,s.value.access_type,s.value.skip_submit,s.value.type)}catch(V){console.log(V)}finally{v(!1)}}}function _(V){var b;if((b=p.value)!=null&&b.is_editable){const F=V;s.value.inner.starting=F.starting,s.value.inner.solution=F.answer,v(!0)}}function B(V){n.push({name:"tester",params:{lesson_id:p.value.id,step_id:s.value.id}})}function A(){e.require({message:"Are you sure you want to Delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{k()}})}async function k(){if(!(f.value||s.value==null)){f.value=!0;try{await M.deleteStepByID(s.value.id),l()}catch(V){console.log(V)}finally{f.value=!1}}}return(V,b)=>{var G;const F=X,I=Ce,h=ue,O=$e,L=Ke,N=Z,Q=z;return s.value?(i(),g("div",{class:"flex flex-col gap-2 overflow-scroll h-full p-4",key:s.value.id},[c(N,{header:"Info",class:"mb-2"},{header:S(()=>b[4]||(b[4]=[y("div",{class:"flex items-center justify-between w-full"},[y("span",{class:"font-semibold"},"Info")],-1)])),default:S(()=>[y("div",co,[y("div",uo,[c(I,{variant:"on",class:"w-full"},{default:S(()=>[b[5]||(b[5]=y("label",{for:"title"},"Title",-1)),c(F,{id:"title",modelValue:s.value.title,"onUpdate:modelValue":b[0]||(b[0]=j=>s.value.title=j),"aria-describedby":"username-help",class:"w-full",size:"small"},null,8,["modelValue"])]),_:1})]),y("div",po,[c(h,{size:"small",severity:"secondary",variant:"simple"},{default:S(()=>[J(ke(s.value.type),1)]),_:1}),y("div",mo,[c(h,{size:"small",severity:"secondary",variant:"simple"},{default:S(()=>b[6]||(b[6]=[J("skip submit")])),_:1}),c(O,{modelValue:s.value.skip_submit,"onUpdate:modelValue":b[1]||(b[1]=j=>s.value.skip_submit=j)},null,8,["modelValue"])])]),y("div",vo,[c(h,{size:"small",severity:"secondary",variant:"simple"},{default:S(()=>b[7]||(b[7]=[J("step access")])),_:1}),c(L,{modelValue:s.value.access_type,"onUpdate:modelValue":b[2]||(b[2]=j=>s.value.access_type=j),options:m.value,size:"small"},null,8,["modelValue","options"])])])]),_:1}),c(d(Et),{contents:s.value.inner.contents,"step-type":s.value.type,class:"mb-2"},null,8,["contents","step-type"]),s.value.type=="code"?(i(),x(d(Xe),{key:0,id:`code-${s.value.id}`,code:r.value,onSaveContent:_,onShowTester:B},null,8,["id","code"])):C("",!0),s.value.type=="code"?(i(),x(d(ro),{key:1,tests:s.value.inner.tests,class:"mb-2"},null,8,["tests"])):C("",!0),s.value.type=="question"?(i(),x(d(Zt),{key:2,options:s.value.inner.options,guidable:!1,class:"mb-2"},null,8,["options"])):C("",!0),s.value.type=="matching"?(i(),x(d(Yt),{key:3,pairs:s.value.inner.pairs,class:"mb-2"},null,8,["pairs"])):C("",!0),s.value.type=="open"?(i(),x(d(Tt),{key:4,modelValue:s.value.inner.answer,"onUpdate:modelValue":b[3]||(b[3]=j=>s.value.inner.answer=j),class:"mb-2"},null,8,["modelValue"])):C("",!0),c(d(ao),{highlights:s.value.inner.highlights,class:"mb-2"},null,8,["highlights"]),c(d(to),{"user-actions":s.value.inner.userActions,"platform-actions":s.value.inner.platformActions,stepType:s.value.type},null,8,["user-actions","platform-actions","stepType"]),y("div",fo,[c(Q,{label:"Remove",icon:"pi pi-trash",severity:"danger",size:"small",onClick:A,loading:f.value,disabled:f.value||!((G=d(p))!=null&&G.is_editable)},null,8,["loading","disabled"])])])):C("",!0)}}}),go={class:"flex justify-between items-center mb-8"},ho={class:"flex justify-end gap-2"},yo=P({__name:"EditorStepList",setup(a){var F;const{locale:e}=Se(),n=te(),o=T(),{lesson:p,stepIndex:t}=W(o),{changeStep:l,addStep:v,setSteps:f}=o,m=$(!1),s=$(!1),r=$(!1),u=$(null),w=$(["article","code","open","question"]),_=Oe("el"),B=Ee(),A=$([]);ut(_,A,{disabled:((F=p.value)==null?void 0:F.stage)=="published",onUpdate:I=>{var h;((h=p.value)==null?void 0:h.stage)!="published"&&(dt(A.value,I.oldIndex,I.newIndex,I),qe(async()=>{const O=[];A.value.map(L=>{const N=parseInt(L.id,10);O.push(N)});try{const{data:L}=await M.changeStepsOrder(O);B.add({severity:"success",summary:L.message,life:2e3})}catch(L){B.add({severity:"error",summary:L.response.data.error,detail:L,life:2e3})}}))}});function k(I,h){switch(I){case"article":return"pi pi-align-left";case"code":return h?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function V(){if(!s.value){s.value=!0;try{const{data:I}=await(n.name==="project-edit"?M.getProjectStepsByID(n.params.id.toString()):M.getModuleStepsByID(n.params.id.toString())),h=[];for(const O of I){const L=await we(O,!1);h.push(L)}A.value=h,f(h)}catch(I){console.log(I)}finally{s.value=!1}}}E(V),R(e,V,{immediate:!0});async function b(){if(u.value){r.value=!0;try{const{data:I}=await M.createStep(u.value),h=await we(I,!0);n.name=="project-edit"?await M.linkStepToProjectByID(n.params.id.toString(),I.id):n.name=="module-edit"&&await M.linkStepToModuleByID(n.params.id.toString(),I.id),v(u.value,h)}catch(I){console.log(I)}finally{r.value=!1,m.value=!1}}}return(I,h)=>{var G;const O=xe,L=z,N=se,Q=He;return i(),g(H,null,[y("div",{ref_key:"el",ref:_,class:"flex overflow-scroll items-center gap-1 mx-2"},[s.value||d(p)==null?(i(),x(O,{key:0,shape:"circle",size:"2rem"})):C("",!0),(i(!0),g(H,null,K(A.value,(j,Y)=>(i(),x(L,{key:j.id,icon:k(j.type,j.skip_submit),rounded:"",severity:d(t)==Y?void 0:"secondary",variant:d(t)==Y?void 0:"outlined",onClick:ne=>d(l)(Y),class:"h-8 min-w-8 w-8"},null,8,["icon","severity","variant","onClick"]))),128)),(G=d(p))!=null&&G.is_editable?(i(),x(L,{key:1,rounded:"",variant:"outlined",icon:"pi pi-plus",class:"h-8 min-w-8 w-8",onClick:h[0]||(h[0]=j=>m.value=!0)})):C("",!0)],512),c(Q,{visible:m.value,"onUpdate:visible":h[3]||(h[3]=j=>m.value=j),modal:"",header:"Add new Step!",style:{width:"20rem"},closable:!1},{default:S(()=>[y("div",go,[h[4]||(h[4]=y("span",{class:"text-surface-500 dark:text-surface-400"},"Choose type:",-1)),c(N,{modelValue:u.value,"onUpdate:modelValue":h[1]||(h[1]=j=>u.value=j),options:w.value,placeholder:"Select Type"},null,8,["modelValue","options"])]),y("div",ho,[c(L,{type:"button",label:"Cancel",severity:"secondary",onClick:h[2]||(h[2]=j=>m.value=!1)}),c(L,{type:"button",label:"+ Add",onClick:b,loading:r.value,disabled:r.value},null,8,["loading","disabled"])])]),_:1},8,["visible"])],64)}}}),U={sendProjectForReview:bo,cancelProjectReview:wo,startProjectReview:xo,acceptProject:$o,rejectProject:Co,editProjectReview:ko,publishProject:So,modifyProject:Io,hideProject:Vo,publishModule:jo,modifyModule:Po,hideModule:Bo};async function bo(a){try{return await D.patch(`/project/${a}/review/send`)}catch(e){throw console.log(e),e}}async function wo(a){try{return await D.patch(`/project/${a}/review/cancel`)}catch(e){throw console.log(e),e}}async function xo(a){try{return await D.patch(`/project/${a}/review/start`)}catch(e){throw console.log(e),e}}async function $o(a){try{return await D.patch(`/project/${a}/review/accept`)}catch(e){throw console.log(e),e}}async function Co(a){try{return await D.patch(`/project/${a}/review/reject`)}catch(e){throw console.log(e),e}}async function ko(a){try{return await D.patch(`/project/${a}/review/edit`)}catch(e){throw console.log(e),e}}async function So(a){try{return await D.patch(`/project/${a}/publish`)}catch(e){throw console.log(e),e}}async function Io(a){try{return await D.patch(`/project/${a}/modify`)}catch(e){throw console.log(e),e}}async function Vo(a){try{return await D.patch(`/project/${a}/hide`)}catch(e){throw console.log(e),e}}async function jo(a){try{return await D.patch(`/module/${a}/publish`)}catch(e){throw console.log(e),e}}async function Po(a){try{return await D.patch(`/module/${a}/modify`)}catch(e){throw console.log(e),e}}async function Bo(a){try{return await D.patch(`/module/${a}/hide`)}catch(e){throw console.log(e),e}}const Lo={key:0},To={key:0},Ao={key:1},Fo={key:0},zo={key:1},Uo={key:2},Mo={key:0,class:"flex gap-1"},Ro={key:3},Do={key:0},Oo={key:4},Eo={key:0,class:"flex gap-1"},qo={key:5},Ho={key:0,class:"flex gap-1"},No={key:6},Go={key:0,class:"flex gap-1"},Zo=P({__name:"StageButton",setup(a){const e=te(),n=Ne(),{user:o}=W(n),p=T(),{lesson:t}=W(p),l=$(!1),v=$(!1);async function f(){l.value=!0;try{e.name=="project-edit"&&await U.sendProjectForReview(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}async function m(){l.value=!0;try{e.name=="project-edit"&&await U.cancelProjectReview(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}async function s(){l.value=!0;try{e.name=="project-edit"&&await U.startProjectReview(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}async function r(){l.value=!0;try{e.name=="project-edit"&&await U.acceptProject(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}async function u(){v.value=!0;try{e.name=="project-edit"&&await U.rejectProject(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{v.value=!1}}async function w(){l.value=!0;try{e.name=="project-edit"&&await U.editProjectReview(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}async function _(){l.value=!0;try{e.name=="project-edit"?await U.publishProject(e.params.id.toString()):e.name=="module-edit"&&await U.publishModule(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}async function B(){v.value=!0;try{e.name=="project-edit"?await U.hideProject(e.params.id.toString()):e.name=="module-edit"&&await U.hideModule(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{v.value=!1}}async function A(){l.value=!0;try{e.name=="project-edit"?await U.modifyProject(e.params.id.toString()):e.name=="module-edit"&&await U.modifyModule(e.params.id.toString()),window.location.reload()}catch(k){console.log(k)}finally{l.value=!1}}return(k,V)=>{var F,I,h,O,L,N,Q,G,j,Y,ne,me,ve,fe,_e;const b=z;return((F=d(t))==null?void 0:F.stage)=="prepare_for_submission"?(i(),g("div",Lo,[((I=d(o))==null?void 0:I.user_type)=="contributor"?(i(),g("div",To,[c(b,{label:"Send for review",severity:"info",size:"small",onClick:f,disabled:l.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):((h=d(t))==null?void 0:h.stage)=="waiting_for_review"?(i(),g("div",Ao,[((O=d(o))==null?void 0:O.user_type)=="contributor"?(i(),g("div",Fo,[c(b,{label:"Cancel submission",severity:"danger",size:"small",onClick:m,disabled:l.value,loading:l.value},null,8,["disabled","loading"])])):((L=d(o))==null?void 0:L.user_type)=="editor"?(i(),g("div",zo,[c(b,{label:"Start review",severity:"info",size:"small",onClick:s,disabled:l.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):((N=d(t))==null?void 0:N.stage)=="in_review"?(i(),g("div",Uo,[((Q=d(o))==null?void 0:Q.user_type)=="editor"?(i(),g("div",Mo,[c(b,{label:"Reject",severity:"danger",size:"small",onClick:u,disabled:l.value||v.value,loading:v.value},null,8,["disabled","loading"]),c(b,{label:"Accept",size:"small",onClick:r,disabled:l.value||v.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):((G=d(t))==null?void 0:G.stage)=="rejected"?(i(),g("div",Ro,[((j=d(o))==null?void 0:j.user_type)=="contributor"?(i(),g("div",Do,[c(b,{label:"Edit submission",severity:"info",size:"small",onClick:w,disabled:l.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):((Y=d(t))==null?void 0:Y.stage)=="ready_for_publish"?(i(),g("div",Oo,[((ne=d(o))==null?void 0:ne.user_type)=="editor"?(i(),g("div",Eo,[d(t).created_by!=Number(d(o).user_id)?(i(),x(b,{key:0,label:"Reject",severity:"danger",size:"small",onClick:u,disabled:l.value||v.value,loading:v.value},null,8,["disabled","loading"])):C("",!0),c(b,{label:"Publish",size:"small",onClick:_,disabled:l.value||v.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):((me=d(t))==null?void 0:me.stage)=="published"?(i(),g("div",qo,[((ve=d(o))==null?void 0:ve.user_type)=="editor"?(i(),g("div",Ho,[c(b,{label:"Hide",severity:"danger",size:"small",onClick:B,disabled:l.value||v.value,loading:v.value},null,8,["disabled","loading"]),c(b,{label:"Modify",size:"small",onClick:A,disabled:l.value||v.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):((fe=d(t))==null?void 0:fe.stage)=="in_modify"?(i(),g("div",No,[((_e=d(o))==null?void 0:_e.user_type)=="editor"?(i(),g("div",Go,[c(b,{label:"Hide",severity:"danger",size:"small",onClick:B,disabled:l.value||v.value,loading:v.value},null,8,["disabled","loading"]),c(b,{label:"Publish",size:"small",onClick:_,disabled:l.value||v.value,loading:l.value},null,8,["disabled","loading"])])):C("",!0)])):C("",!0)}}}),Wo={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},Ko={class:"flex flex-none items-center"},Qo={class:"flex flex-none justify-end items-center gap-2"},Yo=P({__name:"EditorHeader",setup(a){const e=ce(),n=te();return(o,p)=>{const t=Ie,l=re("RouterLink"),v=z;return i(),g("div",Wo,[y("div",Ko,[c(l,{to:"/",class:"hover:opacity-80 transition"},{default:S(()=>[c(t,{src:d(et),width:"32"},null,8,["src"])]),_:1}),p[1]||(p[1]=y("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),c(v,{icon:"pi pi-angle-left",label:o.$t("back"),severity:"secondary",variant:"text",onClick:p[0]||(p[0]=f=>d(e).go(-1)),size:"small"},null,8,["label"])]),c(yo,{class:"flex-grow"}),y("div",Qo,[c(lt),c(Zo),c(tt,{path:d(n).fullPath.slice(0,-5)},null,8,["path"]),c(ot),c(nt)])])}}}),Jo={class:"flex flex-col p-4 gap-4 overflow-scroll h-full justify-between bg-white"},Xo={key:1,class:"flex"},en=P({__name:"LessonPreview",setup(a){const e=T(),{lesson:n,stepIndex:o}=W(e),{changeStep:p}=e,t=ee(()=>{var f;return o.value==null?null:((f=n.value)==null?void 0:f.steps[o.value])??null});async function l(){o.value!=null&&p(o.value-1)}async function v(){o.value!=null&&p(o.value+1)}return(f,m)=>{const s=z;return i(),g("div",Jo,[t.value?(i(),g("div",{key:t.value.id},[t.value.type=="article"?(i(),x(d(at),{key:0,step:t.value,isPreview:!0},null,8,["step"])):t.value.type=="code"?(i(),x(d(st),{key:1,step:t.value,isPreview:!0},null,8,["step"])):t.value.type=="matching"?(i(),x(d(it),{key:2,step:t.value,isPreview:!0},null,8,["step"])):t.value.type=="open"?(i(),x(d(rt),{key:3,step:t.value,isPreview:!0},null,8,["step"])):t.value.type=="question"?(i(),x(d(ct),{key:4,step:t.value,isPreview:!0},null,8,["step"])):C("",!0)])):C("",!0),d(n)!=null&&d(n).steps!=null&&d(n).steps.length>0&&t.value&&d(o)!=null?(i(),g("div",Xo,[d(o)!==0?(i(),x(s,{key:0,label:f.$t("previous"),icon:"pi pi-angle-left",size:"small",onClick:l},null,8,["label"])):C("",!0),d(o)<d(n).steps.length-1?(i(),x(s,{key:1,label:f.$t("next"),icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:v},null,8,["label"])):C("",!0)])):C("",!0)])}}}),tn={key:1,class:"h-[51px]"},on={class:"flex border-t bg-slate-50",style:{height:"calc(100vh - 52px)"}},nn={class:"max-w-[320px] w-full bg-white"},ln={key:0,class:"p-4"},an={class:"flex-grow border-l"},sn={class:"border-l max-w-[400px] w-full"},rn=P({__name:"EditorView",setup(a){const{locale:e}=Se(),n=te(),o=T(),{setLesson:p}=o,t=$(!1);async function l(){if(!t.value){t.value=!0;try{if(n.name=="project-edit"){const{data:v}=await le.getProjectByID(n.params.id.toString()),f=await pt(v);p(f)}else if(n.name=="module-edit"){const{data:v}=await ae.getModuleByID(n.params.id.toString()),f=await We(v);p(f)}}catch(v){console.log(v)}finally{t.value=!1}}}return E(l),R(e,l),(v,f)=>{const m=xe;return i(),g(H,null,[t.value?(i(),g("div",tn)):(i(),x(Yo,{key:0})),y("div",on,[y("div",nn,[t.value?(i(),g("div",ln,[c(m,{height:"192px"}),f[0]||(f[0]=y("br",null,null,-1)),c(m,{height:"32px"}),f[1]||(f[1]=y("br",null,null,-1)),c(m,{height:"32px"})])):(i(),x(Bt,{key:1}))]),y("div",an,[t.value?C("",!0):(i(),x(_o,{key:0}))]),y("div",sn,[t.value?C("",!0):(i(),x(en,{key:0}))])])],64)}}}),nl=oe(rn,[["__scopeId","data-v-8971b986"]]);export{nl as default};
