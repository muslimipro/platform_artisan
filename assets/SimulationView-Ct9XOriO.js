import{B as ce,S as we,W as Se,V,T as K,aw as oe,ax as ze,o as h,c as y,F as k,i as N,f as P,Q as te,v as F,e as p,h as C,y as de,x as _e,d as D,A as ie,m as G,Z as he,r as M,P as U,X as W,j as n,b as S,w as T,C as I,a7 as fe,s as X,_ as Pe,t as R,g as re,H as Le,J as Ee,a9 as _,E as ve,a0 as me,I as q,D as ne,ay as $e}from"./index-DcyBeJgC.js";import{u as ge,a as ye,k as j,l as E,q as O,r as Te,t as Q,v as Z,x as ke,y as Me,z as Ie,A as Ce,B as De,C as Ae,D as Re,E as Fe,_ as Be,F as Oe,G as Ue,b as Y,H as Ne,J as Ge,o as Ve,K as le,m as Ke,M as je,L as He,N as We,Q as Xe,S as Ye,T as Je,U as qe}from"./pibody-DqOzv7Z7.js";import{s as Qe}from"./index-dDCPORGv.js";import{s as Ze}from"./index-CwC5BdXP.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as et}from"./index-D9bkqAe8.js";import{s as tt}from"./logo-Cr9YRutO.js";import{P as nt}from"./pibody-BwAjMvHk.js";import{g as st}from"./index-ClYcSkZ_.js";var it=function(e){var t=e.dt;return`
.p-splitter {
    display: flex;
    flex-wrap: nowrap;
    border: 1px solid `.concat(t("splitter.border.color"),`;
    background: `).concat(t("splitter.background"),`;
    border-radius: `).concat(t("border.radius.md"),`;
    color: `).concat(t("splitter.color"),`;
}

.p-splitter-vertical {
    flex-direction: column;
}

.p-splitter-gutter {
    flex-grow: 0;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
    background: `).concat(t("splitter.gutter.background"),`;
}

.p-splitter-gutter-handle {
    border-radius: `).concat(t("splitter.handle.border.radius"),`;
    background: `).concat(t("splitter.handle.background"),`;
    transition: outline-color `).concat(t("splitter.transition.duration"),", box-shadow ").concat(t("splitter.transition.duration"),`;
    outline-color: transparent;
}

.p-splitter-gutter-handle:focus-visible {
    box-shadow: `).concat(t("splitter.handle.focus.ring.shadow"),`;
    outline: `).concat(t("splitter.handle.focus.ring.width")," ").concat(t("splitter.handle.focus.ring.style")," ").concat(t("splitter.handle.focus.ring.color"),`;
    outline-offset: `).concat(t("splitter.handle.focus.ring.offset"),`;
}

.p-splitter-horizontal.p-splitter-resizing {
    cursor: col-resize;
    user-select: none;
}

.p-splitter-vertical.p-splitter-resizing {
    cursor: row-resize;
    user-select: none;
}

.p-splitter-horizontal > .p-splitter-gutter > .p-splitter-gutter-handle {
    height: `).concat(t("splitter.handle.size"),`;
    width: 100%;
}

.p-splitter-vertical > .p-splitter-gutter > .p-splitter-gutter-handle {
    width: `).concat(t("splitter.handle.size"),`;
    height: 100%;
}

.p-splitter-horizontal > .p-splitter-gutter {
    cursor: col-resize;
}

.p-splitter-vertical > .p-splitter-gutter {
    cursor: row-resize;
}

.p-splitterpanel {
    flex-grow: 1;
    overflow: hidden;
}

.p-splitterpanel-nested {
    display: flex;
}

.p-splitterpanel .p-splitter {
    flex-grow: 1;
    border: 0 none;
}
`)},ot={root:function(e){var t=e.props;return["p-splitter p-component","p-splitter-"+t.layout]},gutter:"p-splitter-gutter",gutterHandle:"p-splitter-gutter-handle"},rt={root:function(e){var t=e.props;return[{display:"flex","flex-wrap":"nowrap"},t.layout==="vertical"?{"flex-direction":"column"}:""]}},lt=ce.extend({name:"splitter",theme:it,classes:ot,inlineStyles:rt}),at={name:"BaseSplitter",extends:de,props:{layout:{type:String,default:"horizontal"},gutterSize:{type:Number,default:4},stateKey:{type:String,default:null},stateStorage:{type:String,default:"session"},step:{type:Number,default:5}},style:lt,provide:function(){return{$pcSplitter:this,$parentInstance:this}}};function ae(s){return dt(s)||ct(s)||pt(s)||ut()}function ut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(s,e){if(s){if(typeof s=="string")return se(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?se(s,e):void 0}}function ct(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function dt(s){if(Array.isArray(s))return se(s)}function se(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,l=Array(e);t<e;t++)l[t]=s[t];return l}var ht={name:"Splitter",extends:at,inheritAttrs:!1,emits:["resizestart","resizeend","resize"],dragging:!1,mouseMoveListener:null,mouseUpListener:null,touchMoveListener:null,touchEndListener:null,size:null,gutterElement:null,startPos:null,prevPanelElement:null,nextPanelElement:null,nextPanelSize:null,prevPanelSize:null,panelSizes:null,prevPanelIndex:null,timer:null,mutationObserver:null,data:function(){return{prevSize:null,isRTL:!1}},mounted:function(){this.initializePanels(),this.updateDirection(),this.observeDirectionChanges()},beforeUnmount:function(){this.clear(),this.unbindMouseListeners(),this.mutationObserver&&this.mutationObserver.disconnect()},methods:{updateDirection:function(){this.isRTL=!!this.$el.closest('[dir="rtl"]')},observeDirectionChanges:function(){var e=this,t=document.documentElement,l={attributes:!0,attributeFilter:["dir"]};this.mutationObserver=new MutationObserver(function(){e.updateDirection()}),this.mutationObserver.observe(t,l)},isSplitterPanel:function(e){return e.type.name==="SplitterPanel"},initializePanels:function(){var e=this;if(this.panels&&this.panels.length){var t=!1;if(this.isStateful()&&(t=this.restoreState()),!t){var l=ae(this.$el.children).filter(function(i){return i.getAttribute("data-pc-name")==="splitterpanel"}),o=[];this.panels.map(function(i,a){var r=i.props&&i.props.size?i.props.size:null,u=r||100/e.panels.length;o[a]=u,l[a].style.flexBasis="calc("+u+"% - "+(e.panels.length-1)*e.gutterSize+"px)"}),this.panelSizes=o,this.prevSize=parseFloat(o[0]).toFixed(4)}}},onResizeStart:function(e,t,l){this.gutterElement=e.currentTarget||e.target.parentElement,this.size=this.horizontal?we(this.$el):Se(this.$el),l||(this.dragging=!0,this.startPos=this.layout==="horizontal"?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,l?(this.prevPanelSize=this.horizontal?V(this.prevPanelElement,!0):K(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal?V(this.nextPanelElement,!0):K(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal?V(this.prevPanelElement,!0):K(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal?V(this.nextPanelElement,!0):K(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=t,this.$emit("resizestart",{originalEvent:e,sizes:this.panelSizes}),this.$refs.gutter[t].setAttribute("data-p-gutter-resizing",!0),this.$el.setAttribute("data-p-resizing",!0)},onResize:function(e,t,l){var o,i,a;l?this.horizontal?(i=100*(this.prevPanelSize+t)/this.size,a=100*(this.nextPanelSize-t)/this.size):(i=100*(this.prevPanelSize-t)/this.size,a=100*(this.nextPanelSize+t)/this.size):(this.horizontal?this.isRTL?o=(this.startPos-e.pageX)*100/this.size:o=(e.pageX-this.startPos)*100/this.size:o=(e.pageY-this.startPos)*100/this.size,i=this.prevPanelSize+o,a=this.nextPanelSize-o),this.validateResize(i,a)&&(this.prevPanelElement.style.flexBasis="calc("+i+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+a+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.panelSizes[this.prevPanelIndex]=i,this.panelSizes[this.prevPanelIndex+1]=a,this.prevSize=parseFloat(i).toFixed(4)),this.$emit("resize",{originalEvent:e,sizes:this.panelSizes})},onResizeEnd:function(e){this.isStateful()&&this.saveState(),this.$emit("resizeend",{originalEvent:e,sizes:this.panelSizes}),this.$refs.gutter.forEach(function(t){return t.setAttribute("data-p-gutter-resizing",!1)}),this.$el.setAttribute("data-p-resizing",!1),this.clear()},repeat:function(e,t,l){this.onResizeStart(e,t,!0),this.onResize(e,l,!0)},setTimer:function(e,t,l){var o=this;this.timer||(this.timer=setInterval(function(){o.repeat(e,t,l)},40))},clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onGutterKeyUp:function(){this.clearTimer(),this.onResizeEnd()},onGutterKeyDown:function(e,t){switch(e.code){case"ArrowLeft":{this.layout==="horizontal"&&this.setTimer(e,t,this.step*-1),e.preventDefault();break}case"ArrowRight":{this.layout==="horizontal"&&this.setTimer(e,t,this.step),e.preventDefault();break}case"ArrowDown":{this.layout==="vertical"&&this.setTimer(e,t,this.step*-1),e.preventDefault();break}case"ArrowUp":{this.layout==="vertical"&&this.setTimer(e,t,this.step),e.preventDefault();break}}},onGutterMouseDown:function(e,t){this.onResizeStart(e,t),this.bindMouseListeners()},onGutterTouchStart:function(e,t){this.onResizeStart(e,t),this.bindTouchListeners(),e.preventDefault()},onGutterTouchMove:function(e){this.onResize(e),e.preventDefault()},onGutterTouchEnd:function(e){this.onResizeEnd(e),this.unbindTouchListeners(),e.preventDefault()},bindMouseListeners:function(){var e=this;this.mouseMoveListener||(this.mouseMoveListener=function(t){return e.onResize(t)},document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=function(t){e.onResizeEnd(t),e.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))},bindTouchListeners:function(){var e=this;this.touchMoveListener||(this.touchMoveListener=function(t){return e.onResize(t.changedTouches[0])},document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=function(t){e.resizeEnd(t),e.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))},validateResize:function(e,t){if(e>100||e<0||t>100||t<0)return!1;var l=oe(this.panels[this.prevPanelIndex],"minSize");if(this.panels[this.prevPanelIndex].props&&l&&l>e)return!1;var o=oe(this.panels[this.prevPanelIndex+1],"minSize");return!(this.panels[this.prevPanelIndex+1].props&&o&&o>t)},unbindMouseListeners:function(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)},unbindTouchListeners:function(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)},clear:function(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){ze(this.panelSizes)&&this.getStorage().setItem(this.stateKey,JSON.stringify(this.panelSizes))},restoreState:function(){var e=this,t=this.getStorage(),l=t.getItem(this.stateKey);if(l){this.panelSizes=JSON.parse(l);var o=ae(this.$el.children).filter(function(i){return i.getAttribute("data-pc-name")==="splitterpanel"});return o.forEach(function(i,a){i.style.flexBasis="calc("+e.panelSizes[a]+"% - "+(e.panels.length-1)*e.gutterSize+"px)"}),!0}return!1},resetState:function(){this.initializePanels()}},computed:{panels:function(){var e=this,t=[];return this.$slots.default().forEach(function(l){e.isSplitterPanel(l)?t.push(l):l.children instanceof Array&&l.children.forEach(function(o){e.isSplitterPanel(o)&&t.push(o)})}),t},gutterStyle:function(){return this.horizontal?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}},horizontal:function(){return this.layout==="horizontal"},getPTOptions:function(){var e;return{context:{nested:(e=this.$parentInstance)===null||e===void 0?void 0:e.nestedState}}}}},ft=["onMousedown","onTouchstart","onTouchmove","onTouchend"],vt=["aria-orientation","aria-valuenow","onKeydown"];function mt(s,e,t,l,o,i){return h(),y("div",F({class:s.cx("root"),style:s.sx("root"),"data-p-resizing":!1},s.ptmi("root",i.getPTOptions)),[(h(!0),y(k,null,N(i.panels,function(a,r){return h(),y(k,{key:r},[(h(),P(te(a),{tabindex:"-1"})),r!==i.panels.length-1?(h(),y("div",F({key:0,ref_for:!0,ref:"gutter",class:s.cx("gutter"),role:"separator",tabindex:"-1",onMousedown:function(c){return i.onGutterMouseDown(c,r)},onTouchstart:function(c){return i.onGutterTouchStart(c,r)},onTouchmove:function(c){return i.onGutterTouchMove(c,r)},onTouchend:function(c){return i.onGutterTouchEnd(c,r)},"data-p-gutter-resizing":!1},s.ptm("gutter")),[p("div",F({class:s.cx("gutterHandle"),tabindex:"0",style:[i.gutterStyle],"aria-orientation":s.layout,"aria-valuenow":o.prevSize,onKeyup:e[0]||(e[0]=function(){return i.onGutterKeyUp&&i.onGutterKeyUp.apply(i,arguments)}),onKeydown:function(c){return i.onGutterKeyDown(c,r)},ref_for:!0},s.ptm("gutterHandle")),null,16,vt)],16,ft)):C("",!0)],64)}),128))],16)}ht.render=mt;var gt={root:function(e){var t=e.instance;return["p-splitterpanel",{"p-splitterpanel-nested":t.isNested}]}},yt=ce.extend({name:"splitterpanel",classes:gt}),xt={name:"BaseSplitterPanel",extends:de,props:{size:{type:Number,default:null},minSize:{type:Number,default:null}},style:yt,provide:function(){return{$pcSplitterPanel:this,$parentInstance:this}}},bt={name:"SplitterPanel",extends:xt,inheritAttrs:!1,data:function(){return{nestedState:null}},computed:{isNested:function(){var e=this;return this.$slots.default().some(function(t){return e.nestedState=t.type.name==="Splitter"?!0:null,e.nestedState})},getPTOptions:function(){return{context:{nested:this.isNested}}}}};function wt(s,e,t,l,o,i){return h(),y("div",F({ref:"container",class:s.cx("root")},s.ptmi("root",i.getPTOptions)),[_e(s.$slots,"default")],16)}bt.render=wt;const St={class:"border flex justify-center items-center rounded mb-2 space-x-2"},zt={key:0,class:"material-icons"},_t={key:1,class:"material-icons"},Pt={class:"flex items-center gap-4 mb-8"},Lt={class:"flex justify-end gap-2"},Et=D({__name:"IdeButtons",setup(s){const e=ge(),t=ye(),{isProject:l,filePath:o,fileContent:i,fileTree:a}=ie(e),{openFile:r}=e;let u=null;G(()=>{l.value||(u=setInterval(()=>{localStorage.setItem("fileContent",i.value)},1e3))}),he(()=>{u&&clearInterval(u)});async function c(){const m=await Ce();if(m&&(await De(m,t.write,()=>{l.value&&(o.value="",i.value=""),a.value={name:"empty",path:"",children:[]}}),Ae(),t.clear(),l.value)){const g=await Re();r("/main.py",g),a.value=await Fe()}}function v(){E.value?(ke(),l.value&&(o.value="",i.value="",a.value={name:"empty",path:"",children:[]})):c()}const d=M(!1);function b(){Me(i.value)}function x(m){return/\.[^\/\\]+$/.test(m)?m:`${m}.py`}const f=M(!1);function w(m,g){m?Ie(m,g):f.value=!0}function z(){f.value=!1}function L(){const m=x(o.value);w(m,i.value),f.value=!1}return(m,g)=>{const $=X,xe=Qe,be=Pe;return h(),y("div",null,[U(p("div",St,[g[7]||(g[7]=p("p",null,"Updating",-1)),p("div",null,[S(n(Ze),{class:"w-7 h-7"})])],512),[[W,n(j)]]),p("div",null,[n(E)?(h(),P($,{key:0,id:"#run",type:"button",class:"w-9 h-9 mr-1",variant:n(O)||!n(E)?"outlined":void 0,severity:"info",rounded:"",onClick:b,disabled:n(O)||!n(E),loading:n(O)},{default:T(()=>g[8]||(g[8]=[p("span",{class:"material-icons"},"play_arrow",-1)])),_:1},8,["variant","disabled","loading"])):C("",!0),n(E)?(h(),P($,{key:1,type:"button",class:"w-9 h-9 mr-1",variant:!n(O)||!n(E)?"outlined":void 0,severity:"danger",rounded:"",onClick:g[0]||(g[0]=A=>n(Te)()),disabled:!n(O)||!n(E)},{default:T(()=>g[9]||(g[9]=[p("span",{class:"material-icons"},"stop",-1)])),_:1},8,["variant","disabled"])):C("",!0),n(E)?(h(),P($,{key:2,type:"button",class:"w-9 h-9",variant:"outlined",severity:"secondary",rounded:"",onClick:g[1]||(g[1]=A=>w(n(o),n(i))),disabled:n(Q)||n(Z)||n(j)||n(O)||!n(E),loading:n(Q)||n(Z)||n(j)},{default:T(()=>g[10]||(g[10]=[p("span",{class:"material-icons"},"save",-1)])),_:1},8,["disabled","loading"])):C("",!0),S($,{type:"button",class:I(["w-9 h-9 mr-1 text-white",n(E)?d.value?"bg-red-500":"bg-green-500":"bg-gray-600"]),rounded:"",text:"",onClick:g[2]||(g[2]=A=>v()),onMouseover:g[3]||(g[3]=A=>d.value=!0),onMouseleave:g[4]||(g[4]=A=>d.value=!1),loading:n(Q)||n(Z)||n(j)},{default:T(()=>[d.value&&n(E)?(h(),y("span",zt,"close")):(h(),y("span",_t,"cable"))]),_:1},8,["class","loading"])]),S(be,{visible:f.value,"onUpdate:visible":g[6]||(g[6]=A=>f.value=A),modal:"",header:"File Name",style:{width:"25rem"}},{default:T(()=>[p("div",Pt,[S(xe,{id:"filename",modelValue:n(o),"onUpdate:modelValue":g[5]||(g[5]=A=>fe(o)?o.value=A:null),class:"flex-auto",autocomplete:"off"},null,8,["modelValue"])]),p("div",Lt,[S($,{type:"button",label:"Cancel",severity:"secondary",onClick:z}),S($,{disabled:!n(o),type:"button",label:"Save",onClick:L},null,8,["disabled"])])]),_:1},8,["visible"])])}}}),$t={class:"relative flex h-full"},Tt={class:"absolute bottom-2 left-2"},kt={class:"material-icons"},Mt={class:"material-icons"},an=D({__name:"CodeView",props:{disabled:{type:Boolean,default:!1}},emits:["run","stop"],setup(s,{emit:e}){const t=Ue(),l=s,o=Y(),{isLoading:i,isStopping:a,isRunning:r,isConnected:u}=o,c=e;function v(){u.value?o.run():o.connect(),c("run")}function d(){o.stop(),c("stop")}const b=ge(),{fileContent:x}=ie(b);return(f,w)=>{const z=X;return h(),y("div",$t,[S(Be,F({modelValue:n(x),"onUpdate:modelValue":w[0]||(w[0]=L=>fe(x)?x.value=L:null)},n(t),{disabled:l.disabled}),null,16,["modelValue","disabled"]),w[1]||(w[1]=p("div",{id:"#editor",class:"absolute top-10 left-10"},null,-1)),p("div",Tt,[S(z,{id:"#run",type:"button",class:"w-9 h-9 mr-1",severity:"info",rounded:"",onClick:v,disabled:n(i)||n(r)},{default:T(()=>[p("span",kt,R(n(i)?"hourglass_top":"play_arrow"),1)]),_:1},8,["disabled"]),S(z,{type:"button",class:"w-9 h-9 mr-1",variant:n(r)?void 0:"outlined",severity:"danger",rounded:"",onClick:d,disabled:!n(r)||!n(u)},{default:T(()=>[p("span",Mt,R(n(a)?"hourglass_top":"stop"),1)]),_:1},8,["variant","disabled"])]),n(Oe)?(h(),P(Et,{key:0,class:"absolute bottom-2 right-2"})):C("",!0)])}}}),It={class:"flex flex-col h-full"},Ct={class:"flex px-2 w-full bg-zinc-900 text-white h-6 justify-between items-center"},Dt=D({__name:"TerminalView",setup(s){const e=M(!1),t=ye(),{output:l}=ie(t);function o(a){let r=a.key;if(r==="Enter")r=`
\r`;else if(r==="Backspace")r="\b";else if(r.length>1)return;Ne(r)}const i=M(null);return G(()=>{t.openTerminal(i.value)}),(a,r)=>{const u=X;return h(),y("div",It,[p("div",Ct,[r[4]||(r[4]=p("span",{class:"material-icons"},"terminal",-1)),S(u,{onClick:r[0]||(r[0]=c=>n(t).clear()),class:"w-4 h-4 text-white",link:""},{default:T(()=>r[3]||(r[3]=[p("span",{class:"material-icons",style:{"font-size":"16px"}},"cleaning_services",-1)])),_:1})]),p("pre",{class:"h-full font-mono overflow-auto p-2 text-white bg-black",ref_key:"el",ref:i,tabindex:"0",onKeydown:o,onFocus:r[1]||(r[1]=c=>e.value=!0),onBlur:r[2]||(r[2]=c=>e.value=!1)},[r[5]||(r[5]=re("")),p("span",null,R(n(l)),1),p("span",{class:I([{caret:e.value},"bg-white"])}," ",2),r[6]||(r[6]=re(`
    `))],544)])}}}),un=J(Dt,[["__scopeId","data-v-094662a6"]]),At=["width","height"],B=12,Rt=D({__name:"Display",setup(s){const e=M(112),t=M(160),l=M(null),o=M(null),i=M(0),a=Ge();a.text.value||(a.text.value="");function r(v){const d=v.deltaY>0?1:-1;i.value+=d*B,i.value=Math.max(0,i.value);const{lines:b,visibleLines:x}=u();i.value=Math.min(b.length*B,i.value),c(b,x)}function u(){const v=[];let d=0;return o.value&&a.text&&(String(a.text).split(`
`).forEach(x=>{let f="";x.split(" ").forEach(z=>{const L=f+z+" ";o.value.measureText(L).width>e.value?(v.push(f),f=z+" "):f=L}),v.push(f)}),d=Math.ceil(t.value/B)),{lines:v,visibleLines:d}}function c(v,d){if(o.value){o.value.fillStyle="#FFFFFF",o.value.fillRect(0,0,e.value,t.value),o.value.fillStyle=String(a.textColor)||"#000000",o.value.font="12px Monaco";const b=Math.floor(i.value/B);for(let x=0;x<d;x++){const f=b+x;if(f<v.length){const w=(x+1)*B-i.value%B;o.value.fillText(v[f],0,w)}}}}return Le(()=>[a.text,a.textColor],()=>{const{lines:v,visibleLines:d}=u();i.value=Math.max(0,(v.length-d)*B),c(v,d)}),G(async()=>{if(await Ee(),!!l.value&&(o.value=l.value.getContext("2d"),o.value)){o.value.fillStyle="#FFFFFF",o.value.fillRect(0,0,e.value,t.value);const{lines:v,visibleLines:d}=u();i.value=0,c(v,d)}}),(v,d)=>(h(),y("div",{class:"display-container",onWheel:r},[p("canvas",{ref_key:"canvas",ref:l,width:e.value,height:t.value,style:{border:"1px solid black",width:"112px",height:"160px"}},null,8,At)],32))}}),Ft=J(Rt,[["__scopeId","data-v-758d0b01"]]),ue=D({__name:"PinInfo",props:{pin:{},withPin:{},isLeft:{type:Boolean}},setup(s){return(e,t)=>(h(),y(k,null,[p("div",{class:I(["flex",e.isLeft?"flex-row":"flex-row-reverse"])},[p("div",{style:_({background:n(Ve)}),class:"text-center font-mono px-1 mr-1"},R(n(le)[e.pin.id].name),5),(h(!0),y(k,null,N(n(le)[e.pin.id].able,l=>(h(),y("div",{style:_({background:l.color}),class:"text-center font-mono px-1 mr-1"},R(l.name),5))),256))],2),p("div",{class:I(["flex my-1 mb-3",e.isLeft?"flex-row":"flex-row-reverse"])},[p("div",{style:_({background:`${n(Ke)[e.pin.mode]}`}),class:"text-center px-4 mr-1 rounded-lg"},R(n(je)[e.pin.mode]),5),p("div",{style:_(n(He)(e.pin,e.withPin)),class:"text-center px-4 mr-1 rounded-lg bg-black"},R(n(We)(e.pin,e.withPin)),5)],2)],64))}}),Bt=["id"],Ot=D({__name:"Slot",props:{slot:{},index:{}},setup(s){const{isOutside:e}=st(ve("theref")),t=Y(),{maxAreaIndex:l,fromSlotIndex:o,settings:i}=t,a=s.index<3;return(r,u)=>(h(),y(k,null,[p("div",{id:`slot-${r.slot.id}`,ref:"theref",class:I(["absolute w-20 h-20 rounded-lg text-center",[{"bg-green-200/[0.5]":n(l)==r.index,"bg-blue-200/[0.5]":n(o)==r.index},r.slot.class]]),style:_([r.slot.style,n(Xe)(r.slot)])},[!n(e)&&n(i).showPinInfo?(h(),y("div",{key:0,class:"absolute w-fit whitespace-nowrap text-white flex flex-col text-xs bg-black/70",style:_(a?"left:100%":"right:100%")},[S(ue,{pin:r.slot.pin2,withPin:r.slot.with.pin2,isLeft:a},null,8,["pin","withPin"]),S(ue,{pin:r.slot.pin3,withPin:r.slot.with.pin3,isLeft:a},null,8,["pin","withPin"])],4)):C("",!0)],14,Bt),n(e)?C("",!0):(h(),P(me,{key:0,to:"#pibody"}))],64))}}),Ut=["width","height"],Nt=["points","stroke"],ee=3,pe=14,H=10,Gt=D({__name:"Connector",props:{start:{},end:{},style:{}},setup(s){const e=Y(),t=s,l=q(()=>{const{start:u,end:c}=t,v=40,d=[{x:u.x,y:u.y}];return d.push({x:u.x,y:u.y-v}),d.push({x:(c.x+u.x)/2,y:u.y-v}),d.push({x:(c.x+u.x)/2,y:c.y-c.yOffset}),d.push({x:c.x,y:c.y-c.yOffset}),d.push({x:c.x,y:c.y}),d}),o=[{color:"orange",offset:-ee,end:-pe/2},{color:"red",offset:0,end:0},{color:"saddlebrown",offset:ee,end:pe/2}],i=q(()=>{const u=l.value,c=[];return o.forEach(v=>{const d=v.offset,b=v.end;let x="";for(let z=0;z<u.length-2;z++){const L=u[z];x+=`${L.x-a.value.x-d},${L.y-a.value.y-d} `}const f=u[u.length-2];x+=`${f.x-a.value.x+d},${f.y-a.value.y-d} `;const w=u[u.length-1];x+=`${w.x-a.value.x+b},${w.y-a.value.y+3} `,c.push({color:v.color,points:x})}),c}),a=q(()=>{const u=[],c=[];for(const f of l.value)u.push(f.x),c.push(f.y);const v=Math.min(...u)-H,d=Math.min(...c)-H,b=Math.max(...u)+H,x=Math.max(...c)+H;return{x:v,y:d,w:b-v,h:x-d}}),r=u=>{t.end.at!==e.pinNone&&e.moveConnectorEnd(t,u)};return(u,c)=>(h(),y(k,null,[p("div",{class:"absolute bg-black cursor-move",style:_([t.style,{left:t.end.x-12+"px",top:t.end.y+"px",width:t.end.w+"px",height:t.end.h+"px"}]),onPointerdown:[c[0]||(c[0]=ne(v=>v.preventDefault(),["prevent"])),r]},null,36),p("div",{class:"absolute pointer-events-none",style:_([t.style,n(Ye)(a.value)])},[(h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",width:a.value.w,height:a.value.h},[(h(!0),y(k,null,N(i.value,(v,d)=>(h(),y("polyline",{key:d,points:v.points,stroke:v.color,fill:"none","stroke-width":ee,"stroke-linejoin":"round","stroke-linecap":"round"},null,8,Nt))),128))],8,Ut))],4)],64))}}),Vt=J(Gt,[["__scopeId","data-v-7bde02f1"]]),Kt=D({__name:"Canvas",setup(s){const e=ve("canvasEl");return G(()=>{e.value&&(Je(e.value),requestAnimationFrame(qe))}),(t,l)=>(h(),y("canvas",{ref_key:"canvasEl",ref:e},null,512))}}),jt={id:"emulator",class:"h-full parent relative flex flex-col items-center border-t border-surface overflow-auto select-none"},Ht={id:"pibody",class:"relative h-[450px] flex-shrink-0 max-h-[calc(100%-100px)] overflow-x-hidden overflow-y-auto w-[450px]"},Wt={class:"absolute top-4 right-1 flex flex-col gap-1"},Xt={class:"material-icons"},Yt={id:"module-list",class:"relative h-full w-full"},Jt={class:"max-h-fit w-full overflow-auto flex flex-wrap gap-2 justify-center items-start mt-2",style:{"touch-action":"none",padding:"15px 0 15px 0"}},qt=D({__name:"SimulationView",setup(s){const e=Y(),{isConnected:t,toDelete:l,slots:o,moduleComponents:i,modules:a,isConnect8or9:r,chosenPin8or9:u,pin8:c,pin9:v,settings:d}=e;e.connect(),he(()=>{e.stop()});let b=[""];return $e(()=>{b=e.slotHasList(),e.clearSlots()}),G(()=>{e.putModuleList(b)}),(x,f)=>{const w=tt,z=X,L=et;return h(),y("div",jt,[p("div",Ht,[S(w,{src:n(nt),width:"384px",draggable:"false",class:"absolute pt-4 min-w-[384px]",style:{left:"32px",top:"0px"}},null,8,["src"]),S(Ft,{class:"absolute top-[217px] left-[168px] w-[112px] h-[160px]"}),p("div",Wt,[U((h(),P(z,{type:"button",class:I(["w-9 h-9 mr-1",n(d).showPinInfo?"bg-green-500":"bg-gray-500"]),rounded:"",onClick:f[0]||(f[0]=m=>n(e).setSettings({showPinInfo:!n(d).showPinInfo}))},{default:T(()=>[p("span",Xt,R((n(d).showPinInfo,"help_center")),1)]),_:1},8,["class"])),[[L,`Pin Information: ${n(d).showPinInfo?"On":"Off"}`,void 0,{left:!0}]]),U((h(),P(z,{type:"button",class:"w-9 h-9 mr-1 bg-gray-500",rounded:"",onClick:f[1]||(f[1]=m=>n(e).reset())},{default:T(()=>f[4]||(f[4]=[p("span",{class:"material-icons"},"restart_alt",-1)])),_:1})),[[L,"Reset pibody",void 0,{left:!0}]])]),(h(!0),y(k,null,N(n(o),(m,g)=>(h(),P(Ot,{slot:m,index:g},null,8,["slot","index"]))),256)),n(t)?(h(),y("div",{key:0,class:"absolute bg-black",style:_({left:n(e).usb.x+"px",top:n(e).usb.y-70+"px",width:n(e).usb.w+"px",height:n(e).usb.h+50+"px"})},null,4)):C("",!0),p("div",{class:"absolute",style:_({left:n(e).onLED.x+"px",top:n(e).onLED.y+"px",width:n(e).onLED.w+"px",height:n(e).onLED.h+"px"})},null,4),U(p("div",{class:"absolute flex items-center justify-center animate-bounce-up z-10 pointer-events-none",style:_({left:n(e).helpArrows[8].x+"px",top:n(e).helpArrows[8].y+"px"})},[p("span",{class:I(["icon-arrow-down text-5xl",[n(u)===n(c)?"text-green-500":"text-gray-500",n(e).helpArrows[8].class]]),style:_(n(e).helpArrows[8].style)},null,6),f[5]||(f[5]=p("span",{class:"absolute text-white font-bold -mt-2"},"8",-1))],4),[[W,n(e).helpArrows[8].visible||n(r)]]),U(p("div",{class:"absolute flex items-center justify-center animate-bounce-down z-10 pointer-events-none",style:_({left:n(v).x-10+"px",top:n(v).y+8+"px"})},[p("span",{class:I(["icon-arrow-up text-5xl",n(u)===n(v)?"text-green-500":"text-gray-500"]),style:_(n(e).helpArrows[9].style)},null,6),f[6]||(f[6]=p("span",{class:"absolute text-white font-bold -mt-2"},"9",-1))],4),[[W,n(e).helpArrows[9].visible||n(r)]]),S(Kt,{class:"absolute top-0 left-0 z-10 w-full h-full pointer-events-none"})]),p("div",Yt,[p("div",Jt,[(h(!0),y(k,null,N(n(i),m=>(h(),P(te(m.is),F({class:m.class,style:m.style,ref_for:!0},m,{onPointerdown:[g=>n(e).startDragFromModuleList(m,g),f[2]||(f[2]=ne(g=>g.preventDefault(),["prevent"]))],class:"flex-none w-20 h-20 cursor-move"}),null,16,["class","style","onPointerdown"]))),256))]),U(p("div",{class:I(["absolute top-0 left-0 h-full w-full",{"bg-red-500/[0.8]":n(l)}])},f[7]||(f[7]=[p("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},[p("span",{class:"material-icons",style:{"font-size":"100px"}},"delete")],-1)]),2),[[W,n(l)]])]),(h(!0),y(k,null,N(n(a),(m,g)=>(h(),P(me,{defer:"",to:m.dragging?"#emulator":"#pibody",key:m.id},[m.putOn8or9?(h(),P(Vt,F({key:0,ref_for:!0},m.connector),null,16)):C("",!0),(h(),P(te(m.is),F({class:m.class,style:[m.style,{left:m.x+"px",top:m.y+"px"}],ref_for:!0},m,{onPointerdown:[$=>n(e).startDragFromSlot(m,g,m.on,$),f[3]||(f[3]=ne($=>$.preventDefault(),["prevent"]))],class:"absolute w-20 h-20 rounded-xl cursor-move",style:{"touch-action":"none"}}),null,16,["class","style","onPointerdown"]))],8,["to"]))),128))])}}}),pn=J(qt,[["__scopeId","data-v-e41e3d50"]]);export{pn as S,un as T,an as _,ht as a,bt as s};
