import{s as G}from"./index-B8BKAoaq.js";import{s as J,a as K,b as O,c as Q}from"./index-BWvHGVVu.js";import{s as U}from"./index-DKSXtuQr.js";import{s as W}from"./index-BK3SZ35v.js";import{s as X}from"./index-scisPgfR.js";import{d as I,r as g,m as T,o as a,f as u,c as h,F as B,i as F,P as Z,j as C,k as V,s as q,u as ee,A as te,p as se,w as i,t as o,b as c,e as s,g as w,h as ae,n as oe}from"./index-DTnuYjp0.js";import{s as D}from"./index-ayxY1mEP.js";import{T as $}from"./teacherApi-dDsdsD_Z.js";import{T as ne}from"./index-CUUP1TJQ.js";import"./index-w0PRQ70c.js";import"./index-ZfuqqY-H.js";import"./index-BbbGb17v.js";import"./index-Dwd441mc.js";import"./index-0pkJ3brC.js";import"./index-Cn1av5Rm.js";const le={key:1,class:"flex flex-wrap gap-2"},re=I({__name:"ProjectDetails",props:{id:{},projectId:{}},setup(A){const _=A,b=V(),f=g(null),m=g(!1);async function d(){if(!m.value){m.value=!0;try{const{data:t}=await $.getStudentProjectSteps(_.id,_.projectId);f.value=t??null}catch(t){console.log(t)}finally{m.value=!1}}}T(d);function n(t,p){if(t!="completed")return t=="attempted"?"warn":(t=="started","secondary")}function y(t,p){if(t!="completed")return t=="attempted"||t=="started"?"outlined":void 0}function v(t,p){switch(t){case"article":return"pi pi-align-left";case"code":return p?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}return(t,p)=>{var e;const k=D,S=q,j=ne;return m.value?(a(),u(k,{key:0,class:"flex justify-center"})):(a(),h("div",le,[(a(!0),h(B,null,F((e=f.value)==null?void 0:e.steps,r=>Z((a(),u(S,{key:r.id,icon:v(r.step_type,r.skip_submit),rounded:"",severity:n(r.status),variant:y(r.status),class:"h-8 min-w-8 w-8",onClick:p[0]||(p[0]=P=>C(b).push({name:"project",params:{id:_.projectId}}))},null,8,["icon","severity","variant"])),[[j,{value:r.id.toString()},void 0,{top:!0}]])),128))]))}}}),ie={key:1},ce={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},ue={class:"w-full flex justify-between items-center"},de={class:"flex gap-4"},pe={class:"flex flex-col gap-2"},fe={class:"pl-1 text-3xl"},me={class:"pl-1 text-sm"},_e={class:"flex flex-col items-end"},ve={class:"text-xl"},ge={class:"text-3xl"},he={key:1,class:"flex flex-col gap-2 w-full"},ye={class:"text-gray-500 text-xl"},xe={class:"w-24 h-16 rounded-lg overflow-hidden"},we=["src"],$e={class:"flex flex-col gap-2 pl-4 w-56 items-start"},be={class:"text-lg"},ke={class:"flex gap-1"},Se={class:"flex-grow mr-2"},He=I({__name:"StudentView",setup(A){const _=ee(),b=te(),f=oe(),m=V(),{t:d}=se(),n=g(null),y=g([]),v=g(!1),t=g(!1);async function p(){if(!v.value){v.value=!0;try{const{data:e}=await $.getStudent(Number(f.params.id));n.value=e??null}catch(e){console.log(e)}finally{v.value=!1}}}async function k(){if(!t.value){t.value=!0;try{const{data:e}=await $.getStudentProjects(Number(f.params.id));y.value=e??[]}catch(e){console.log(e)}finally{t.value=!1}}}T(()=>{p(),k()});function S(){b.require({message:d("pages.teacher.areYouSureExpelStudent"),header:d("pages.teacher.confirmation"),icon:"pi pi-exclamation-triangle",rejectProps:{label:d("pages.teacher.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:d("pages.teacher.expel"),severity:"danger"},accept:()=>{j()}})}async function j(){try{await $.expelStudentFromClass(Number(f.params.id)),m.go(-1),_.add({severity:"success",summary:d("pages.teacher.studentRemoved"),life:2e3})}catch(e){_.add({severity:"error",summary:d("pages.teacher.removeStudentFailed"),detail:e,life:2e3})}}return(e,r)=>{const P=D,N=q,E=X,x=W,R=U,z=J,H=K,L=O,M=Q,Y=G;return a(),u(Y,{class:"flex-grow flex flex-col gap-2"},{default:i(()=>[v.value?(a(),u(P,{key:0,class:"flex justify-center"})):n.value?(a(),h("div",ce,[c(N,{label:e.$t("pages.teacher.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:r[0]||(r[0]=l=>C(m).go(-1))},null,8,["label"]),s("div",ue,[s("div",de,[c(E,{image:n.value.small_avatar_url.length>0?n.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),s("div",pe,[s("div",fe,o(n.value.name),1),s("div",me,o(e.$t("pages.teacher.since"))+" "+o(n.value.created_time.split("T")[0]),1),c(x,{class:"ml-1 w-fit"},{default:i(()=>[w(o(n.value.access_type),1)]),_:1})])]),s("div",_e,[s("div",ve,o(n.value.class_name),1),s("div",ge,o(n.value.xp)+" "+o(e.$t("pages.teacher.xp")),1)])]),t.value?(a(),u(P,{key:0,class:"flex justify-center"})):(a(),h("div",he,[s("div",ye,o(e.$t("pages.teacher.projects"))+":",1),c(M,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0},{default:i(()=>[(a(!0),h(B,null,F(y.value,l=>(a(),u(L,{key:l.id,value:l.id},{default:i(()=>[c(z,{class:"flex gap-2 items-center rounded-lg"},{default:i(()=>[s("div",xe,[s("img",{src:l.source_url,class:"w-full h-full object-cover"},null,8,we)]),s("div",$e,[s("div",be,o(l.id),1),s("div",ke,[l.layer>0?(a(),u(x,{key:0,severity:"warn"},{default:i(()=>[w(o(e.$t("pages.teacher.level"))+" - "+o(l.layer),1)]),_:2},1024)):ae("",!0),l.is_guidable?(a(),u(x,{key:1},{default:i(()=>[w(o(e.$t("pages.projects.learn")),1)]),_:1})):(a(),u(x,{key:2,severity:"info"},{default:i(()=>[w(o(e.$t("pages.projects.practice")),1)]),_:1}))])]),s("div",Se,[c(R,{value:l.student_progress,pt:{root:{class:"bg-gray-200"},value:{class:"bg-cyan-500"}}},null,8,["value"])])]),_:2},1024),c(H,null,{default:i(()=>[c(re,{id:Number(C(f).params.id),"project-id":Number(l.id)},null,8,["id","project-id"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])),c(N,{label:e.$t("pages.teacher.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:S},null,8,["label"])])):(a(),h("div",ie,o(e.$t("pages.teacher.noStudentFound")),1))]),_:1})}}});export{He as default};
