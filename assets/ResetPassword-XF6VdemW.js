import{h as j,z as d,s as L}from"./index-BiNA2n31.js";import{s as N}from"./index-BE3N1hIV.js";import{s as R}from"./index-UGns2RAB.js";import{s as S}from"./index-7iI5GcAi.js";import{d as T,u as q,r as x,o,c as i,b as a,e as s,j as k,w as n,t as m,f as M,F as u,i as $,h as P,n as A,k as D,s as E}from"./index-CbeY2LTE.js";import{_ as Z}from"./AuthHeader.vue_vue_type_script_setup_true_lang-DrV4-lbB.js";import{a as G}from"./index-C8kuHmDy.js";import"./index-d49K2imb.js";import"./index-BZp1jHCN.js";import"./logo-696IDFK-.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BEPNjsy-.js";import"./index-DodnuFeH.js";import"./index-D0AiXIN_.js";import"./index-C7nsC40x.js";import"./index-DIQ4u2n9.js";const H={class:"card flex flex-col items-center pt-4"},I={class:"flex flex-1 items-center justify-center my-4"},J={class:"text-4xl font-semibold px-2 mr-4"},K={class:"flex flex-col gap-1"},O={for:"password"},Q={class:"my-0 flex flex-col gap-1"},U={class:"flex flex-col gap-1"},W={for:"confirm_password"},X={class:"my-0 flex flex-col gap-1"},_e=T({__name:"ResetPassword",setup(Y){const f=q(),V=A(),_=D(),r=x(!1),z=x({password:""}),B=j(d.object({password:d.string().min(8,{message:"Minimum 8 characters."}).max(100,{message:"Maximum 100 characters."}).refine(e=>/[a-z]/.test(e),{message:"Must have a lowercase letter."}).refine(e=>/[A-Z]/.test(e),{message:"Must have an uppercase letter."}).refine(e=>/[0-9]/.test(e),{message:"Must have a number."}),confirm_password:d.string()}).refine(e=>e.password===e.confirm_password,{message:"Passwords must match",path:["confirm_password"]})),F=async e=>{if(!r.value&&e.valid){r.value=!0;try{const{data:t}=await G.resetPassword(V.query.token,e.states.password.value);_.replace({name:"login"}),f.add({severity:"success",summary:t.message,life:3e3})}catch(t){f.add({severity:"error",summary:t.response.data.error,life:3e3})}finally{r.value=!1}}};return(e,t)=>{const g=E,w=S,v=R,y=N,C=L;return o(),i(u,null,[a(Z),s("div",H,[a(g,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:t[0]||(t[0]=l=>k(_).replace({name:"login"}))},null,8,["label"]),a(C,{initialValues:z.value,resolver:k(B),onSubmit:F,class:"flex flex-col gap-4 w-full sm:w-80 sm:px-0 px-8"},{default:n(l=>{var b,h;return[s("div",I,[s("p",J,m(e.$t("pages.login.newPassword")),1)]),s("div",K,[a(v,{variant:"on"},{default:n(()=>[a(w,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),s("label",O,m(e.$t("pages.login.newPassword")),1)]),_:1}),(b=l.password)!=null&&b.invalid?(o(),M(y,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[s("ul",Q,[(o(!0),i(u,null,$(l.password.errors,(c,p)=>(o(),i("li",{key:p},m(c.message),1))),128))])]),_:2},1024)):P("",!0)]),s("div",U,[a(v,{variant:"on"},{default:n(()=>[a(w,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),s("label",W,m(e.$t("pages.login.confirmPassword")),1)]),_:1}),(h=l.confirm_password)!=null&&h.invalid?(o(),M(y,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[s("ul",X,[(o(!0),i(u,null,$(l.confirm_password.errors,(c,p)=>(o(),i("li",{key:p},m(c.message),1))),128))])]),_:2},1024)):P("",!0)]),a(g,{type:"submit",label:e.$t("pages.login.save"),loading:r.value,disabled:r.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{_e as default};
