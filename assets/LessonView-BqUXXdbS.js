import{s as F,S as H,_ as O,T as X,a as G}from"./SimulationView-yjkGzYhz.js";import{ap as J,e as w,ac as z,ao as I,ag as K,aq as P,ae as Q,an as B,o as V,w as D,D as s,E as h,I as g,T as n,af as t,V as r,a4 as N,aa as U,ai as T,c as W,X as x,_ as y,al as Y}from"./index-DQ09DRTx.js";import{s as Z}from"./index-B4CW8PyX.js";import{s as ee,a as te,t as se}from"./types-BJZksKjt.js";import{L as ne,a as ae}from"./logo-6aUMIinI.js";import{_ as oe}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-CKk1Uz2r.js";import{a as le,t as ie,_ as re,b as ce,M as ue,c as pe,d as fe}from"./QuestionStep.vue_vue_type_script_setup_true_lang-DScBrhQW.js";import"./_plugin-vue_export-helper-CnJYPT4v.js";import"./pibody-B70zHXNr.js";import"./http-D0lPt2Q8.js";import"./index-CIId-dDd.js";const j=J("useLessonStore",()=>{const p=w(null),o=w(null);function l(e){e!=null&&(p.value=e,o.value=0)}function a(e){p.value!=null&&(p.value.steps=e)}function f(e){p.value!=null&&(o.value=e)}return{lesson:p,stepIndex:o,setLesson:l,setSteps:a,changeStep:f}}),me={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},_e={class:"flex flex-1 items-center"},de={key:1,class:"flex items-center gap-1"},ve={class:"flex items-center gap-1"},ye={class:"flex flex-1 justify-end items-center gap-2"},ge=z({__name:"LessonHeader",setup(p){const{locale:o}=I(),l=K(),a=P(),f=Q(),e=j(),{lesson:d,stepIndex:c}=B(e),{changeStep:m,setSteps:_}=e,i=w(!1);function q(u){switch(u){case"article":return"pi pi-align-left";case"code":return"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function L(){if(!i.value){i.value=!0;try{const{data:u}=await le.getProjectStepsByID(a.params.id.toString()),v=[];for(const k of u){const S=await ie(k,o.value,!1);v.push(S)}_(v)}catch(u){alert(u)}finally{i.value=!1}}}V(L),D(o,L,{immediate:!0});const C=w(),M=w([{label:"Profile",icon:"pi pi-user"},{label:"Log out",icon:"pi pi-sign-out",command:()=>{f.logout(),l.replace({name:"login"})}}]),R=u=>{C.value.toggle(u)};return(u,v)=>{const k=ae,S=T,E=ee,A=Z;return s(),h("div",me,[g("div",_e,[n(k,{src:t(ne),width:"32"},null,8,["src"]),v[1]||(v[1]=g("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),n(S,{id:"#projects",icon:"pi pi-angle-left",label:u.$t("projects"),severity:"secondary",variant:"text",onClick:v[0]||(v[0]=$=>t(l).push({name:"projects"})),size:"small"},null,8,["label"])]),i.value||t(d)==null?(s(),r(E,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(s(),h("div",de,[g("div",ve,[(s(!0),h(N,null,U(t(d).steps,($,b)=>(s(),r(S,{key:$.id,icon:q($.type),rounded:"",severity:t(c)==b?void 0:"secondary",variant:t(c)==b?void 0:"outlined",onClick:ze=>t(m)(b),class:"h-8 w-8"},null,8,["icon","severity","variant","onClick"]))),128))])])),g("div",ye,[n(oe),n(S,{type:"button",icon:"pi pi-ellipsis-v",onClick:R,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",variant:"outlined",severity:"secondary",class:"border border-slate-300 bg-slate-50",style:{width:"34px"}}),n(A,{ref_key:"menu",ref:C,id:"overlay_menu",model:M.value,popup:!0},null,8,["model"])])])}}}),he={class:"flex flex-col p-4 gap-4 overflow-scroll h-full justify-between bg-white"},xe={key:0},we={key:1,class:"flex"},Se=z({__name:"LessonDiv",setup(p){const o=j(),{lesson:l,stepIndex:a}=B(o),{changeStep:f}=o,e=W(()=>{var m;return a.value==null?null:((m=l.value)==null?void 0:m.steps[a.value])??null});async function d(){a.value!=null&&f(a.value-1)}async function c(){a.value!=null&&f(a.value+1)}return(m,_)=>{const i=T;return s(),h("div",he,[e.value?(s(),h("div",xe,[e.value.type=="article"?(s(),r(t(re),{key:0,step:e.value},null,8,["step"])):e.value.type=="code"?(s(),r(t(ce),{key:1,step:e.value},null,8,["step"])):e.value.type=="matching"?(s(),r(t(ue),{key:2,step:e.value},null,8,["step"])):e.value.type=="open"?(s(),r(t(pe),{key:3,step:e.value},null,8,["step"])):e.value.type=="question"?(s(),r(t(fe),{key:4,step:e.value},null,8,["step"])):x("",!0)])):x("",!0),t(l)!=null&&t(l).steps!=null&&t(l).steps.length>0&&e.value?(s(),h("div",we,[t(a)!==0?(s(),r(i,{key:0,label:"Previous",icon:"pi pi-angle-left",size:"small",onClick:d})):x("",!0),t(a)<t(l).steps.length-1?(s(),r(i,{key:1,label:"Next",icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:c})):x("",!0)])):x("",!0)])}}}),ke={class:"flex bg-surface-0",style:{height:"calc(100vh - 52px)"}},$e={class:"flex justify-center h-full"},be={class:"max-w-[400px] w-full"},Me=z({__name:"LessonView",setup(p){const{locale:o}=I(),l=P(),a=j(),{setLesson:f}=a,e=w(!1);async function d(){if(!e.value){e.value=!0;try{const{data:c}=await te.getProjectByID(l.params.id.toString()),m=await se(c,o.value);f(m)}catch(c){alert(c)}finally{e.value=!1}}}return V(d),D(o,d),(c,m)=>{const _=G,i=F;return s(),h(N,null,[n(ge),g("div",ke,[n(i,{class:"w-full rounded-none"},{default:y(()=>[n(_,{size:50,minSize:10,class:"max-w-[467px] w-full"},{default:y(()=>[n(H)]),_:1}),n(_,{size:50,minSize:10},{default:y(()=>[n(i,{layout:"vertical",class:"h-full w-full"},{default:y(()=>[n(_,{size:65,minSize:10},{default:y(()=>[n(O)]),_:1}),n(_,{size:35,minSize:10},{default:y(()=>[n(X)]),_:1})]),_:1})]),_:1}),n(_,{size:30,minSize:10,class:Y(["max-w-md mx-auto",{"animate-fadeinright animate-once animate-duration-1000 animate-ease-in-out":!0}])},{default:y(()=>[g("div",$e,[g("div",be,[e.value?x("",!0):(s(),r(Se,{key:0}))])])]),_:1})]),_:1})])],64)}}});export{Me as default};
