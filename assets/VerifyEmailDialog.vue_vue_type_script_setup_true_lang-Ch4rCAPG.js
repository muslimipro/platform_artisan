import{d as S,ap as w,p as B,u as T,a as x,C as N,r as m,q as A,o as v,f,w as o,e as i,b as d,j as p,g as D,t as g,h as M,k as R,v as j,s as q,_ as U}from"./index-CFTsbYyj.js";import{s as H}from"./index-ShhDbwX4.js";import{S as L}from"./index-ClYofCuR.js";const Y={class:"text-blue-500"},z={class:"flex flex-col gap-1"},F={class:"flex gap-1 justify-end"},O=S({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(y){const n=w(y,"modelValue"),_=R(),{locale:b}=B(),u=T(),V=x(),{user:$}=N(V),l=m(!1),a=m(0);let r;const h=()=>{a.value=60,r=setInterval(()=>{a.value>0?a.value--:clearInterval(r)},1e3)};async function E(){l.value=!0;try{await L.sendVerificationEmail(b.value),u.add({severity:"success",summary:"Verification email sent!",life:2e3}),h()}catch(e){console.log(e),u.add({severity:"error",summary:"Email is invalid!",detail:e,life:2e3})}finally{l.value=!1}}return A(()=>{clearInterval(r)}),(e,t)=>{const k=j("i18n-t"),c=q,C=H,I=U;return v(),f(I,{visible:n.value,"onUpdate:visible":t[1]||(t[1]=s=>n.value=s),modal:"",draggable:!1,class:"m-4 max-w-md",header:e.$t("dialog.verifyYourEmail")},{footer:o(()=>[i("div",z,[i("div",F,[d(c,{label:e.$t("dialog.changeEmail"),severity:"secondary",onClick:t[0]||(t[0]=s=>{p(_).replace({path:"/settings/change-email"}),n.value=!1})},null,8,["label"]),d(c,{label:a.value>0?`${e.$t("pages.login.resendIn")} ${a.value}s`:e.$t("dialog.sendVerificationEmail"),onClick:E,loading:l.value,disabled:l.value||a.value>0},null,8,["label","loading","disabled"])]),a.value>0?(v(),f(C,{key:0,severity:"success"},{default:o(()=>[D(g(e.$t("pages.settings.weHaveSentLinkToVerifyEmail")),1)]),_:1})):M("",!0)])]),default:o(()=>[i("div",null,[d(k,{keypath:"dialog.confirmEmailAddress"},{email:o(()=>{var s;return[i("span",Y,g((s=p($))==null?void 0:s.email),1)]}),_:1})])]),_:1},8,["visible","header"])}}});export{O as _};
