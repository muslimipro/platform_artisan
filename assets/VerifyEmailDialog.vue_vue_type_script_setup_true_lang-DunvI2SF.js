import{a as C,M as I,u as w,Q as B,s as T,r as m,S as x,b as v,k as f,w as o,h as i,f as d,g as p,i as M,t as g,l as N,p as A,I as D,q as R,v as q}from"./index-DDfugreB.js";import{s as U}from"./index-BTtfS2vU.js";import{S as j}from"./index-jSrR3wwV.js";const H={class:"text-blue-500"},L={class:"flex flex-col gap-1"},Q={class:"flex gap-1 justify-end"},G=C({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(y){const n=I(y,"modelValue"),_=A(),u=w(),b=B(),{user:V}=T(b),t=m(!1),a=m(0);let r;const $=()=>{a.value=60,r=setInterval(()=>{a.value>0?a.value--:clearInterval(r)},1e3)};async function h(){t.value=!0;try{const{data:e}=await j.sendVerificationEmail();u.add({severity:"success",summary:e.message,life:2e3}),$()}catch(e){u.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}finally{t.value=!1}}return x(()=>{clearInterval(r)}),(e,l)=>{const k=D("i18n-t"),c=R,E=U,S=q;return v(),f(S,{visible:n.value,"onUpdate:visible":l[1]||(l[1]=s=>n.value=s),modal:"",draggable:!1,class:"m-4 max-w-md",header:e.$t("dialog.verifyYourEmail")},{footer:o(()=>[i("div",L,[i("div",Q,[d(c,{label:e.$t("dialog.changeEmail"),severity:"secondary",onClick:l[0]||(l[0]=s=>{p(_).replace({path:"/settings/change-email"}),n.value=!1})},null,8,["label"]),d(c,{label:a.value>0?`${e.$t("pages.login.resendIn")} ${a.value}s`:e.$t("dialog.sendVerificationEmail"),onClick:h,loading:t.value,disabled:t.value||a.value>0},null,8,["label","loading","disabled"])]),a.value>0?(v(),f(E,{key:0,severity:"success"},{default:o(()=>[M(g(e.$t("pages.settings.weHaveSentLinkToVerifyEmail")),1)]),_:1})):N("",!0)])]),default:o(()=>[i("div",null,[d(k,{keypath:"dialog.confirmEmailAddress"},{email:o(()=>{var s;return[i("span",H,g((s=p(V))==null?void 0:s.email),1)]}),_:1})])]),_:1},8,["visible","header"])}}});export{G as _};
