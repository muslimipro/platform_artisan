import{as as F,r as a,I as G}from"./index-Bys-p59Q.js";const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function J(e,n=0){return(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase()}let h;const K=new Uint8Array(16);function M(){if(!h){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");h=crypto.getRandomValues.bind(crypto)}return h(K)}const Q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f={randomUUID:Q};function p(e,n,i){var v;if(f.randomUUID&&!n&&!e)return f.randomUUID();e=e||{};const s=e.random??((v=e.rng)==null?void 0:v.call(e))??M();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,J(s)}const X=F("useEditorStore",()=>{const e=a(null),n=a(null),i=a(null),s=a(null),v=a(null),o=a(null),c=a(!1),d=a(!1),g=G(()=>c.value||d.value);function m(l){e.value=l}function y(l){c.value=l}function x(l){d.value=l}function S(l){l!=null&&(e.value=l)}function U(l){e.value!=null&&(e.value.steps=l,c.value=!1,d.value=!1)}function I(l){e.value==null||n.value==null||(e.value.steps[n.value].title=l.title,e.value.steps[n.value].inner=l.inner)}function b(l,t){e.value!=null&&(e.value.steps.push({id:t.id,title:t.title,type:l,progress:"nothing",inner:{contents:[],modules:[]},answer:{open:"",question:[]},state:{code:"",stdout:"",slots:[]},access_type:"freemium",accessibility:!0,skip_submit:!1}),n.value=e.value.steps.length-1)}function w(l){e.value==null||n.value==null||(e.value.steps[n.value].inner.contents.push({id:p(),type:l,text:l=="text"?"":void 0,src:void 0}),i.value=e.value.steps[n.value].inner.contents.length-1)}function A(l,t,r){e.value==null||n.value==null||(i.value=r,(e.value.steps[n.value].inner.contents[i.value].type=="text"&&l!=null||e.value.steps[n.value].inner.contents[i.value].type=="video"&&l!=null)&&(e.value.steps[n.value].inner.contents[i.value].text=l))}function C(l){e.value==null||n.value==null||e.value.steps[n.value].inner.contents.splice(l,1)}function D(l){if(e.value==null)return;n.value=l;const t=e.value.steps[n.value].inner.contents.length;i.value=t>0?t-1:null}function R(){e.value==null||n.value==null||(e.value.steps[n.value].inner.options==null&&(e.value.steps[n.value].inner.options=[]),e.value.steps[n.value].inner.options.push({id:p(),text:"",correct:!1}),s.value=e.value.steps[n.value].inner.options.length-1)}function E(l,t,r){e.value==null||n.value==null||e.value.steps[n.value].inner.options!=null&&(s.value=r,e.value.steps[n.value].inner.options[s.value].text=l,e.value.steps[n.value].inner.options[s.value].correct=t)}function H(l){e.value==null||n.value==null||e.value.steps[n.value].inner.options!=null&&(e.value.steps[n.value].inner.options.splice(l,1),e.value.steps[n.value].inner.options.length==0&&(e.value.steps[n.value].inner.options=void 0))}function P(){e.value==null||n.value==null||(e.value.steps[n.value].inner.pairs==null&&(e.value.steps[n.value].inner.pairs=[]),e.value.steps[n.value].inner.pairs.push({id:p(),key:"",value:""}),v.value=e.value.steps[n.value].inner.pairs.length-1)}function T(l,t,r){e.value==null||n.value==null||e.value.steps[n.value].inner.pairs!=null&&(v.value=r,e.value.steps[n.value].inner.pairs[v.value].key=l,e.value.steps[n.value].inner.pairs[v.value].value=t)}function V(l){e.value==null||n.value==null||e.value.steps[n.value].inner.pairs!=null&&(e.value.steps[n.value].inner.pairs.splice(l,1),e.value.steps[n.value].inner.pairs.length==0&&(e.value.steps[n.value].inner.pairs=void 0))}function k(l){e.value==null||n.value==null||(e.value.steps[n.value].inner.userActions=l??void 0)}function L(l){e.value==null||n.value==null||(e.value.steps[n.value].inner.platformActions=l??void 0)}function O(){e.value==null||n.value==null||(e.value.steps[n.value].inner.highlights==null&&(e.value.steps[n.value].inner.highlights=[]),e.value.steps[n.value].inner.highlights.push({id:p(),module:null,slot:null}),o.value=e.value.steps[n.value].inner.highlights.length-1)}function _(l,t,r){e.value==null||n.value==null||e.value.steps[n.value].inner.highlights!=null&&(o.value=r,e.value.steps[n.value].inner.highlights[o.value].module=l,e.value.steps[n.value].inner.highlights[o.value].slot=t)}function j(l){e.value==null||n.value==null||e.value.steps[n.value].inner.highlights!=null&&(e.value.steps[n.value].inner.highlights.splice(l,1),e.value.steps[n.value].inner.highlights.length==0&&(e.value.steps[n.value].inner.highlights=void 0))}function q(){e.value==null||n.value==null||e.value.steps.splice(n.value,1)}function N(){console.log("add test Not implemented")}function z(l,t){e.value==null||n.value==null||e.value.steps[n.value].inner.tests!=null&&(e.value.steps[n.value].inner.tests[t]=l)}function B(l){e.value==null||n.value==null||e.value.steps[n.value].inner.tests!=null&&e.value.steps[n.value].inner.tests.splice(l,1)}return{lesson:e,stepIndex:n,contentIndex:i,optionIndex:s,saving:g,addLesson:m,setLesson:S,setSteps:U,setStep:I,addStep:b,changeStep:D,addContent:w,saveContent:A,removeContent:C,addOption:R,saveOption:E,removeOption:H,addPair:P,savePair:T,removePair:V,saveUserActions:k,savePlatformActions:L,addHighlight:O,saveHighlight:_,removeHighlight:j,removeStep:q,setCardSaving:y,setStepSaving:x,addTest:N,saveTest:z,removeTest:B}});export{X as u};
