import{z as U,a as l,_ as q,b as E,s as L,c as D}from"./index-djeMZlGL.js";import{d as H,h as x,m as I,f as Z,g as G,o as i,c,b as a,a as s,w as r,t as o,i as d,j as B,k as p,F as y,l as F,u as N,e as J,s as K}from"./index-n1Xztw0R.js";import{s as O}from"./index-Bt_EFY2Y.js";import{s as Q}from"./index-NIdWgwxb.js";import{s as W}from"./index-B07j7YSM.js";import"./logo-g4nvLdvL.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-D7yZtGHa.js";import"./http-CZW5UW2E.js";const X={class:"card flex flex-col items-center pt-4"},Y={class:"flex flex-1 items-center justify-center my-4"},ee={class:"text-4xl font-semibold px-2 mr-4"},se={class:"flex flex-col gap-1"},ae={class:"flex gap-2"},te={for:"name"},re={for:"surname"},oe={class:"flex flex-col gap-1"},ie={for:"email"},ne={class:"flex flex-col gap-1"},le={for:"password"},me={class:"my-0 flex flex-col gap-1"},ce={class:"flex flex-col gap-1"},ue={for:"confirm_password"},de={class:"my-0 flex flex-col gap-1"},be=H({__name:"RegisterPage",setup(pe){const C=x([]),f=x(!1);I(async()=>{const e=await fetch("src/assets/countries.json");C.value=await e.json()});const h=Z(),w=J(),b=G(),P=x({name:"",surname:"",email:"",password:"",city:""}),T=U(l.object({name:l.string().min(1,{message:"Name "}).max(100,{message:"Maximum 100 characters."}),surname:l.string().min(1,{message:"Surname "}).max(100,{message:"Maximum 100 characters."}),email:l.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:l.string().min(8,{message:"Minimum 8 characters."}).max(100,{message:"Maximum 100 characters."}).refine(e=>/[a-z]/.test(e),{message:"Must have a lowercase letter."}).refine(e=>/[A-Z]/.test(e),{message:"Must have an uppercase letter."}).refine(e=>/[0-9]/.test(e),{message:"Must have a number."}),confirm_password:l.string()}).refine(e=>e.password===e.confirm_password,{message:"Passwords must match",path:["confirm_password"]})),A=async e=>{if(!f.value&&e.valid){f.value=!0;try{const{data:n}=await E.signUp(e.states.name.value,e.states.surname.value,e.states.email.value,e.states.password.value);b.setToken(n),b.setUser(n),w.push({name:"projects"}),h.add({severity:"success",summary:"Success",life:3e3})}catch(n){h.add({severity:"error",summary:n.toString(),life:3e3})}finally{f.value=!1}}};return(e,n)=>{const _=W,m=Q,u=O,k=L,M=K,R=D;return i(),c(y,null,[a(q),s("div",X,[a(R,{initialValues:P.value,resolver:N(T),onSubmit:A,class:"flex flex-col gap-4 w-full sm:w-80 sm:px-0 px-8"},{default:r(t=>{var z,S,V,j,$;return[s("div",Y,[s("p",ee,o(e.$t("registration")),1)]),s("div",se,[s("div",ae,[a(m,{variant:"on"},{default:r(()=>[a(_,{id:"name",name:"name",type:"text",fluid:""}),s("label",te,o(e.$t("name")),1)]),_:1}),a(m,{variant:"on"},{default:r(()=>[a(_,{id:"surname",name:"surname",type:"text",fluid:""}),s("label",re,o(e.$t("surname")),1)]),_:1})]),(z=t.name)!=null&&z.invalid||(S=t.surname)!=null&&S.invalid?(i(),d(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[B(o(t.name.error.message+t.surname.error.message+"is required."),1)]),_:2},1024)):p("",!0)]),s("div",oe,[a(m,{variant:"on"},{default:r(()=>[a(_,{id:"email",name:"email",type:"text",fluid:""}),s("label",ie,o(e.$t("email")),1)]),_:1}),(V=t.email)!=null&&V.invalid?(i(),d(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[B(o(t.email.error.message),1)]),_:2},1024)):p("",!0)]),s("div",ne,[a(m,{variant:"on"},{default:r(()=>[a(k,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),s("label",le,o(e.$t("password")),1)]),_:1}),(j=t.password)!=null&&j.invalid?(i(),d(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[s("ul",me,[(i(!0),c(y,null,F(t.password.errors,(v,g)=>(i(),c("li",{key:g},o(v.message),1))),128))])]),_:2},1024)):p("",!0)]),s("div",ce,[a(m,{variant:"on"},{default:r(()=>[a(k,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),s("label",ue,o(e.$t("confirmPassword")),1)]),_:1}),($=t.confirm_password)!=null&&$.invalid?(i(),d(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[s("ul",de,[(i(!0),c(y,null,F(t.confirm_password.errors,(v,g)=>(i(),c("li",{key:g},o(v.message),1))),128))])]),_:2},1024)):p("",!0)]),a(M,{type:"submit",label:e.$t("signUp")},null,8,["label"])]}),_:1},8,["initialValues","resolver"]),a(M,{severity:"secondary",variant:"link",label:e.$t("alreadyHaveAnAccount"),onClick:n[0]||(n[0]=t=>N(w).push({name:"login"}))},null,8,["label"])])],64)}}});export{be as default};
