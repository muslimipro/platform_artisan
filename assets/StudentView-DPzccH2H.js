import{s as Y}from"./index-ChOX4LA1.js";import{s as G,a as J,b as O,c as Q}from"./index-COgmdyOc.js";import{s as W}from"./index-MRr3JDAz.js";import{s as X}from"./index-B2Bo83Di.js";import{s as Z}from"./index-BRYOhxnn.js";import{a as I,r as m,o as T,b as o,k as u,e as _,F as V,j as F,U as ee,q,u as te,D as se,w as i,t as a,f as c,g as B,h as s,i as w,l as ae,x as oe,p as le}from"./index-BEuVwAr8.js";import{s as D}from"./index-iN1AuD1Q.js";import{S,u as ne}from"./useSchoolStore-DHAs7hfK.js";import{T as re}from"./index-BOe8HTYE.js";import"./index-BcdmDF4L.js";import"./index-B1S9ByTA.js";import"./index-DBTGH9LM.js";import"./index-zDAtVMgY.js";import"./index-Ddpxhgob.js";import"./http-PePEMJWw.js";const ie={key:1,class:"flex flex-wrap gap-2"},ce=I({__name:"ProjectDetails",props:{id:{},projectId:{}},setup(j){const v=j,g=m(null),r=m(!1);async function h(){if(!r.value){r.value=!0;try{const{data:e}=await S.getStudentProjectSteps(v.id,v.projectId);g.value=e??null}catch(e){console.log(e)}finally{r.value=!1}}}T(h);function b(e,d){if(e!="completed")return e=="attempted"?"warn":(e=="started","secondary")}function k(e,d){if(e!="completed")return e=="attempted"||e=="started"?"outlined":void 0}function $(e,d){switch(e){case"article":return"pi pi-align-left";case"code":return d?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}return(e,d)=>{var y;const p=D,f=q,P=re;return r.value?(o(),u(p,{key:0,class:"flex justify-center"})):(o(),_("div",ie,[(o(!0),_(V,null,F((y=g.value)==null?void 0:y.steps,l=>ee((o(),u(f,{key:l.id,icon:$(l.step_type,l.skip_submit),rounded:"",severity:b(l.status),variant:k(l.status),class:"h-8 min-w-8 w-8"},null,8,["icon","severity","variant"])),[[P,{value:l.name&&l.name.length>0?l.name:l.id.toString()},void 0,{top:!0}]])),128))]))}}}),ue={key:1},de={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},pe={class:"w-full flex justify-between items-center"},fe={class:"flex gap-4"},me={class:"flex flex-col gap-2"},_e={class:"pl-1 text-3xl"},ve={class:"pl-1 text-sm"},ge={class:"flex flex-col items-end"},he={class:"text-xl"},ye={class:"text-3xl"},xe={key:1,class:"flex flex-col gap-2 w-full"},we={class:"text-gray-500 text-xl"},Se={class:"w-24 h-16 rounded-lg overflow-hidden"},be=["src"],ke={class:"flex flex-col gap-2 pl-4 w-56 items-start"},$e={class:"flex gap-2"},Pe={class:"text-lg"},je={class:"text-lg text-gray-500"},Ce={class:"flex gap-1"},Ae={class:"flex-grow mr-2"},Ue=I({__name:"StudentView",setup(j){const v=te(),g=se(),r=oe(),h=le(),b=ne(),{loadStudents:k}=b,$=["-","Youngling","Padawan","Knight","Master"],e=m(null),d=m([]),p=m(!1),f=m(!1);async function P(){if(!p.value){p.value=!0;try{const{data:t}=await S.getStudent(Number(r.params.id));e.value=t??null}catch(t){console.log(t)}finally{p.value=!1}}}async function y(){if(!f.value){f.value=!0;try{const{data:t}=await S.getStudentProjects(Number(r.params.id));d.value=t??[]}catch(t){console.log(t)}finally{f.value=!1}}}T(()=>{P(),y()});function l(){g.require({message:"Are you sure you want to expel student from this class?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Expel",severity:"danger"},accept:()=>{E()}})}async function E(){try{const{data:t}=await S.expelStudentFromClass(Number(r.params.id));await k(),h.go(-1),v.add({severity:"success",summary:t.message,life:2e3})}catch(t){v.add({severity:"error",summary:t.response.data.error,detail:t,life:2e3})}}return(t,C)=>{const A=D,N=q,M=Z,x=X,R=W,z=G,H=J,K=O,L=Q,U=Y;return o(),u(U,{class:"flex-grow flex flex-col gap-2"},{default:i(()=>[p.value?(o(),u(A,{key:0,class:"flex justify-center"})):e.value?(o(),_("div",de,[c(N,{label:t.$t("pages.school.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:C[0]||(C[0]=n=>B(h).go(-1))},null,8,["label"]),s("div",pe,[s("div",fe,[c(M,{image:e.value.small_avatar_url.length>0?e.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),s("div",me,[s("div",_e,a(e.value.name),1),s("div",ve,a(t.$t("pages.school.since"))+" "+a(e.value.created_time.split("T")[0]),1),c(x,{class:"ml-1 w-fit"},{default:i(()=>[w(a(e.value.access_type),1)]),_:1})])]),s("div",ge,[s("div",he,a(e.value.class_name),1),s("div",ye,a(e.value.xp)+" "+a(t.$t("pages.school.xp")),1)])]),f.value?(o(),u(A,{key:0,class:"flex justify-center"})):(o(),_("div",xe,[s("div",we,a(t.$t("pages.school.projects"))+":",1),c(L,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0},{default:i(()=>[(o(!0),_(V,null,F(d.value,n=>(o(),u(K,{key:n.id,value:n.id},{default:i(()=>[c(z,{class:"flex gap-2 items-center rounded-lg"},{default:i(()=>[s("div",Se,[s("img",{src:n.source_url,class:"w-full h-full object-cover"},null,8,be)]),s("div",ke,[s("div",$e,[s("div",Pe,a(n.name),1),s("div",je,a($[e.value.level]),1)]),s("div",Ce,[n.layer>0?(o(),u(x,{key:0,severity:"warn"},{default:i(()=>[w(a(t.$t("pages.school.level"))+" - "+a(n.layer),1)]),_:2},1024)):ae("",!0),n.is_guidable?(o(),u(x,{key:1},{default:i(()=>[w(a(t.$t("pages.projects.learn")),1)]),_:1})):(o(),u(x,{key:2,severity:"info"},{default:i(()=>[w(a(t.$t("pages.projects.practice")),1)]),_:1}))])]),s("div",Ae,[c(R,{value:n.student_progress,pt:{root:{class:"bg-gray-200"},value:{class:"bg-cyan-500"}}},null,8,["value"])])]),_:2},1024),c(H,null,{default:i(()=>[c(ce,{id:Number(B(r).params.id),"project-id":Number(n.id)},null,8,["id","project-id"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])),c(N,{label:t.$t("pages.school.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:l},null,8,["label"])])):(o(),_("div",ue,a(t.$t("pages.school.noStudentsFound")),1))]),_:1})}}});export{Ue as default};
