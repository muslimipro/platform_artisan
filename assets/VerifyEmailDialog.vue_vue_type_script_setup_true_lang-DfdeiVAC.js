import{d as S,a3 as w,u as B,a as I,A as T,r as m,p as x,o as v,f,w as o,e as i,b as d,j as p,g as A,t as g,h as N,k as D,q as M,s as R,_ as j}from"./index-DcyBeJgC.js";import{s as q}from"./index-gHHiHdoU.js";import{S as U}from"./index-aHnXE6gR.js";const H={class:"text-blue-500"},L={class:"flex flex-col gap-1"},Y={class:"flex gap-1 justify-end"},J=S({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(y){const n=w(y,"modelValue"),_=D(),u=B(),b=I(),{user:V}=T(b),l=m(!1),a=m(0);let r;const $=()=>{a.value=60,r=setInterval(()=>{a.value>0?a.value--:clearInterval(r)},1e3)};async function h(){l.value=!0;try{await U.sendVerificationEmail(),u.add({severity:"success",summary:"Verification email sent!",life:2e3}),$()}catch(e){console.log(e),u.add({severity:"error",summary:"Email is invalid!",detail:e,life:2e3})}finally{l.value=!1}}return x(()=>{clearInterval(r)}),(e,t)=>{const E=M("i18n-t"),c=R,k=q,C=j;return v(),f(C,{visible:n.value,"onUpdate:visible":t[1]||(t[1]=s=>n.value=s),modal:"",draggable:!1,class:"m-4 max-w-md",header:e.$t("dialog.verifyYourEmail")},{footer:o(()=>[i("div",L,[i("div",Y,[d(c,{label:e.$t("dialog.changeEmail"),severity:"secondary",onClick:t[0]||(t[0]=s=>{p(_).replace({path:"/settings/change-email"}),n.value=!1})},null,8,["label"]),d(c,{label:a.value>0?`${e.$t("pages.login.resendIn")} ${a.value}s`:e.$t("dialog.sendVerificationEmail"),onClick:h,loading:l.value,disabled:l.value||a.value>0},null,8,["label","loading","disabled"])]),a.value>0?(v(),f(k,{key:0,severity:"success"},{default:o(()=>[A(g(e.$t("pages.settings.weHaveSentLinkToVerifyEmail")),1)]),_:1})):N("",!0)])]),default:o(()=>[i("div",null,[d(E,{keypath:"dialog.confirmEmailAddress"},{email:o(()=>{var s;return[i("span",H,g((s=p(V))==null?void 0:s.email),1)]}),_:1})])]),_:1},8,["visible","header"])}}});export{J as _};
