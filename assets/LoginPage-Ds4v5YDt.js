import{z as M,a as n,_ as N,b as P,s as T,c as $}from"./index-DJ89rHhm.js";import{d as E,f as q,g as D,h as _,o as r,c as m,b as s,a,w as l,i as y,j as I,t as w,k as b,F as k,l as R,u as S,e as U,s as A}from"./index-D1ZBW9ED.js";import{s as G}from"./index-eCfrzaTJ.js";import{s as H}from"./index-vXkPrA62.js";import{s as J}from"./index-DXVUd8Q3.js";import"./logo-DbyeBju5.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-D-DzZBed.js";import"./http-CdXctuY0.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-col gap-1"},Q={class:"flex flex-col gap-1"},W={class:"my-0 px-4 flex flex-col gap-1"},le=E({__name:"LoginPage",setup(X){const c=q(),u=U(),d=D(),t=_(!1),V=_({email:"",password:""}),h=M(n.object({email:n.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:n.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),z=async i=>{if(!t.value&&i.valid){t.value=!0;try{const{data:e}=await P.login(i.states.email.value,i.states.password.value);d.setToken(e),d.setUser(e),u.push({name:"projects"}),c.add({severity:"success",summary:"Success",life:3e3})}catch(e){c.add({severity:"error",summary:e.toString(),life:3e3})}finally{t.value=!1}}};return(i,e)=>{const B=J,p=H,f=G,F=T,v=A,L=$;return r(),m(k,null,[s(N),a("div",K,[s(L,{initialValues:V.value,resolver:S(h),onSubmit:z,class:"flex flex-col gap-4 w-full sm:w-60 mx-6 sm:px-0 px-8"},{default:l(o=>{var x,g;return[e[3]||(e[3]=a("div",{class:"flex flex-1 items-center justify-center my-4"},[a("p",{class:"text-4xl font-semibold px-2 mr-4"},"Log In")],-1)),a("div",O,[s(p,{variant:"on"},{default:l(()=>[s(B,{id:"email",name:"email",type:"text",fluid:""}),e[1]||(e[1]=a("label",{for:"email"},"Email",-1))]),_:1}),(x=o.username)!=null&&x.invalid?(r(),y(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[I(w(o.username.error.message),1)]),_:2},1024)):b("",!0)]),a("div",Q,[s(p,{variant:"on"},{default:l(()=>[s(F,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),e[2]||(e[2]=a("label",{for:"password"},"Password",-1))]),_:1}),(g=o.password)!=null&&g.invalid?(r(),y(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[a("ul",W,[(r(!0),m(k,null,R(o.password.errors,(j,C)=>(r(),m("li",{key:C},w(j.message),1))),128))])]),_:2},1024)):b("",!0)]),s(v,{type:"submit",label:"Login",loading:t.value,disabled:t.value},null,8,["loading","disabled"])]}),_:1},8,["initialValues","resolver"]),s(v,{severity:"secondary",variant:"link",label:"Don't have an account?",onClick:e[0]||(e[0]=o=>S(u).push({name:"signup"}))})])],64)}}});export{le as default};
