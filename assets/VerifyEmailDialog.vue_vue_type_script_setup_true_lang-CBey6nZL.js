import{d as C,S as w,u as B,a as I,y as T,r as m,p as x,o as v,f,w as o,e as i,b as d,j as p,g as M,t as g,h as N,k as A,q as D,s as R,M as j}from"./index-BRYS-vcQ.js";import{s as q}from"./index-Bd-ljPhE.js";import{S as U}from"./index-CXh-xjcX.js";const H={class:"text-blue-500"},L={class:"flex flex-col gap-1"},Y={class:"flex gap-1 justify-end"},J=C({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(y){const n=w(y,"modelValue"),_=A(),u=B(),b=I(),{user:V}=T(b),t=m(!1),a=m(0);let r;const $=()=>{a.value=60,r=setInterval(()=>{a.value>0?a.value--:clearInterval(r)},1e3)};async function h(){t.value=!0;try{const{data:e}=await U.sendVerificationEmail();u.add({severity:"success",summary:e.message,life:2e3}),$()}catch(e){u.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}finally{t.value=!1}}return x(()=>{clearInterval(r)}),(e,l)=>{const k=D("i18n-t"),c=R,E=q,S=j;return v(),f(S,{visible:n.value,"onUpdate:visible":l[1]||(l[1]=s=>n.value=s),modal:"",draggable:!1,class:"m-4 max-w-md",header:e.$t("dialog.verifyYourEmail")},{footer:o(()=>[i("div",L,[i("div",Y,[d(c,{label:e.$t("dialog.changeEmail"),severity:"secondary",onClick:l[0]||(l[0]=s=>{p(_).replace({path:"/settings/change-email"}),n.value=!1})},null,8,["label"]),d(c,{label:a.value>0?`${e.$t("pages.login.resendIn")} ${a.value}s`:e.$t("dialog.sendVerificationEmail"),onClick:h,loading:t.value,disabled:t.value||a.value>0},null,8,["label","loading","disabled"])]),a.value>0?(v(),f(E,{key:0,severity:"success"},{default:o(()=>[M(g(e.$t("pages.settings.weHaveSentLinkToVerifyEmail")),1)]),_:1})):N("",!0)])]),default:o(()=>[i("div",null,[d(k,{keypath:"dialog.confirmEmailAddress"},{email:o(()=>{var s;return[i("span",H,g((s=p(V))==null?void 0:s.email),1)]}),_:1})])]),_:1},8,["visible","header"])}}});export{J as _};
