import{z as R,a as i,b as q,s as U,_ as D,c as Z}from"./index-BI1Xvqh9.js";import{d as G,r as x,l as H,u as J,a as K,c as m,b as a,e as t,w as n,f as y,F as w,g as O,s as Q,o,h as u,i as C,t as d,j as p,k as F}from"./index-oO4aa8WT.js";import{s as W}from"./index-Cgz68HnJ.js";import{s as X}from"./index-DhZhEguM.js";import{s as Y}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-C5RYowQO.js";import{L as $,s as ee}from"./logo-YeaCGF-Y.js";import"./http-B5KjlMfm.js";const se={class:"card flex flex-col items-center pt-4"},ae={class:"flex flex-1 items-center justify-center my-4"},te={class:"flex flex-col gap-1"},re={class:"flex gap-2"},ne={class:"flex flex-col gap-1"},oe={class:"flex flex-col gap-1"},ie={class:"my-0 px-4 flex flex-col gap-1"},le={class:"flex flex-col gap-1"},me={class:"my-0 px-4 flex flex-col gap-1"},xe=G({__name:"RegisterPage",setup(ce){const L=x([]),f=x(!1);H(async()=>{const s=await fetch("src/assets/countries.json");L.value=await s.json()});const b=J(),k=O(),h=K(),P=x({name:"",surname:"",email:"",password:"",city:""}),T=R(i.object({name:i.string().min(1,{message:"Name "}).max(30,{message:"Maximum 30 characters."}),surname:i.string().min(1,{message:"Surname "}).max(30,{message:"Maximum 30 characters."}),email:i.string().min(1,{message:"Email is required."}).max(30,{message:"Maximum 30 characters."}),password:i.string().min(8,{message:"Minimum 8 characters."}).max(30,{message:"Maximum 30 characters."}).refine(s=>/[a-z]/.test(s),{message:"Must have a lowercase letter."}).refine(s=>/[A-Z]/.test(s),{message:"Must have an uppercase letter."}).refine(s=>/[0-9]/.test(s),{message:"Must have a number."}),confirm_password:i.string()}).refine(s=>s.password===s.confirm_password,{message:"Passwords must match",path:["confirm_password"]})),A=async s=>{if(!f.value&&s.valid){f.value=!0;try{const{data:e}=await q.signUp(s.states.name.value,s.states.surname.value,s.states.email.value,s.states.password.value);h.setToken(e),h.setUser(e),k.push({name:"projects"}),b.add({severity:"success",summary:"Success",life:3e3})}catch(e){b.add({severity:"error",summary:e.toString(),life:3e3})}finally{f.value=!1}}};return(s,e)=>{const E=ee,g=Y,l=X,c=W,M=Z,S=Q,I=U;return o(),m(w,null,[a(D),t("div",se,[a(I,{initialValues:P.value,resolver:y(T),onSubmit:A,class:"flex flex-col gap-4 w-full sm:w-80"},{default:n(r=>{var z,V,j,N,B;return[t("div",ae,[a(E,{src:y($),width:"32"},null,8,["src"]),e[1]||(e[1]=t("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1))]),t("div",te,[t("div",re,[a(l,{variant:"on"},{default:n(()=>[a(g,{id:"name",name:"name",type:"text",fluid:""}),e[2]||(e[2]=t("label",{for:"name"},"Name",-1))]),_:1}),a(l,{variant:"on"},{default:n(()=>[a(g,{id:"surname",name:"surname",type:"text",fluid:""}),e[3]||(e[3]=t("label",{for:"surname"},"Surname",-1))]),_:1})]),(z=r.name)!=null&&z.invalid||(V=r.surname)!=null&&V.invalid?(o(),u(c,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[C(d(r.name.error.message+r.surname.error.message+"is required."),1)]),_:2},1024)):p("",!0)]),t("div",ne,[a(l,{variant:"on"},{default:n(()=>[a(g,{id:"email",name:"email",type:"text",fluid:""}),e[4]||(e[4]=t("label",{for:"email"},"Email",-1))]),_:1}),(j=r.email)!=null&&j.invalid?(o(),u(c,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[C(d(r.email.error.message),1)]),_:2},1024)):p("",!0)]),t("div",oe,[a(l,{variant:"on"},{default:n(()=>[a(M,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),e[5]||(e[5]=t("label",{for:"password"},"Password",-1))]),_:1}),(N=r.password)!=null&&N.invalid?(o(),u(c,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[t("ul",ie,[(o(!0),m(w,null,F(r.password.errors,(v,_)=>(o(),m("li",{key:_},d(v.message),1))),128))])]),_:2},1024)):p("",!0)]),t("div",le,[a(l,{variant:"on"},{default:n(()=>[a(M,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),e[6]||(e[6]=t("label",{for:"confirm_password"},"Confirm password",-1))]),_:1}),(B=r.confirm_password)!=null&&B.invalid?(o(),u(c,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[t("ul",me,[(o(!0),m(w,null,F(r.confirm_password.errors,(v,_)=>(o(),m("li",{key:_},d(v.message),1))),128))])]),_:2},1024)):p("",!0)]),a(S,{type:"submit",label:"Sign up"})]}),_:1},8,["initialValues","resolver"]),a(S,{severity:"secondary",variant:"link",label:"Already have an account",onClick:e[0]||(e[0]=r=>y(k).push({name:"login"}))})])],64)}}});export{xe as default};
