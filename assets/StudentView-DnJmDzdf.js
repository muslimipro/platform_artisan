import{s as J}from"./index-B8WGv_8T.js";import{s as K,a as O,b as Q,c as U}from"./index-DUns0hMB.js";import{s as W}from"./index-Bd1tQohG.js";import{s as X}from"./index-Bn9oQtae.js";import{s as Y}from"./index-coNiHUPN.js";import{d as I,r as m,m as T,o as a,f as p,c as _,F as V,i as F,L as Z,s as q,u as ee,z as te,w as u,t as o,b as d,j as B,e as s,g as w,h as se,n as ae,k as oe}from"./index-CbeY2LTE.js";import{s as D}from"./index-DtxDaYMe.js";import{S,u as le}from"./useSchoolStore-BaiZg_QB.js";import{T as ne}from"./index-DlG6fcw9.js";import"./index-B0qWFnFe.js";import"./index-MfN_vQa9.js";import"./index-QZTX5Q6I.js";import"./index-D0AiXIN_.js";import"./index-C8kuHmDy.js";const re={key:1,class:"flex flex-wrap gap-2"},ie=I({__name:"ProjectDetails",props:{id:{},projectId:{}},setup(P){const v=P,g=m(null),i=m(!1);async function h(){if(!i.value){i.value=!0;try{const{data:t}=await S.getStudentProjectSteps(v.id,v.projectId);g.value=t??null}catch(t){console.log(t)}finally{i.value=!1}}}T(h);function b(t,c){if(t!="completed")return t=="attempted"?"warn":(t=="started","secondary")}function $(t,c){if(t!="completed")return t=="attempted"||t=="started"?"outlined":void 0}function l(t,c){switch(t){case"article":return"pi pi-align-left";case"code":return c?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}return(t,c)=>{var y;const f=D,k=q,j=ne;return i.value?(a(),p(f,{key:0,class:"flex justify-center"})):(a(),_("div",re,[(a(!0),_(V,null,F((y=g.value)==null?void 0:y.steps,n=>Z((a(),p(k,{key:n.id,icon:l(n.step_type,n.skip_submit),rounded:"",severity:b(n.status),variant:$(n.status),class:"h-8 min-w-8 w-8"},null,8,["icon","severity","variant"])),[[j,{value:n.name&&n.name.length>0?n.name:n.id.toString()},void 0,{top:!0}]])),128))]))}}}),ce={key:1},ue={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},de={class:"w-full flex justify-between items-center"},pe={class:"flex gap-4"},fe={class:"flex flex-col gap-2"},me={class:"pl-1 text-3xl"},_e={class:"pl-1 text-sm"},ve={class:"flex flex-col items-end"},ge={class:"text-xl"},he={class:"text-3xl"},ye={key:1,class:"flex flex-col gap-2 w-full"},xe={class:"text-gray-500 text-xl"},we={class:"w-24 h-16 rounded-lg overflow-hidden"},Se=["src"],be={class:"flex flex-col gap-2 pl-4 w-56 items-start"},$e={class:"text-lg"},ke={class:"flex gap-1"},je={class:"flex-grow mr-2"},Re=I({__name:"StudentView",setup(P){const v=ee(),g=te(),i=ae(),h=oe(),b=le(),{loadStudents:$}=b,l=m(null),t=m([]),c=m(!1),f=m(!1);async function k(){if(!c.value){c.value=!0;try{const{data:e}=await S.getStudent(Number(i.params.id));l.value=e??null}catch(e){console.log(e)}finally{c.value=!1}}}async function j(){if(!f.value){f.value=!0;try{const{data:e}=await S.getStudentProjects(Number(i.params.id));t.value=e??[]}catch(e){console.log(e)}finally{f.value=!1}}}T(()=>{k(),j()});function y(){g.require({message:"Are you sure you want to expel student from this class?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Expel",severity:"danger"},accept:()=>{n()}})}async function n(){try{const{data:e}=await S.expelStudentFromClass(Number(i.params.id));await $(),h.go(-1),v.add({severity:"success",summary:e.message,life:2e3})}catch(e){v.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}}return(e,C)=>{const A=D,N=q,E=Y,x=X,z=W,L=K,R=O,H=Q,M=U,G=J;return a(),p(G,{class:"flex-grow flex flex-col gap-2"},{default:u(()=>[c.value?(a(),p(A,{key:0,class:"flex justify-center"})):l.value?(a(),_("div",ue,[d(N,{label:e.$t("pages.school.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:C[0]||(C[0]=r=>B(h).go(-1))},null,8,["label"]),s("div",de,[s("div",pe,[d(E,{image:l.value.small_avatar_url.length>0?l.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),s("div",fe,[s("div",me,o(l.value.name),1),s("div",_e,o(e.$t("pages.school.since"))+" "+o(l.value.created_time.split("T")[0]),1),d(x,{class:"ml-1 w-fit"},{default:u(()=>[w(o(l.value.access_type),1)]),_:1})])]),s("div",ve,[s("div",ge,o(l.value.class_name),1),s("div",he,o(l.value.xp)+" "+o(e.$t("pages.school.xp")),1)])]),f.value?(a(),p(A,{key:0,class:"flex justify-center"})):(a(),_("div",ye,[s("div",xe,o(e.$t("pages.school.projects"))+":",1),d(M,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0},{default:u(()=>[(a(!0),_(V,null,F(t.value,r=>(a(),p(H,{key:r.id,value:r.id},{default:u(()=>[d(L,{class:"flex gap-2 items-center rounded-lg"},{default:u(()=>[s("div",we,[s("img",{src:r.source_url,class:"w-full h-full object-cover"},null,8,Se)]),s("div",be,[s("div",$e,o(r.name),1),s("div",ke,[r.layer>0?(a(),p(x,{key:0,severity:"warn"},{default:u(()=>[w(o(e.$t("pages.school.level"))+" - "+o(r.layer),1)]),_:2},1024)):se("",!0),r.is_guidable?(a(),p(x,{key:1},{default:u(()=>[w(o(e.$t("pages.projects.learn")),1)]),_:1})):(a(),p(x,{key:2,severity:"info"},{default:u(()=>[w(o(e.$t("pages.projects.practice")),1)]),_:1}))])]),s("div",je,[d(z,{value:r.student_progress,pt:{root:{class:"bg-gray-200"},value:{class:"bg-cyan-500"}}},null,8,["value"])])]),_:2},1024),d(R,null,{default:u(()=>[d(ie,{id:Number(B(i).params.id),"project-id":Number(r.id)},null,8,["id","project-id"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])),d(N,{label:e.$t("pages.school.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:y},null,8,["label"])])):(a(),_("div",ce,o(e.$t("pages.school.noStudentsFound")),1))]),_:1})}}});export{Re as default};
