import{h as B,z as g,s as P}from"./index-DiepRV7n.js";import{s as R}from"./index-Bna-x6D_.js";import{s as C}from"./index-Cn0IT6Fu.js";import{s as N}from"./index-DeD98j8u.js";import{d as j,p as q,u as z,r as c,q as E,o as u,c as L,b as a,e as o,j as _,w as i,t as r,f as x,g as b,h as y,F as A,k as M,s as D}from"./index-DTnuYjp0.js";import{_ as H}from"./AuthHeader.vue_vue_type_script_setup_true_lang-CcciZozl.js";import{a as U}from"./index-Cn1av5Rm.js";import"./logo-BXnUk4zJ.js";import"./index-BB6uDsHr.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-0PzSwcTc.js";import"./index-BhkdwvDF.js";import"./index-0pkJ3brC.js";import"./index-DKAMWqgV.js";const Y={class:"card flex flex-col items-center pt-4"},G={class:"flex flex-col flex-1 items-center justify-center my-4"},J={class:"text-4xl font-semibold px-2 mr-4 text-center"},K={class:"text-md px-2 mt-4 mr-4 text-slate-500 text-center"},O={class:"flex flex-col gap-1"},Q={for:"email"},ue=j({__name:"ForgotPassword",setup(W){const{locale:$}=q(),p=z(),w=M(),l=c(!1),s=c(0);let n;const h=()=>{s.value=60,n=setInterval(()=>{s.value>0?s.value--:clearInterval(n)},1e3)},k=c({email:""}),I=B(g.object({email:g.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."})})),T=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:t}=await U.requestPasswordReset(e.states.email.value,$.value);console.log(t),p.add({severity:"success",summary:"Success",life:3e3}),h()}catch(t){p.add({severity:"error",summary:t.toString(),life:3e3})}finally{l.value=!1}}};return E(()=>{clearInterval(n)}),(e,t)=>{const d=D,V=N,F=C,f=R,S=P;return u(),L(A,null,[a(H),o("div",Y,[a(d,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:t[0]||(t[0]=m=>_(w).replace({name:"login"}))},null,8,["label"]),a(S,{initialValues:k.value,resolver:_(I),onSubmit:T,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(m=>{var v;return[o("div",G,[o("p",J,r(e.$t("pages.login.forgotPassword")),1),o("p",K,r(e.$t("pages.login.provideYourAccountsEmailToResetPassword")),1)]),o("div",O,[a(F,{variant:"on"},{default:i(()=>[a(V,{id:"email",name:"email",type:"text",fluid:""}),o("label",Q,r(e.$t("email")),1)]),_:1}),(v=m.email)!=null&&v.invalid?(u(),x(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[b(r(m.email.error.message),1)]),_:2},1024)):y("",!0)]),s.value>0?(u(),x(f,{key:0,severity:"success"},{default:i(()=>[b(r(e.$t("pages.login.weHaveSentLinkToResetPassword")),1)]),_:1})):y("",!0),a(d,{type:"submit",label:s.value>0?`${e.$t("pages.login.resendIn")} ${s.value}s`:e.$t("pages.login.send"),loading:l.value,disabled:l.value||s.value>0},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{ue as default};
