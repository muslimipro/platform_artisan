import{u as X,s as G,S as J,_ as K,T as Q,a as U}from"./SimulationView-DC1kUYY5.js";import{a as V,t as M,_ as W,b as Y,M as Z,c as ee,d as te}from"./QuestionStep.vue_vue_type_script_setup_true_lang-DF0Tmb4N.js";import{ap as se,ao as C,e as x,ac as I,ag as ae,aq as N,ae as ne,an as T,o as q,w as R,D as a,E as v,I as h,T as o,af as s,V as p,a4 as A,aa as oe,ai as E,c as le,X as w,_ as g,al as ie}from"./index-EFKUviNu.js";import{s as ce}from"./index-CxkeGT8j.js";import{s as re,a as ue,t as pe}from"./types-BVEoD7Eh.js";import{L as fe,a as me}from"./logo-DNmcmLnj.js";import{_ as de}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-DOta09qP.js";import"./_plugin-vue_export-helper-CHc3pKy4.js";import"./pibody-B70zHXNr.js";import"./http-B227r7Ub.js";import"./index-CuRBLJL0.js";const P=se("useLessonStore",()=>{const $=X(),{setCode:f}=$,{locale:i}=C(),t=x(null),l=x(null),e=x(!1);function m(n){n!=null&&(t.value=n,l.value=0)}function c(n){t.value!=null&&(t.value.steps=n)}async function r(n){if(t.value==null)return;if(l.value=n,t.value.steps[l.value].title==""){e.value=!0;const{data:S}=await V.getStepByID(t.value.steps[l.value].id),z=await M(S,i.value,!1);t.value.steps[n]=z,e.value=!1}const u=t.value.steps[l.value];u.type=="code"&&u.inner.platformAction=="code2ide"&&f(u.inner.starting??"")}return{lesson:t,stepIndex:l,stepLoading:e,setLesson:m,setSteps:c,changeStep:r}}),_e={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},ve={class:"flex flex-1 items-center"},ye={key:1,class:"flex items-center gap-1"},ge={class:"flex items-center gap-1"},he={class:"flex flex-1 justify-end items-center gap-2"},xe=I({__name:"LessonHeader",setup($){const{locale:f}=C(),i=ae(),t=N(),l=ne(),e=P(),{lesson:m,stepIndex:c,stepLoading:r}=T(e),{changeStep:n,setSteps:u}=e,S=x(!1);function z(d){switch(d){case"article":return"pi pi-align-left";case"code":return"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function B(){if(!S.value){S.value=!0;try{const{data:d}=await V.getProjectStepsByID(t.params.id.toString()),_=[];for(const[L,y]of d.entries())if(L==0){const k=await M(y,f.value,!1);_.push(k)}else{const k={id:y.id.toString(),title:"",type:y.step_type,progress:"nothing",inner:{contents:[]}};_.push(k)}u(_)}catch(d){alert(d)}finally{S.value=!1}}}q(B),R(f,B,{immediate:!1});const D=x(),F=x([{label:"Profile",icon:"pi pi-user"},{label:"Log out",icon:"pi pi-sign-out",command:()=>{l.logout(),i.replace({name:"login"})}}]),H=d=>{D.value.toggle(d)};return(d,_)=>{const L=me,y=E,k=re,O=ce;return a(),v("div",_e,[h("div",ve,[o(L,{src:s(fe),width:"32"},null,8,["src"]),_[1]||(_[1]=h("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),o(y,{id:"#projects",icon:"pi pi-angle-left",label:d.$t("projects"),severity:"secondary",variant:"text",onClick:_[0]||(_[0]=j=>s(i).push({name:"projects"})),size:"small"},null,8,["label"])]),S.value||s(m)==null?(a(),p(k,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(a(),v("div",ye,[h("div",ge,[(a(!0),v(A,null,oe(s(m).steps,(j,b)=>(a(),p(y,{key:j.id,icon:z(j.type),rounded:"",severity:s(c)==b?void 0:"secondary",variant:s(c)==b?void 0:"outlined",onClick:Ce=>s(n)(b),class:"h-8 w-8",disabled:s(r),loading:b==s(c)&&s(r)},null,8,["icon","severity","variant","onClick","disabled","loading"]))),128))])])),h("div",he,[o(de),o(y,{type:"button",icon:"pi pi-ellipsis-v",onClick:H,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",variant:"outlined",severity:"secondary",class:"border border-slate-300 bg-slate-50",style:{width:"34px"}}),o(O,{ref_key:"menu",ref:D,id:"overlay_menu",model:F.value,popup:!0},null,8,["model"])])])}}}),Se={class:"flex flex-col p-4 gap-4 overflow-scroll h-full justify-between bg-white"},we={key:0},ke={key:1,class:"flex"},$e=I({__name:"LessonDiv",setup($){const f=P(),{lesson:i,stepIndex:t}=T(f),{changeStep:l}=f,e=le(()=>{var r;return t.value==null?null:((r=i.value)==null?void 0:r.steps[t.value])??null});async function m(){t.value!=null&&l(t.value-1)}async function c(){t.value!=null&&l(t.value+1)}return(r,n)=>{const u=E;return a(),v("div",Se,[e.value?(a(),v("div",we,[e.value.type=="article"?(a(),p(s(W),{key:0,step:e.value},null,8,["step"])):e.value.type=="code"?(a(),p(s(Y),{key:1,step:e.value},null,8,["step"])):e.value.type=="matching"?(a(),p(s(Z),{key:2,step:e.value},null,8,["step"])):e.value.type=="open"?(a(),p(s(ee),{key:3,step:e.value},null,8,["step"])):e.value.type=="question"?(a(),p(s(te),{key:4,step:e.value},null,8,["step"])):w("",!0)])):w("",!0),s(i)!=null&&s(i).steps!=null&&s(i).steps.length>0&&e.value?(a(),v("div",ke,[s(t)!==0?(a(),p(u,{key:0,label:"Previous",icon:"pi pi-angle-left",size:"small",onClick:m})):w("",!0),s(t)<s(i).steps.length-1?(a(),p(u,{key:1,label:"Next",icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:c})):w("",!0)])):w("",!0)])}}}),be={key:1,class:"h-[51px]"},ze={class:"flex bg-surface-0",style:{height:"calc(100vh - 52px)"}},Le={class:"flex justify-center h-full"},je={class:"max-w-[400px] w-full"},Ee=I({__name:"LessonView",setup($){const{locale:f}=C(),i=N(),t=P(),{setLesson:l}=t,e=x(!1);async function m(){if(!e.value){e.value=!0;try{const{data:c}=await ue.getProjectByID(i.params.id.toString()),r=await pe(c,f.value);l(r)}catch(c){alert(c)}finally{e.value=!1}}}return q(m),R(f,m),(c,r)=>{const n=U,u=G;return a(),v(A,null,[e.value?(a(),v("div",be)):(a(),p(xe,{key:0})),h("div",ze,[o(u,{class:"w-full rounded-none"},{default:g(()=>[o(n,{size:33,minSize:10,class:"max-w-[467px] w-full"},{default:g(()=>[o(J)]),_:1}),o(n,{size:34,minSize:10},{default:g(()=>[o(u,{layout:"vertical",class:"h-full w-full"},{default:g(()=>[o(n,{size:65,minSize:10},{default:g(()=>[o(K)]),_:1}),o(n,{size:35,minSize:10},{default:g(()=>[o(Q)]),_:1})]),_:1})]),_:1}),o(n,{size:33,minSize:10,class:ie(["max-w-md mx-auto",{"animate-fadeinright animate-once animate-duration-1000 animate-ease-in-out":!0}])},{default:g(()=>[h("div",Le,[h("div",je,[e.value?w("",!0):(a(),p($e,{key:0}))])])]),_:1})]),_:1})])],64)}}});export{Ee as default};
