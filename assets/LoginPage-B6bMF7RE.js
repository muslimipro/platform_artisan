import{z as M,a as n,b as N,s as P,_ as T,c as E}from"./index-BlLv5gLx.js";import{d as I,u as q,a as D,r as y,c as m,b as e,e as a,w as r,f as c,F as w,g as R,s as A,o as i,h as b,i as U,t as k,j as h,k as G}from"./index-DRZ-B3PQ.js";import{s as H}from"./index-D-FMpm2b.js";import{s as J}from"./index-D8Fs2Q2z.js";import{s as K}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-RRG0UzA8.js";import{L as O,s as Q}from"./logo-C4-nlLcK.js";import"./http-B0ZoMD11.js";const W={class:"card flex flex-col items-center pt-4"},X={class:"flex flex-1 items-center justify-center my-4"},Y={class:"flex flex-col gap-1"},Z={class:"flex flex-col gap-1"},ss={class:"my-0 px-4 flex flex-col gap-1"},ms=I({__name:"LoginPage",setup(es){const u=q(),d=R(),p=D(),t=y(!1),S=y({email:"",password:""}),V=M(n.object({email:n.string().min(1,{message:"Email is required."}).max(30,{message:"Maximum 30 characters."}),password:n.string().min(1,{message:"Password is required."}).max(30,{message:"Maximum 30 characters."})})),L=async l=>{if(!t.value&&l.valid){t.value=!0;try{const{data:s}=await N.login(l.states.email.value,l.states.password.value);p.setToken(s),p.setUser(s),d.push({name:"projects"}),u.add({severity:"success",summary:"Success",life:3e3})}catch(s){u.add({severity:"error",summary:s.toString(),life:3e3})}finally{t.value=!1}}};return(l,s)=>{const z=Q,B=K,f=J,_=H,F=E,v=A,$=P;return i(),m(w,null,[e(T),a("div",W,[e($,{initialValues:S.value,resolver:c(V),onSubmit:L,class:"flex flex-col gap-4 w-full sm:w-60 mx-6"},{default:r(o=>{var g,x;return[a("div",X,[e(z,{src:c(O),width:"32"},null,8,["src"]),s[1]||(s[1]=a("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1))]),a("div",Y,[e(f,{variant:"on"},{default:r(()=>[e(B,{id:"email",name:"email",type:"text",fluid:""}),s[2]||(s[2]=a("label",{for:"email"},"Email",-1))]),_:1}),(g=o.username)!=null&&g.invalid?(i(),b(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[U(k(o.username.error.message),1)]),_:2},1024)):h("",!0)]),a("div",Z,[e(f,{variant:"on"},{default:r(()=>[e(F,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),s[3]||(s[3]=a("label",{for:"password"},"Password",-1))]),_:1}),(x=o.password)!=null&&x.invalid?(i(),b(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[a("ul",ss,[(i(!0),m(w,null,G(o.password.errors,(j,C)=>(i(),m("li",{key:C},k(j.message),1))),128))])]),_:2},1024)):h("",!0)]),e(v,{type:"submit",label:"Login",loading:t.value,disabled:t.value},null,8,["loading","disabled"])]}),_:1},8,["initialValues","resolver"]),e(v,{severity:"secondary",variant:"link",label:"Don't have an account?",onClick:s[0]||(s[0]=o=>c(d).push({name:"signup"}))})])],64)}}});export{ms as default};
