import{s as K}from"./index-BbIkPId2.js";import{s as O,a as Q,b as U,c as W}from"./index-NGKVkVxc.js";import{s as X}from"./index-B-5Njtm2.js";import{s as Y}from"./index-DSxAlNAa.js";import{s as Z}from"./index-BEfUyxdS.js";import{d as I,r as m,m as F,o,f as c,c as _,F as T,i as V,P as ee,s as q,u as te,A as se,p as oe,w as i,t as a,b as r,j as B,e as s,g as S,h as ae,n as le,k as ne}from"./index-CFTsbYyj.js";import{s as D}from"./index-Ctb6zsXk.js";import{S as b,u as ie}from"./useSchoolStore-f2J2IaZl.js";import{T as re}from"./index-DkaXnnPS.js";import"./index-B3U6P8R9.js";import"./index-DM2DgLdl.js";import"./index-zHRJOT5a.js";import"./index-CQ4NnFcg.js";import"./index-rUX6T0Ty.js";import"./index-BBwnMfvS.js";const ce={key:1,class:"flex flex-wrap gap-2"},ue=I({__name:"ProjectDetails",props:{id:{},projectId:{}},setup(j){const v=j,g=m(null),n=m(!1);async function h(){if(!n.value){n.value=!0;try{const{data:e}=await b.getStudentProjectSteps(v.id,v.projectId);g.value=e??null}catch(e){console.log(e)}finally{n.value=!1}}}F(h);function y(e,d){if(e!="completed")return e=="attempted"?"warn":(e=="started","secondary")}function $(e,d){if(e!="completed")return e=="attempted"||e=="started"?"outlined":void 0}function k(e,d){switch(e){case"article":return"pi pi-align-left";case"code":return d?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}return(e,d)=>{var x;const p=D,f=q,P=re;return n.value?(o(),c(p,{key:0,class:"flex justify-center"})):(o(),_("div",ce,[(o(!0),_(T,null,V((x=g.value)==null?void 0:x.steps,u=>ee((o(),c(f,{key:u.id,icon:k(u.step_type,u.skip_submit),rounded:"",severity:y(u.status),variant:$(u.status),class:"h-8 min-w-8 w-8"},null,8,["icon","severity","variant"])),[[P,{value:u.id.toString()},void 0,{top:!0}]])),128))]))}}}),de={key:1},pe={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},fe={class:"w-full flex justify-between items-center"},me={class:"flex gap-4"},_e={class:"flex flex-col gap-2"},ve={class:"pl-1 text-3xl"},ge={class:"pl-1 text-sm"},he={class:"flex flex-col items-end"},ye={class:"text-xl"},xe={class:"text-3xl"},we={key:1,class:"flex flex-col gap-2 w-full"},Se={class:"text-gray-500 text-xl"},be={class:"w-24 h-16 rounded-lg overflow-hidden"},$e=["src"],ke={class:"flex flex-col gap-2 pl-4 w-56 items-start"},Pe={class:"text-lg"},je={class:"flex gap-1"},Ce={class:"flex-grow mr-2"},Ge=I({__name:"StudentView",setup(j){const v=te(),g=se(),n=le(),h=ne(),{t:y}=oe(),$=ie(),{loadStudents:k}=$,e=m(null),d=m([]),p=m(!1),f=m(!1);async function P(){if(!p.value){p.value=!0;try{const{data:t}=await b.getStudent(Number(n.params.id));e.value=t??null}catch(t){console.log(t)}finally{p.value=!1}}}async function x(){if(!f.value){f.value=!0;try{const{data:t}=await b.getStudentProjects(Number(n.params.id));d.value=t??[]}catch(t){console.log(t)}finally{f.value=!1}}}F(()=>{P(),x()});function u(){g.require({message:"Are you sure you want to expel student from this class?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Expel",severity:"danger"},accept:()=>{E()}})}async function E(){try{await b.expelStudentFromClass(Number(n.params.id)),await k(),h.go(-1),v.add({severity:"success",summary:y("pages.school.studentRemoved"),life:2e3})}catch(t){v.add({severity:"error",summary:y("pages.school.removeStudentFailed"),detail:t,life:2e3})}}return(t,C)=>{const A=D,N=q,R=Z,w=Y,z=X,H=O,L=Q,M=U,G=W,J=K;return o(),c(J,{class:"flex-grow flex flex-col gap-2"},{default:i(()=>[p.value?(o(),c(A,{key:0,class:"flex justify-center"})):e.value?(o(),_("div",pe,[r(N,{label:t.$t("pages.school.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:C[0]||(C[0]=l=>B(h).go(-1))},null,8,["label"]),s("div",fe,[s("div",me,[r(R,{image:e.value.small_avatar_url.length>0?e.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),s("div",_e,[s("div",ve,a(e.value.name),1),s("div",ge,a(t.$t("pages.school.since"))+" "+a(e.value.created_time.split("T")[0]),1),r(w,{class:"ml-1 w-fit"},{default:i(()=>[S(a(e.value.access_type),1)]),_:1})])]),s("div",he,[s("div",ye,a(e.value.class_name),1),s("div",xe,a(e.value.xp)+" "+a(t.$t("pages.school.xp")),1)])]),f.value?(o(),c(A,{key:0,class:"flex justify-center"})):(o(),_("div",we,[s("div",Se,a(t.$t("pages.school.projects"))+":",1),r(G,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0},{default:i(()=>[(o(!0),_(T,null,V(d.value,l=>(o(),c(M,{key:l.id,value:l.id},{default:i(()=>[r(H,{class:"flex gap-2 items-center rounded-lg"},{default:i(()=>[s("div",be,[s("img",{src:l.source_url,class:"w-full h-full object-cover"},null,8,$e)]),s("div",ke,[s("div",Pe,a(l.id),1),s("div",je,[l.layer>0?(o(),c(w,{key:0,severity:"warn"},{default:i(()=>[S(a(t.$t("pages.school.level"))+" - "+a(l.layer),1)]),_:2},1024)):ae("",!0),l.is_guidable?(o(),c(w,{key:1},{default:i(()=>[S(a(t.$t("pages.projects.learn")),1)]),_:1})):(o(),c(w,{key:2,severity:"info"},{default:i(()=>[S(a(t.$t("pages.projects.practice")),1)]),_:1}))])]),s("div",Ce,[r(z,{value:l.student_progress,pt:{root:{class:"bg-gray-200"},value:{class:"bg-cyan-500"}}},null,8,["value"])])]),_:2},1024),r(L,null,{default:i(()=>[r(ue,{id:Number(B(n).params.id),"project-id":Number(l.id)},null,8,["id","project-id"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])),r(N,{label:t.$t("pages.school.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:u},null,8,["label"])])):(o(),_("div",de,a(t.$t("pages.school.noStudentsFound")),1))]),_:1})}}});export{Ge as default};
