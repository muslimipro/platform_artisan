import{h as i}from"./index-C8kuHmDy.js";import{s as H}from"./index-B8WGv_8T.js";import{d as T,o as a,c as r,j as t,e as o,t as n,av as l,I as R,F as $,g as b,h as P,i as z,r as N,f as G,w as q,C,b as S,s as J}from"./index-CbeY2LTE.js";import{O as f,o as k,s as O,j as w,M as B,m as _,P as D,p as A,k as I,T as Q,l as m,q as g,t as X,v as Y,g as Z}from"./pibody-BFJfCPE0.js";const Ee={getSteps:E,createStep:ee,getStepByID:te,updateStepByID:se,deleteStepByID:oe,getStepTranslationByID:ne,updateStepTranslationByID:ae,getProjectStepsByID:re,linkStepToProjectByID:ce,getModuleStepsByID:le,linkStepToModuleByID:de,uploadFile:ie,uploadImage:ue,changeStepsOrder:me};async function E(){try{return await i.get("/steps")}catch(e){throw console.log(e),e}}async function ee(e){try{return await i.post("/step",{last_edited_by:0,step_type:e,access_type:"freemium",skip_submit:!1})}catch(s){throw console.log(s),s}}async function te(e){try{return await i.get(`/step/${e}`)}catch(s){throw console.log(s),s}}async function se(e,s,c,u){try{return await i.put(`/step/${e}`,{access_type:s,skip_submit:c,step_type:u})}catch(d){throw console.log(d),d}}async function oe(e){try{return await i.delete(`/step/${e}`)}catch(s){throw console.log(s),s}}async function ne(e){try{return await i.get(`/step/${e}/translation`)}catch(s){throw console.log(s),s}}async function ae(e,s,c){try{return await i.put(`/step/${e}/translation`,{content:c,name:s})}catch(u){throw console.log(u),u}}async function re(e){try{return await i.get(`/project/${e}/steps`)}catch(s){throw console.log(s),s}}async function ce(e,s){try{return await i.post(`/project/${e}/step/${s}/link`)}catch(c){throw console.log(c),c}}async function le(e){try{return await i.get(`/module/${e}/steps`)}catch(s){throw console.log(s),s}}async function de(e,s){try{return await i.post(`/module/${e}/step/${s}/link`)}catch(c){throw console.log(c),c}}async function ie(e){try{return await i.post("/upload-file",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){throw console.log(s),s}}async function ue(e,s){try{return await i.post(`/upload-image?preview=${s}`,e,{headers:{"Content-Type":"multipart/form-data"}})}catch(c){throw console.log(c),c}}async function me(e){try{return await i.patch("/steps/order",{order:e})}catch(s){throw console.log(s),s}}const ge={key:0,class:"text-nowrap"},xe={key:0,class:"text-white"},ye={key:1,class:"text-white"},fe={key:2,class:"text-white"},he={key:3,class:"text-white"},ve={key:4,class:"text-white"},ke={key:5,class:"text-black w-full"},we={class:"text-center font-mono px-1 text-white bg-black"},be={key:6,class:"text-black w-full"},pe={class:"text-center font-mono px-1 text-white bg-black"},$e={key:7,class:"text-black w-full p-3"},Pe={key:8,class:"text-white w-full"},qe={key:9,class:"text-white w-full"},Ce={key:10,class:"text-white w-full"},Se={key:11,class:"text-white w-full"},Ie={key:12,class:"text-black w-full"},Be={key:1,class:"text-center p-3"},U=T({__name:"FeedbackNode",props:{message:{type:Object,required:!0}},setup(e){return(s,c)=>e.message?(a(),r("div",ge,[e.message.command===t(f).PinSetValue?(a(),r("div",xe,[o("div",{style:l({background:t(k)}),class:"text-center font-mono px-1"},"Pin "+n(e.message.request.pin)+" set value",5),o("div",{style:l(t(w)(e.message.request.value)),class:"text-center font-mono px-1"}," Value "+n(t(O)(e.message.request.value)),5)])):e.message.command===t(f).PinSetMode?(a(),r("div",ye,[o("div",{style:l({background:t(k)}),class:"text-center font-mono px-1"},"Pin "+n(e.message.request.pin)+" set mode",5),o("div",{style:l({background:t(_)[e.message.request.mode]}),class:"text-center font-mono px-1"}," Mode "+n(t(B)[e.message.request.mode]),5)])):e.message.command===t(f).PinSetPull?(a(),r("div",fe,[o("div",{style:l({background:t(k)}),class:"text-center font-mono px-1"},"Pin "+n(e.message.request.pin)+" set pull",5),o("div",{style:l({background:t(A)[e.message.request.pull]}),class:"text-center font-mono px-1"}," Pull "+n(t(D)[e.message.request.pull]),5)])):e.message.command===t(f).PwmDutyU16?(a(),r("div",he,[o("div",{style:l({background:t(k)}),class:"text-center font-mono px-1"},"PWM "+n(e.message.request.pin)+" set duty",5),o("div",{style:l(t(w)(e.message.request.duty_u16/t(I))),class:"text-center font-mono px-1"}," u16 "+n(e.message.request.duty_u16),5)])):e.message.command===t(f).PwmFreq?(a(),r("div",ve,[o("div",{style:l({background:t(k)}),class:"text-center font-mono px-1"},"PWM "+n(e.message.request.pin)+" set freq",5),o("div",{style:l(t(w)(e.message.request.freq/t(I))),class:"text-center font-mono px-1"}," Freq "+n(e.message.request.freq),5)])):e.message.command===t(f).Output?(a(),r("div",ke,[c[0]||(c[0]=o("div",{class:"text-center px-1"},"Print",-1)),o("div",we,n(e.message.request.output),1)])):e.message.command===t(f).Sleep?(a(),r("div",be,[c[1]||(c[1]=o("div",{class:"text-center px-1"},"Sleep",-1)),o("div",pe,n(e.message.request.time_ms)+" ms",1)])):e.message.command===t(Q).Timeout?(a(),r("div",$e," Timeout ")):e.message.command===t(m).PinGetValue?(a(),r("div",Pe,[o("div",{style:l({background:t(g)}),class:"text-center font-mono px-1"},"Pin "+n(e.message.request.pin)+" get value",5),o("div",{style:l(t(w)(e.message.result)),class:"text-center font-mono px-1"}," Value "+n(t(O)(e.message.result)),5)])):e.message.command===t(m).PinGetMode?(a(),r("div",qe,[o("div",{style:l({background:t(g)}),class:"text-center font-mono px-1"},"Pin "+n(e.message.request.pin)+" get mode",5),o("div",{style:l({background:t(_)[e.message.result]}),class:"text-center font-mono px-1"}," Mode "+n(t(B)[e.message.result]),5)])):e.message.command===t(m).PinGetPull?(a(),r("div",Ce,[o("div",{style:l({background:t(g)}),class:"text-center font-mono px-1"},"Pin "+n(e.message.request.pin)+" get pull",5),o("div",{style:l({background:t(A)[e.message.result]}),class:"text-center font-mono px-1"}," Pull "+n(t(D)[e.message.result]),5)])):e.message.command===t(m).AdcReadU16?(a(),r("div",Se,[o("div",{style:l({background:t(g)}),class:"text-center font-mono px-1"},"ADC "+n(e.message.request.pin)+" read",5),o("div",{style:l(t(w)(e.message.result/t(I))),class:"text-center font-mono px-1"}," u16 "+n(e.message.result),5)])):(a(),r("div",Ie," Todo: "+n(e.message.command),1))])):(a(),r("div",Be," Nothing "))}}),De={class:"flex-col overflow-auto"},Te={class:"flex"},Me={key:0,class:"flex text-white border-2 border-blue-500"},Ve={class:"text-black text-nowrap"},je={key:1,class:"flex text-white border-2 border-blue-500"},Fe={class:"text-black text-nowrap"},Ne={key:2,class:"flex text-white border-2 border-blue-500"},Ge={class:"text-black text-nowrap"},Oe={key:3,class:"flex text-white border-2 border-blue-500"},_e={class:"text-black text-nowrap"},Ae={key:4,class:"flex text-black border-2 border-blue-500"},Ue=T({__name:"Inputs",props:{inputs:{}},setup(e){const s=R(()=>{const c=[];for(let[u,d]of e.inputs){const x=X(u);c.push({...x,result:d})}return c});return(c,u)=>(a(),r($,null,[s.value.length===0?(a(),r($,{key:0},[b("Nothing")],64)):P("",!0),o("div",De,[(a(!0),r($,null,z(s.value,d=>(a(),r("div",Te,[d.command===t(m).PinGetValue?(a(),r("div",Me,[o("div",{style:l({background:t(g)}),class:"text-center text-nowrap font-mono px-1"},"Pin "+n(d.request.pin)+" get values:",5),o("div",Ve,n(d.result),1)])):d.command===t(m).PinGetMode?(a(),r("div",je,[o("div",{style:l({background:t(g)}),class:"text-center text-nowrap font-mono px-1"},"Pin "+n(d.request.pin)+" get values:",5),o("div",Fe,n(d.result.map(x=>t(B)[x])),1)])):d.command===t(m).PinGetPull?(a(),r("div",Ne,[o("div",{style:l({background:t(g)}),class:"text-center text-nowrap font-mono px-1"},"Pin "+n(d.request.pin)+" get values:",5),o("div",Ge,n(d.result.map(x=>t(D)[x])),1)])):d.command===t(m).AdcReadU16?(a(),r("div",Oe,[o("div",{style:l({background:t(g)}),class:"text-center text-nowrap font-mono px-1"},"ADC "+n(d.request.pin)+" read u16:",5),o("div",_e,n(d.result),1)])):(a(),r("div",Ae,"TODO: "+n(d.command),1))]))),256))])],64))}}),Re={class:"flex items-center gap-2"},ze={class:"font-bold"},Le={class:"flex"},We=["onClick"],Ke={class:"text-center"},He={key:0,class:"text-center"},Je={key:0,class:"flex items-center justify-center h-20"},et=T({__name:"FeedbackTimeline",props:{code:{},success:{type:Boolean},message:{},feedback:{},replayed:{},expected:{}},setup(e){const s=e,{selectNode:c,selectedIndex:u,firstError:d}=Y(s),x=R(()=>Z(s.replayed)),L=N(null),M=N([]);return(v,h)=>{const W=J,K=H;return a(),G(K,null,{header:q(()=>[o("div",Re,[o("div",ze,n(v.$t("result")),1),s.success===!1?(a(),G(W,{key:0,severity:"danger",onClick:h[0]||(h[0]=y=>t(d)(M.value))},{default:q(()=>[b(n(v.$t("first error")),1)]),_:1})):P("",!0)])]),default:q(()=>[o("div",{ref_key:"scrollContainer",ref:L,class:"flex overflow-auto mb-2"},[(a(!0),r($,null,z(s.feedback,(y,p)=>{var V,j;return a(),r("div",Le,[o("button",{class:C(["flex",t(u)===p?"border border-blue-500":""]),onClick:F=>t(c)(p),ref_for:!0,ref:F=>M.value[p]=F},[o("div",Ke,[b(n(y.correct?v.$t("correct"):v.$t("incorrect"))+" ",1),S(U,{message:(V=y.replayed)==null?void 0:V.content,class:C(["border-4 rounded-md",y.correct?"border-green-500":"border-red-500"])},null,8,["message","class"])]),y.correct?P("",!0):(a(),r("div",He,[h[1]||(h[1]=b(n("Expected")+" ")),S(U,{message:(j=y.expected)==null?void 0:j.content,class:C(["border-4 rounded-md",y.correct?"border-red-500":"border-green-500"])},null,8,["message","class"])]))],10,We),p+1<v.feedback.length?(a(),r("div",Je,"â†’")):P("",!0)])}),256))],512),h[2]||(h[2]=b(" Input used: ")),S(Ue,{inputs:x.value},null,8,["inputs"])]),_:1})}}});export{et as _,Ee as a,U as b,Ue as c};
