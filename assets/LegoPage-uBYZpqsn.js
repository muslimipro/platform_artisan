import{s as M}from"./index-DxreOj_-.js";import{s as B}from"./index-6yMZBmiP.js";import{s as N}from"./index-BTDNugzB.js";import{s as S}from"./index-CRpkS1LV.js";import{_ as V}from"./AHeader.vue_vue_type_script_setup_true_lang-BMazajcS.js";import{_ as C}from"./ProjectCard.vue_vue_type_script_setup_true_lang-DWVWx0pc.js";import{a as E}from"./index-C4NEx2iH.js";import{t as F}from"./types-81Qs7ZwA.js";import{a as T,a0 as A,r as u,o as I,E as K,c as O,b as t,e as r,f as d,F as c,k as a,w as y,D as w,t as k,K as p,n as R,i as f}from"./index-CTzBRDkF.js";import"./index-UttTpJwS.js";import"./index-CdRm71bP.js";import"./logo-D1-3uCnC.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-C7fWNxxH.js";import"./index-DMNQpKnn.js";import"./index-_kVx5MDE.js";import"./index-DyBaiWfq.js";import"./index-C7LZT1XK.js";import"./index-DpB8_Bbd.js";import"./StudentViewToggle.vue_vue_type_script_setup_true_lang-DS2wS4mh.js";import"./index-rgxuwZLN.js";import"./index-CEAmV3E1.js";import"./index-CWSLGCMt.js";import"./index-UsbyYHd9.js";import"./http-C6s3B4Yp.js";import"./profile-DWsORrUX.js";import"./index-B2qWy8WJ.js";import"./index-BRe_uFw9.js";import"./pibody-BwAjMvHk.js";const q={class:"flex flex-col min-h-screen bg-slate-50"},G={key:0,class:"flex px-4 sm:px-12"},H={key:1,class:"flex px-4 sm:px-12"},J={key:3,class:"flex px-4 sm:px-12"},Q={key:4,class:"flex flex-wrap justify-center gap-8 px-4 sm:px-12 pb-8"},be=T({__name:"LegoPage",setup(U){const{locale:L}=A(),b=u([]),g=u([]),h=u([]),_=u([0,0,0,0,0,0]),v=u([0,0,0,0,0,0]),m=u(!1);async function x(){if(!m.value){m.value=!0;try{const{data:i}=await E.getProjects();m.value=!1,b.value=[],g.value=[],h.value=[],_.value=[0,0,0,0,0,0],v.value=[0,0,0,0,0,0];for(const o of i)o.lego&&(o.is_guidable?_.value[o.layer]++:v.value[o.layer]++);for(const o of i){if(!o.lego)continue;const l=await F(o);o.layer>0&&b.value.push(l),l.is_guidable?g.value.push(l):h.value.push(l)}}catch(i){console.log(i)}finally{m.value=!1}}}I(x),K(L,x);const P=O(()=>{const i=new Map,o=new Map;for(const e of g.value)i.has(e.layer)||i.set(e.layer,[]),i.get(e.layer).push(e);for(const e of h.value)o.has(e.layer)||o.set(e.layer,[]),o.get(e.layer).push(e);const l=[];for(let e=1;e<=5;e++)l.push({id:e,guided:i.get(e)||[],unguided:o.get(e)||[]});return l}),z=["secondary","success","info","warn","danger","contrast"];return(i,o)=>{const l=S,e=N,j=B,$=M;return t(),r("div",q,[d(V,{class:"sticky top-0 z-10 mb-4"}),(t(!0),r(c,null,a(P.value,s=>(t(),r("div",{key:s.id,class:"flex flex-col gap-2"},[s.guided.length>0||s.unguided.length>0?(t(),r("div",G,[d(l),d(e,{class:"min-w-fit text-2xl px-4",severity:z[s.id]},{default:y(()=>[w(k(s.id>0?`Level -
          ${s.id-1}`:"Other"),1)]),_:2},1032,["severity"]),d(l)])):p("",!0),s.guided.length>0?(t(),r("div",H,[d(j,{class:"min-w-fit pr-4",size:"small",severity:"success"},{default:y(()=>[w(k(i.$t("pages.projects.learn")),1)]),_:1})])):p("",!0),s.guided.length>0?(t(),r("div",{key:2,class:R(["flex flex-wrap justify-center gap-8 px-4 sm:px-12",{"pb-8":s.unguided.length==0}])},[(t(!0),r(c,null,a(s.guided,n=>(t(),f(C,{key:n.id,project:n,id:n.id,disabled:!["216","217"].includes(n.id)},null,8,["project","id","disabled"]))),128)),(t(!0),r(c,null,a(_.value[s.id]-s.guided.length,n=>(t(),f($,{key:n,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))],2)):p("",!0),s.unguided.length>0?(t(),r("div",J,[d(j,{class:"min-w-fit pr-4",size:"small",severity:"info"},{default:y(()=>[w(k(i.$t("pages.projects.practice")),1)]),_:1})])):p("",!0),s.unguided.length>0?(t(),r("div",Q,[(t(!0),r(c,null,a(s.unguided,n=>(t(),f(C,{key:n.id,project:n,disabled:!["216","217"].includes(n.id),onAfterRemove:x},null,8,["project","disabled"]))),128)),(t(!0),r(c,null,a(v.value[s.id]-s.unguided.length,n=>(t(),f($,{key:n,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))])):p("",!0)]))),128))])}}});export{be as default};
