import{S as io,B as co,D as Qe,E as uo,C as po,F as fo,G as mo,H as vo,T as go,g as Je,M as ho,t as yo,h as _o,w as xo,p as wo,a as bo,b as Po,c as So,d as To,e as Eo,f as Ee,i as qo,j as ko,m as Jt,k as Me,s as qe,l as ke,n as Rn,o as Io,q as Mo,r as $n,u as Ro,v as $o,x as Ao,y as Zt,z as Co,A as Do}from"./index-Bxf354GQ.js";import{r as b,a as N,L as Oo,M as An,b as $,i as lt,g as v,E as H,e as D,O as U,o as Se,t as se,J as L,S as le,Y as Cn,c as j,h as m,F as Ut,k as zt,U as Dn,K as pe,P as Y,V as te,A as ae,Z as Gt,I as On,n as ne,C as He,f as yt,w as en,m as Lo,_ as Fo,s as Ln,$ as Bo}from"./index-C5BusG5M.js";import{b as nt,a as Te}from"./index-DZHBDC13.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Fn,a as Bn}from"./stores-C412quBI.js";const tn=b([]),No=!1;function Nn(){function e(){tn.value=[]}return{highlights:tn,reset:e,disabled:No}}const ei=N({__name:"CodeEditor",props:Oo({disabled:{type:Boolean,default:!1}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=An(e,"modelValue"),o=Nn(),s=io.define(),d=[co.define({create(){return Qe.none},update(a,i){a=a.map(i.changes);for(let f of i.effects)if(f.is(s))if(f.value==null)a=Qe.none;else{const g=i.state.doc.line(f.value.line);a=Qe.set([Qe.line({attributes:{class:"cm-highlight-line",style:`border-width: 2px; border-color: ${f.value.color};`}}).range(g.from)])}return a},provide:a=>uo.decorations.from(a)})],c=[po(),fo(),d,mo.of(vo)],p=b(null);function l(a){p.value=a.view,H(o.highlights,()=>{a.view.dispatch({effects:s.of(null)});for(const i of o.highlights.value)a.view.dispatch({effects:s.of(i)})}),H(n,()=>{o.highlights.value=[]})}return(a,i)=>($(),lt(v(go),{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=f=>n.value=f),placeholder:"Code goes here..",autofocus:!0,"indent-with-tab":!0,"tab-size":4,extensions:c,onReady:l,style:{width:"100%"},disabled:t.disabled},null,8,["modelValue","disabled"]))}}),Uo="/assets/buzzer-Dl6pLH91.jpg";var M=(e=>(e[e.NONE=-1]="NONE",e[e.IN=0]="IN",e[e.OUT=1]="OUT",e[e.ANALOG=5]="ANALOG",e[e.PWM=6]="PWM",e))(M||{}),fe=(e=>(e[e.NONE=-1]="NONE",e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e))(fe||{});function Re(e){return e===0||e===5}function zo(e){return e!==0&&e!==5}function $t(e){return e===1||e===6}function Ze(e,t,n=-1){return{value:0,freq:0,mode:t,id:e,pull:n}}function nn(e){return e===0?1:e===1?0:Math.random()}const on={id:-1,value:0,freq:0,mode:0,pull:-1},ti="rgb(87,176,54)",ni="rgb(254, 116, 25)",Z="rgb(0,159,217)",_t="rgb(0,129,55)",Un=65535,oi={0:{name:"GP0",able:[{color:Z,name:"I2C0 SDA"}]},1:{name:"GP1",able:[{color:Z,name:"I2C0 SCL"}]},2:{name:"GP2",able:[{color:Z,name:"I2C1 SDA"}]},3:{name:"GP3",able:[{color:Z,name:"I2C1 SCL"}]},28:{name:"GP28",able:[{color:_t,name:"ADC2"}]},22:{name:"GP22",able:[]},4:{name:"GP4",able:[{color:Z,name:"I2C0 SDA"}]},5:{name:"GP5",able:[{color:Z,name:"I2C0 SCL"}]},6:{name:"GP6",able:[{color:Z,name:"I2C1 SDA"}]},7:{name:"GP7",able:[{color:Z,name:"I2C1 SCL"}]},26:{name:"GP26",able:[{color:_t,name:"ADC1"},{color:Z,name:"I2C1 SDA"}]},27:{name:"GP27",able:[{color:_t,name:"ADC0"},{color:Z,name:"I2C1 SCL"}]}},si={[-1]:"rgb(0,2,253)",0:"rgb(254,101,0)",1:"rgb(1,169,0)",5:"rgb(254,101,0)",6:"rgb(1,169,0)"},ri={[-1]:"rgb(0,2,253)",0:"rgb(0,2,253)",1:"rgb(0,2,253)"};function li(e,t){let n=e.value.toFixed(2);return Re(e.mode)&&zo(t.mode)?n="~":Re(e.mode)&&Re(t.mode)&&(n=t.value.toFixed(2)),n}function ai(e){return e.toFixed(2)}function ii(e,t){let n=e.value;return Re(e.mode)&&$t(t.mode)?n=0:Re(e.mode)&&Re(t.mode)&&(n=t.value),{background:`rgb(${255*n}, 0, 0)`}}function ci(e){return{background:`rgb(${255*e}, 0, 0)`}}const zn=N({type:"",params:{},__name:"Module",props:{id:{}},setup(e){return J(e.id),(t,n)=>($(),D("div"))}}),Go=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));function jo(e){return{address:e,read:()=>{},write:()=>{}}}function he(e,t,n){let o=Math.round(n);o>32767&&(o=32767),o<-32768&&(o=-32768),e[t+0]=o>>8&255,e[t+1]=o&255}function Ie(e,t,n){let o=Math.round(n);o>65535&&(o=65535),o<0&&(o=0),e[t+0]=o&255,e[t+1]=o>>8&255}function W(e,t,n){let o=Math.round(n);o>32767&&(o=32767),o<-32768&&(o=-32768),e[t+0]=o&255,e[t+1]=o>>8&255}function ue(e,t,n){let o=Math.round(n);o>255&&(o=255),o<0&&(o=0),e[t]=o&255}function xt(e,t,n){let o=Math.round(n);o>127&&(o=127),o<-128&&(o=-128),e[t]=o&255}function Gn(e,t,n){let o=Math.round(n);o>65535&&(o=65535),o<0&&(o=0),e[t+0]=o>>>8&255,e[t+1]=o&255}function sn(e,t,n){let o=Math.round(n);o>16777215&&(o=16777215),o<0&&(o=0),e[t+0]=o>>>16&255,e[t+1]=o>>>8&255,e[t+2]=o&255}const Vo=["climate-sensor","gyro-accel","color-sensor","distance-sensor"];function ot(e){return Vo.includes(e.type)}const jt=()=>({shortcut:""});let Ho=0;const st=new Map,ut=(e={})=>{const{mode0:t=M.OUT,mode1:n=M.OUT,mode2:o=M.NONE,mode3:s=M.NONE,address:r=0}=e,d=U(Ze(0,t)),c=U(Ze(1,n)),p=U(Ze(2,o)),l=U(Ze(3,s)),a=()=>{d.freq=0,d.value=0,c.freq=0,c.value=0,p.freq=0,p.value=0,l.freq=0,l.value=0},i=Ho++,f={id:i,pin0:d,pin1:c,pin2:p,pin3:l,reset:a,i2c:jo(r)};return st.set(i,f),f},Q={x:0,y:0,w:0,h:0,is:zn,on:-1,style:{},class:"",type:"",dragging:!1,putOn8or9:!1,connector:{},params:jt(),...ut()},J=e=>(st.has(e)||st.set(e,ut()),st.get(e)),Xo=N({__name:"FloatingNote",props:{note:{},loudness:{},x:{},y:{},color:{},fontSize:{}},emits:["remove"],setup(e,{emit:t}){Je.registerPlugin(ho);const n=e,o=t,s=b(null);return Se(()=>{var i;if(!s.value)return;const r=Je.utils.random(-50,50),d=(i=s.value)==null?void 0:i.parentElement,{x:c,y:p}=nt(d),l=n.x-c.value-n.fontSize/2,a=n.y-p.value-n.fontSize/2;Je.set(s.value,{x:l,y:a}),Je.to(s.value,{motionPath:{path:[{x:l,y:a},{x:l+r,y:a-40},{x:l-r,y:a-70}],curviness:1.25},scale:2*n.loudness,opacity:0,duration:2,ease:"power2.out",onComplete:()=>o("remove")})}),(r,d)=>($(),D("div",{ref_key:"noteRef",ref:s,class:"absolute font-bold",style:L({zIndex:"2",color:`rgb(${n.color.r}, ${n.color.g}, ${n.color.b})`,fontSize:n.fontSize+"px"})},se(r.note),5))}}),Yo={ref:"theref"},Wo={class:"rounded-lg overflow-hidden relative"},Ko=["src"],Qo=N({type:"buzzer",params:{mode2:M.OUT},__name:"Buzzer",props:{id:{}},setup(e){const t=J(e.id),{pin2:n}=t,o=b([]);let s=0;function r(x,_){const P=Math.ceil(x),I=Math.floor(_);return Math.floor(Math.random()*(I-P)+P)}const d=(x,_,P,I)=>{o.value.push({id:s++,note:x,loudness:_,color:P,fontSize:I})},c=b(""),p=x=>{o.value=o.value.filter(_=>_.id!==x)};function l(x){if(x<=0)return"";const _=440,P=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],I=Math.round(12*Math.log2(x/_)),k=(I+9)%12,G=Math.floor((I+9)/12)+4;return`${P[k]}${G}`}const a=new AudioContext,i=a.createOscillator(),f=a.createGain();i.type="triangle",i.frequency.value=0,f.gain.value=0,i.connect(f).connect(a.destination),i.start();const g=le("theref"),{x:h,y:F,width:E,height:w}=nt(g),q=b({r:0,g:0,b:0}),S=b(0),y=b(0);H(()=>n.freq,()=>{d(c.value,y.value,q.value,S.value);const x=r(0,256),_=r(0,256),P=255-x;q.value={r:x,g:_,b:P},c.value=l(n.freq),i.frequency.value=n.freq},{immediate:!0}),H(()=>n.value,()=>{y.value=1-4*(n.value-.5)**2,f.gain.value=y.value,S.value=Math.sqrt(y.value)*30},{immediate:!0});const T=b(!1);Se(()=>{T.value=!!document.querySelector("#pibody")}),Cn(()=>{i.stop(),i.disconnect()});const R=j(()=>{var _;const{x}=nt((_=g.value)==null?void 0:_.parentElement);return h.value-x.value}),A=j(()=>{var _;const{y:x}=nt((_=g.value)==null?void 0:_.parentElement);return F.value-x.value});return(x,_)=>($(),D("div",Yo,[m("div",Wo,[m("img",{src:v(Uo),alt:"Buzzer"},null,8,Ko),m("div",{class:"absolute text-blue-500 -translate-x-1/2 -translate-y-1/2",style:L({left:v(E)/2+"px",top:v(w)/2+"px",fontSize:S.value+"px",color:`rgb(${q.value.r}, ${q.value.g}, ${q.value.b})`})},se(c.value),5)]),T.value?($(),lt(Dn,{key:0,to:"#pibody"},[($(!0),D(Ut,null,zt(o.value,P=>($(),lt(Xo,{key:P.id,note:P.note,loudness:P.loudness,color:P.color,fontSize:P.fontSize,x:R.value+v(E)/2,y:A.value+v(w)/2,onRemove:I=>p(P.id)},null,8,["note","loudness","color","fontSize","x","y","onRemove"]))),128))])):pe("",!0)],512))}}),Jo=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),Zo="/assets/climate_sensor-werWdoYS.jpg";function wt(e,t){e.x+=t.x,e.y+=t.y}function Ge(e,t){e.x-=t.x,e.y-=t.y}function $e(e,t,n){e.x=Math.min(Math.max(e.x,t.x),n.x),e.y=Math.min(Math.max(e.y,t.y),n.y)}function es(e,t){const n=Math.max(0,Math.min(e.x+e.w,t.x+t.w)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.h,t.y+t.h)-Math.max(e.y,t.y));return n*o}function At(e){const{left:t,top:n,width:o,height:s}=e.getBoundingClientRect();return{x:t,y:n,w:o,h:s}}function at(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function be(e){return{left:e.x+"px",top:e.y+"px",width:e.w+"px",height:e.h+"px"}}function ts(e){return{width:e.w+"px",height:e.h+"px"}}function ns(e){return{left:e.x+"px",top:e.y+"px"}}function rn(e,t){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o}function Ce(e){const t=document.getElementById(e),n={x:0,y:0,w:0,h:0};if(t){const{top:o,left:s,width:r,height:d}=t.getBoundingClientRect(),c=t.clientTop,p=t.clientLeft;n.x=s+p-t.scrollLeft,n.y=o+c-t.scrollTop,n.w=r+t.scrollLeft,n.h=d+t.scrollTop}return n}function je(e){const t=document.getElementById("emulator");if(t){const{top:n,left:o}=t.getBoundingClientRect(),s=t.clientTop,r=t.clientLeft;e.x-=o+r-t.scrollLeft,e.y-=n+s-t.scrollTop}}function ln(e,t,n=200){const o={...e},s=performance.now();function r(d){const c=Math.min((d-s)/n,1),p=c<.5?2*c*c:-1+(4-2*c)*c;e.x=o.x+(t.x-o.x)*p,e.y=o.y+(t.y-o.y)*p,e.w=o.w+(t.w-o.w)*p,e.h=o.h+(t.h-o.h)*p,c<1&&requestAnimationFrame(r)}requestAnimationFrame(r)}const os={ref:"theref"},ss={class:"rounded-lg overflow-hidden relative"},rs=["src"],ls=["src"],as=["src"],is=["src"],cs=["src"],us=["src"],ds={class:"absolute bottom-0 left-0 flex items-center cursor-ew-resize"},ps=136,fs=138,ms=140,vs=142,gs=144,hs=146,ys=148,_s=150,xs=152,ws=154,bs=156,Ps=158,Ss=161,Ts=225,Es=227,qs=228,ks=229,Is=230,Ms=231,Rs=247,$s=250,As=253,Ne=28236,bt=26415,et=50,an=36692,cn=10648,un=3024,dn=7839,pn=105,fn=7,mn=11700,vn=11800,gn=5e3,hn=75,yn=368,_n=0,Pt=304,St=50,xn=30,wn=22,Cs=4,Ds=N({type:"climate-sensor",params:{mode2:M.IN,mode3:M.IN,address:118},__name:"ClimateSensor",props:{x:{},y:{},w:{},h:{},on:{},type:{},putOn8or9:{type:Boolean},dragging:{type:Boolean},connector:{},params:{},id:{},pin0:{},pin1:{},pin2:{},pin3:{},reset:{type:Function},i2c:{}},setup(e){const{isOutside:t}=Te(le("theref")),n=e,o=new Uint8Array(255);Ie(o,ps,Ne),W(o,fs,bt),W(o,ms,et),Ie(o,vs,an),W(o,gs,cn),W(o,hs,un),W(o,ys,dn),W(o,_s,pn),W(o,xs,fn),W(o,ws,mn),W(o,bs,vn),W(o,Ps,gn),ue(o,Ss,hn),W(o,Ts,yn),ue(o,Es,_n),xt(o,qs,Pt>>>4&255),ue(o,ks,Pt&15|(St&15)<<4),xt(o,Is,St>>>4&255),xt(o,Ms,xn);const s={x:50,y:26,w:30,h:30},r=b(0),d=b(0),c=b(0);let p=0;function l(x){p=(x*100*256-128)/5;const _=et/4096/16384/256,P=bt/8/2048-et*Ne/8/4096/16384,I=et*Ne*Ne/4096/16384-bt*Ne/1024-p,k=P*P-4*_*I,G=(-P+Math.sqrt(k))/(2*_);return Math.round(G)}function a(x){x=x*256;const _=BigInt(Math.round(p))-128000n,I=_*_*BigInt(fn)+_*BigInt(pn)*131071n,k=Number(BigInt(I)+(BigInt(dn)<<35n)),G=_*_*BigInt(un)/256n+_*BigInt(cn)*4096n,ie=Number(((1n<<47n)+G)*BigInt(an)>>33n),Ye=gn/0x8000000000000,Be=vn/524288+1,gt=(x-16*mn)*256,ht=Be*Be-4*Ye*gt;return(1048576-((-Be+Math.sqrt(ht))/(2*Ye)*ie/3125+k))/2147483648}function i(x){const _=p-76800,P=(x<<14)-(Pt<<20)-St*_+16384>>15;let I=(_*xn>>10)*((_*_n>>11)+32768)>>10;I=(I+2097152)*yn+8192>>14;let k=P*I;const G=((k>>15)*(k>>15)>>7)*hn>>4;return k=k-G,k<0&&(k=0),k>419430400&&(k=419430400),k>>12}function f(x){const _=Math.round(x*1024);let P=0,I=65535;for(;P<I;){const k=P+I>>>1;i(k)<_?P=k+1:I=k}return P}n.i2c.read=(x,_,P)=>{const I=l(r.value*12+21);sn(o,$s,I*16);const k=a((1-c.value)*2e4+79e3);sn(o,Rs,k*16);const G=f(d.value*100);Gn(o,As,G);for(let ie=0;ie<P;ie++)x[ie]=o[_+ie]};const g=b(0),h=j({get(){return g.value===0?r.value:g.value===1?d.value:c.value},set(x){g.value===0?r.value=x:g.value===1?d.value=x:c.value=x}}),F=()=>{g.value++,g.value>2&&(g.value=0)},E=j(()=>r.value*wn),w=j(()=>({height:`${E.value}px`,bottom:`${Cs}px`})),q=j(()=>d.value*wn),S=j(()=>({height:`${q.value}px`,bottom:"2px"})),y=j(()=>({transform:`rotate(${c.value*.75+.5}turn)`,transformOrigin:"4px 9.5px"})),T=b(!1),R=()=>{T.value=!1},A=()=>{T.value=!0};return(x,_)=>($(),D("div",os,[m("div",ss,[m("img",{src:v(Zo),alt:"climate sensor"},null,8,rs),Y(m("div",{class:"absolute cursor-pointer",style:L(v(be)(s)),onPointerdown:F},[m("img",{src:v(yo),alt:"shows temperature",class:"w-[15px]"},null,8,ls),_[1]||(_[1]=m("div",{class:"absolute top-[21px] left-[3px] w-[8px] h-[8px] bg-red-500 rounded-full"},null,-1)),m("div",{class:"absolute left-[5px] w-[4px] bg-red-500",style:L(w.value)},null,4)],36),[[te,g.value==0]]),Y(m("div",{class:"absolute cursor-pointer",style:L(v(be)(s)),onPointerdown:F},[m("img",{src:v(_o),alt:"shows humidity",class:"absolute w-[20px] top-1 -left-[2px]"},null,8,as),m("div",{class:"absolute w-20 overflow-hidden left-[1.3px]",style:L(S.value)},[m("img",{class:"absolute bottom-0 w-[13px]",src:v(xo),alt:"shows humidity level"},null,8,is)],4)],36),[[te,g.value==1]]),Y(m("div",{class:"absolute cursor-pointer",style:L(v(be)(s)),onPointerdown:F},[m("img",{src:v(wo),alt:"pressure base",class:"absolute top-1 -left-1 w-[25px]"},null,8,cs),m("img",{src:v(bo),alt:"pressure arrow",class:"absolute top-[7px] left-[4px] w-[13px]",style:L(y.value)},null,12,us)],36),[[te,g.value==2]]),Y(m("div",ds,[Y(m("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":_[0]||(_[0]=P=>h.value=P),class:"w-full cursor-ew-resize",onPointerdown:ae(A,["stop"]),onPointerup:R,onPointercancel:R},null,544),[[Gt,h.value,void 0,{number:!0}]])],512),[[te,!v(t)||T.value]])])],512))}}),Os=Object.freeze(Object.defineProperty({__proto__:null,default:Ds},Symbol.toStringTag,{value:"Module"})),Ls="/assets/color_sensor-DwtQkxue.jpg";function bn(e){return{background:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}}function jn(e=5e3){const t=b(!1);let n=null;const o=()=>{n=setTimeout(()=>{t.value=!0},e)},s=()=>{n&&clearTimeout(n),t.value=!1};return Se(()=>{o()}),On(()=>{n&&clearTimeout(n)}),{isHint:t,stopHint:s}}const Fs={ref:"theref"},Bs={class:"relative"},Ns={class:"overflow-hidden w-20 h-20 rounded-xl"},Us=["src"],zs=["src"],Gs={class:"absolute left-[1px] -top-[9px]"},js=["src"],Vs=8,Hs=9,Xs=10,Ys=11,ye=3,Tt=10,Pn=14,Ws=N({type:"color-sensor",params:{mode2:M.IN,mode3:M.IN,address:16},__name:"ColorSensor",props:{x:{},y:{},w:{},h:{},on:{},type:{},putOn8or9:{type:Boolean},dragging:{type:Boolean},connector:{},params:{},id:{},pin0:{},pin1:{},pin2:{},pin3:{},reset:{type:Function},i2c:{}},setup(e){const t=e;t.i2c.read=(E,w,q)=>{const S=p.value.r,y=p.value.g,T=p.value.b,R=(S+y+T)/3;switch(w){case Vs:q==1&&ue(E,0,S*256),Ie(E,0,S*256);break;case Hs:q==1&&ue(E,0,S*256),Ie(E,0,y*256);break;case Xs:q==1&&ue(E,0,S*256),Ie(E,0,T*256);break;case Ys:q==1&&ue(E,0,S*256),Ie(E,0,R*256);break}};const n={x:44,y:35},o=U({x:44,y:35,w:25,h:25}),s=le("pickerRef"),r=b(!1);H(r,()=>{const E=document.getElementById("pibody");E&&(r.value?E.style.cursor="none":E.style.cursor="auto")});const{isHint:d,stopHint:c}=jn(),p=b({r:0,g:0,b:0,a:255}),l=b(null);function a(E,w,q,S){const y=4*(q+S*w),T=E[y],R=E[y+1],A=E[y+2],x=E[y+3];return{r:T,g:R,b:A,a:x}}const i=2*ye+1,f=i*(Tt+1)+2,g=b(Array(i*i)),h=U({x:10,y:10});function F(E){if(t.on===-1)return;E.stopPropagation(),r.value=!0;const w=Ce("pibody");c();const q=E.clientX-o.x,S=E.clientY-o.y,y={x:o.x,y:o.y},T=b();let R=1,A=w.w;if(l.value){const P=At(l.value),I=k=>k===s.value;Po(l.value,{logging:!1,ignoreElements:I}).then(k=>{R=k.width/P.w,A=k.width;const G=k.getContext("2d",{willReadFrequently:!0});G&&(T.value=G.getImageData(0,0,k.width,k.height).data)}).catch(k=>{console.error("Error capturing page:",k)})}const x=P=>{const I={x:0,y:0};l.value&&(I.x=l.value.scrollLeft,I.y=l.value.scrollTop);const k={x:I.x,y:I.y},G={x:w.w-o.w,y:w.h-o.h};o.x=P.clientX-q,o.y=P.clientY-S,$e(o,k,G);let ie=7/8*2*Math.PI,Ye=Math.cos(ie),Be=Math.sin(ie);if(h.x=Pn*Ye,h.y=Pn*Be,T.value){const gt=Math.round((o.x-1-I.x)*R),ht=Math.round((o.y+o.h-I.y)*R);for(let We=-ye;We<=ye;We++)for(let Ke=-ye;Ke<=ye;Ke++){const lo=a(T.value,Math.round(A),gt+Ke,ht+We),ao=Ke+ye+(We+ye)*i;g.value[ao]=lo}const{r:Kt,g:Qt,b:ro}=g.value[(g.value.length-1)/2];p.value={r:Kt,g:Qt,b:ro,a:255}}},_=()=>{r.value=!1,o.x=y.x,o.y=y.y,document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",_)};document.addEventListener("pointermove",x),document.addEventListener("pointerup",_)}return H([()=>t.x,()=>t.y],()=>{t.on!==-1&&(o.x=t.x+n.x,o.y=t.y+n.y)}),Se(()=>{l.value=document.getElementById("pibody")}),(E,w)=>($(),D("div",Fs,[m("div",Bs,[m("div",Ns,[m("img",{src:v(Ls),alt:"color sensor"},null,8,Us)]),($(),lt(Dn,{to:l.value?t.dragging?"#emulator":"#pibody":"body"},[Y(m("div",{ref_key:"pickerRef",ref:s,class:ne(["absolute z-20 cursor-move",{wiggle:v(d)&&t.on!==-1,"cursor-none":r.value}]),style:L([v(be)(o)]),onPointerdown:[F,w[0]||(w[0]=ae(q=>q.preventDefault(),["prevent"]))]},[Y(m("img",{src:v(So),class:"absolute -left-[11px] top-[15px]"},null,8,zs),[[te,r.value]]),m("div",Gs,[m("img",{src:v(To),alt:"Color picker for color sensor",class:ne({wiggle:v(d)&&t.on!==-1})},null,10,js),m("div",{class:"polygon absolute left-0 bottom-0 w-[11px] h-[9px]",style:L([v(bn)(p.value)])},null,4)]),Y(m("div",{class:"grid gap-px rounded-full overflow-hidden border-2 border-black bg-gray-500 absolute",style:L([{gridTemplateRows:`repeat(${i}, 1fr)`,gridTemplateColumns:`repeat(${i}, 1fr)`,width:f+"px"},v(ns)(h)])},[($(!0),D(Ut,null,zt(g.value,(q,S)=>($(),D("div",{style:L([v(bn)(q??{r:0,g:0,b:0}),v(ts)({w:Tt,h:Tt})]),class:ne({"outline outline-1 outline-red-500":g.value.length-1===2*S})},null,6))),256))],4),[[te,r.value]])],38),[[te,t.on!==-1]])],8,["to"]))])],512))}}),Ks=Le(Ws,[["__scopeId","data-v-9fa9abe3"]]),Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"})),Js="/assets/distance_sensor-D0uHoJZH.jpg",Zs="/assets/distance_sensor_ruler-u7x_6a7O.png",er={ref:"theref"},tr={class:"rounded-lg relative"},nr={class:"overflow-hidden w-20 h-20 rounded-xl"},or=["src"],sr=["src"],rr=19,lr=20,ar=N({type:"distance-sensor",params:{mode2:M.IN,mode3:M.IN,address:41},__name:"DistanceSensor",props:{x:{},y:{},w:{},h:{},on:{},type:{},putOn8or9:{type:Boolean},dragging:{type:Boolean},connector:{},params:{},id:{},pin0:{},pin1:{},pin2:{},pin3:{},reset:{type:Function},i2c:{}},setup(e){const t=e;t.i2c.read=(l,a,i)=>{switch(a){case rr:ue(l,0,7);break;case lr+10:i==1&&ue(l,0,o&255),Gn(l,0,o);break}};const n=U({x:45,y:28,w:25,h:25});let o=0;const s=j(()=>{const l=at(n),a={x:0,y:0,w:0,h:0,angle:0};a.x=t.w/2,a.y=t.h/2;const i=l.x-a.x,f=l.y-a.y;return a.w=Math.sqrt(i*i+f*f),o=a.w/290*95,a.angle=Math.atan2(f,i)/Math.PI/2,a}),r=Ce("pibody"),{isHint:d,stopHint:c}=jn();function p(l){if(t.on===-1)return;l.stopPropagation(),c();const a=l.clientX-n.x,i=l.clientY-n.y,f=h=>{const F={x:-t.x,y:-t.y},E={x:r.w-t.x-n.w,y:r.h-t.y-n.h};n.x=h.clientX-a,n.y=h.clientY-i,$e(n,F,E)},g=()=>{document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",g)};document.addEventListener("pointermove",f),document.addEventListener("pointerup",g)}return H([()=>t.x,()=>t.y],()=>{if(t.on!==-1){const l=Ce("pibody"),a={x:-t.x,y:-t.y},i={x:l.w-t.x-n.w,y:1/0};$e(n,a,i)}}),H(()=>t.on,()=>{const l={x:-t.x,y:-t.y},a={x:r.w-t.x-n.w,y:r.h-t.y-n.h};$e(n,l,a)}),(l,a)=>($(),D("div",er,[m("div",tr,[m("div",nr,[m("img",{src:v(Js),alt:"distance sensor"},null,8,or)]),m("div",{style:L([v(be)(s.value),{transform:`rotate(${s.value.angle}turn)`,pointerEvents:"none","--line-length":s.value.w+"px"}]),class:"absolute border-t-2 border-dashed border-blue-500 origin-top-left cursor-default pulsing-line"},a[1]||(a[1]=[m("div",{class:"pulse"},null,-1)]),4),m("img",{src:v(Zs),alt:"ruler of a distance sensor that sets distance",class:ne(["absolute",{wiggle:v(d)&&t.on!==-1}]),style:L(v(be)(n)),onPointerdown:[p,a[0]||(a[0]=ae(i=>i.preventDefault(),["prevent"]))]},null,46,sr)])],512))}}),ir=Le(ar,[["__scopeId","data-v-d48d839e"]]),cr=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"})),ur="/assets/encoder-BbdKADqm.jpg",dr="/assets/encoder_knob-Du3tJHEr.png",pr={class:"rounded-lg overflow-hidden relative"},fr=["src"],mr=["src"],vr={key:0,class:"absolute bg-blue-500 top-3 left-6 w-1 h-1"},gr={class:"absolute bottom-1 left-[25px] flex items-center"},Sn=1/24,hr=N({type:"encoder",params:{mode2:M.IN,mode3:M.IN},__name:"Encoder",props:{id:{}},setup(e){const t=J(e.id),{pin0:n,pin1:o,pin2:s,pin3:r}=t,d=j(()=>n.value===0&&o.value>0),c=b(0);H(c,()=>{s.value=Math.abs(c.value*96%4)<2?1:0,r.value=Math.abs((c.value*96+95)%4)<2?1:0},{immediate:!0});let p=!1,l=0,a=0,i=0,f=0,g=0,h=null;const F=S=>{if(S.stopPropagation(),S.preventDefault(),f=Math.atan2(S.clientY-a,S.clientX-l)/(2*Math.PI)+1/4,g=c.value,p=!p,S.currentTarget instanceof HTMLElement){const T=S.currentTarget.getBoundingClientRect();l=T.left+T.width/2,a=T.top+T.height/2}window.addEventListener("pointermove",q),window.addEventListener("pointerup",w)},E=()=>{if(!h)return;let S=i-c.value;S>.5&&(S-=1),S<-.5&&(S+=1);const y=.1;Math.abs(S)>.001?(c.value+=S*y,c.value>1&&(c.value-=1),c.value<0&&(c.value+=1),h=requestAnimationFrame(E)):(c.value=i,cancelAnimationFrame(h),h=null)},w=()=>{i=Math.round(c.value/Sn)*Sn,h||(h=requestAnimationFrame(E)),p=!1,window.removeEventListener("pointermove",q),window.removeEventListener("pointerup",w)},q=S=>{if(p){const T=Math.atan2(S.clientY-a,S.clientX-l)/(2*Math.PI)+1/4-f;i=g+T,h||(h=requestAnimationFrame(E))}};return(S,y)=>($(),D("div",null,[m("div",pr,[m("img",{src:v(ur),alt:"Potentiometer"},null,8,fr),m("button",{class:"absolute rounded-full top-3 left-[22px] w-14 h-14",onPointerdown:F},[m("img",{class:"top-0 left-0 w-14 h-14",src:v(dr),style:L(`transform: rotate(${c.value}turn)`)},null,12,mr),d.value?($(),D("div",vr)):pe("",!0)],32),m("div",gr,[m("div",{class:ne(["w-1 h-1 rounded-full",v(s).value?"bg-green-500":"bg-transparent"])},null,2),y[0]||(y[0]=m("div",{class:"w-1 h-1 bg-transparent"},null,-1)),m("div",{class:ne(["w-1 h-1 rounded-full",v(r).value?"bg-green-500":"bg-transparent"])},null,2)])])]))}}),yr=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),_r="/assets/gyro-C3BUot6k.jpg";let xr=5;const wr=`
attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uMVP;
varying vec2 vTexCoord;
void main() {
  gl_Position = uMVP * vec4(aPosition,1.0);
  vTexCoord = aTexCoord;
}`,br=`
precision mediump float;
uniform sampler2D uSampler;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uSampler, vTexCoord);
}`,Pr=new Float32Array([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]),Sr=new Uint16Array(Array.from({length:6},(e,t)=>[4*t+0,4*t+1,4*t+2,4*t+0,4*t+2,4*t+3]).flat()),Tr=[{label:"+X",background:"#ff0000"},{label:"-X",background:"#cc0000"},{label:"+Y",background:"#00ff00"},{label:"-Y",background:"#00cc00"},{label:"+Z",background:"#0000ff"},{label:"-Z",background:"#0000cc"}];let u=null,X=null,Ct,Dt,Vn,Hn,Xn,Ot;function Tn(e,t){if(!u)return null;const n=u.createShader(t);return n?(u.shaderSource(n,e),u.compileShader(n),u.getShaderParameter(n,u.COMPILE_STATUS)?n:(console.error(u.getShaderInfoLog(n)),u.deleteShader(n),null)):null}async function ui(e){for(X=e,await He();X.clientWidth===0||X.clientHeight===0;)await new Promise(r=>setTimeout(r,10));const t=window.devicePixelRatio||1;if(X.width=X.clientWidth*t,X.height=X.clientHeight*t,u=X.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),!u)return null;u.viewport(0,0,X.width,X.height);const n=Tn(wr,u.VERTEX_SHADER),o=Tn(br,u.FRAGMENT_SHADER),s=u.createProgram();return!s||!n||!o?null:(u.attachShader(s,n),u.attachShader(s,o),u.linkProgram(s),u.getProgramParameter(s,u.LINK_STATUS)||console.error(u.getProgramInfoLog(s)),u.useProgram(s),Ct=u.getAttribLocation(s,"aPosition"),Dt=u.getAttribLocation(s,"aTexCoord"),Vn=u.getUniformLocation(s,"uMVP"),Hn=u.getUniformLocation(s,"uSampler"),Xn=Eo(Ee(),Math.PI/4,X.width/X.height,.1,80200),Ot=performance.now(),u)}const Vt=new Map;let En=0;function Er(e){En++;const t=En;if(!u)return null;const n=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,n),u.bufferData(u.ARRAY_BUFFER,e.facePositions,u.STATIC_DRAW);const o=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,o),u.bufferData(u.ARRAY_BUFFER,Pr,u.STATIC_DRAW);const s=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,s),u.bufferData(u.ELEMENT_ARRAY_BUFFER,Sr,u.STATIC_DRAW);const r=Tr.map(c=>{if(!u)return null;const p=256,l=document.createElement("canvas");l.width=l.height=p;const a=l.getContext("2d");a.fillStyle=c.background,a.fillRect(0,0,p,p),a.fillStyle="#000",a.font="bold 128px sans-serif",a.textAlign="center",a.textBaseline="middle",a.fillText(c.label,p/2,p/2);const i=u.createTexture();return u.bindTexture(u.TEXTURE_2D,i),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!0),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,l),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),i}),d={id:t,cube:e,buffers:{pos:n,uv:o,idx:s},textures:r};return Vt.set(t,d),d}function qr(e){Vt.delete(e)}function kr(e){if(!u||!X)return;const t=(e-Ot)/1e3;Ot=e,u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.enable(u.DEPTH_TEST);for(const{cube:n,buffers:o,textures:s}of Vt.values()){n.update(t);const r=At(n.el),d=At(X);Ge(r,d);const c=u.drawingBufferWidth/d.w,p=u.drawingBufferHeight/d.h,l=r.x*c,a=r.y*p,i=r.w*c,f=r.h*p,g=u.drawingBufferHeight-a-f;u.enable(u.SCISSOR_TEST),u.scissor(l,g,i,f),u.viewport(l,g,i,f),u.bindBuffer(u.ARRAY_BUFFER,o.pos),u.enableVertexAttribArray(Ct),u.vertexAttribPointer(Ct,3,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,o.uv),u.enableVertexAttribArray(Dt),u.vertexAttribPointer(Dt,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o.idx);const h=qo(Ee(),Ee(),[0,0,-xr]),F=ko(Ee(),n.orientationQuat),E=Jt(Ee(),h,F),w=Jt(Ee(),Xn,E);u.uniformMatrix4fv(Vn,!1,w);for(let q=0;q<6;q++)u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,s[q]),u.uniform1i(Hn,0),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,q*6*2);u.disable(u.SCISSOR_TEST),u.viewport(0,0,u.drawingBufferWidth,u.drawingBufferHeight)}requestAnimationFrame(kr)}function Ir(e){const t=new Float32Array([1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]);let n=Me(),o=Me();qe(o,[1,0,0],.5),ke(n,o,n),qe(o,[0,1,0],-.5),ke(n,o,n),qe(o,[0,0,1],.5),ke(n,o,n);let s=Rn();function r(l){const a=Io(s);if(a>0){const i=Mo(s);$n(i,i,1/a);const f=a*l,g=qe(Me(),i,f);ke(n,g,n)}}function d(){qr(c.id)}const c={id:0,el:e,facePositions:t,orientationQuat:n,angularVelocity:s,update:r,delete:d,dragging:!1},p=Er(c);return p&&(c.id=p.id),c.id==1&&d(),c}const Mr={ref:"theref"},Rr={class:"rounded-lg overflow-hidden relative"},$r=["src"],qn=.01,Ar=N({type:"gyro-accel",params:{mode2:M.OUT,address:104},__name:"Gyro",props:{x:{},y:{},w:{},h:{},on:{},type:{},putOn8or9:{type:Boolean},dragging:{type:Boolean},connector:{},params:{},id:{},pin0:{},pin1:{},pin2:{},pin3:{},reset:{type:Function},i2c:{}},setup(e){const t=e,n=le("cubeRef");let o;Se(()=>{n.value&&(o=Ir(n.value),t.i2c.read=(h,F,E)=>{switch(F){case 65:he(h,0,-5e3);break;case 59:{const[w,q,S,y]=o.orientationQuat,T=w*w,R=q*q,A=w*S,x=q*S,_=y*w,P=y*q,I=-(2*(A+P))*16384,k=-(2*(x-_))*16384,G=-(1-2*(T+R))*16384;he(h,0,I),he(h,2,k),he(h,4,G)}break;case 67:{const w=o.angularVelocity[0]*131,q=o.angularVelocity[1]*131,S=o.angularVelocity[2]*131;he(h,0,w),he(h,2,q),he(h,4,S)}break}})}),On(()=>{o&&o.delete()});let s={x:0,y:0},r=0,d={x:0,y:0,w:25,h:25},c={x:0,y:0,w:50,h:50},p=U({...d});function l(h){i&&(clearTimeout(i),i=null),o.dragging=!0,s.x=h.clientX,s.y=h.clientY,Ro(o.angularVelocity,0,0,0),ln(p,c),r=performance.now(),window.addEventListener("pointermove",a),window.addEventListener("pointerup",g)}function a(h){if(!o.dragging)return;const F=performance.now(),E=(F-r)/1e3;r=F;const w=h.clientX-s.x,q=h.clientY-s.y;s.x=h.clientX,s.y=h.clientY;const S=qe(Me(),[0,1,0],w*qn),y=qe(Me(),[1,0,0],q*qn),T=ke(Me(),y,S);ke(o.orientationQuat,T,o.orientationQuat);const R=Rn(),A=$o(R,T);Ao(R,R),$n(o.angularVelocity,R,A/E);const x=Zt(10,10,10),_=Zt(-10,-10,-10);Co(o.angularVelocity,x,o.angularVelocity),Do(o.angularVelocity,_,o.angularVelocity)}let i=null,f=2e3;function g(){o.dragging=!1,i||(i=setTimeout(()=>{ln(p,d),i=null},f)),window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",g)}return(h,F)=>($(),D("div",Mr,[m("div",Rr,[m("img",{src:v(_r),alt:"climate sensor"},null,8,$r)]),m("div",{ref:"cubeRef",class:"absolute",style:L(v(be)(v(p))),onPointerdown:ae(l,["stop"]),onPointerup:g,onPointercancel:g},null,36)],512))}}),Cr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Dr={class:"color-picker select-none w-32"},Or={class:"slider-container"},Lr={class:"slider-container"},Fr=N({__name:"ColorPicker",props:{modelValue:{required:!0,default:{r:0,g:0,b:0}},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=An(e,"modelValue"),{h:n,s:o}=a(t.value.r,t.value.g,t.value.b),s=b(n/360),r=b(),d=b(o/100),c=b();let p=!1,l=!1;function a(y,T,R){y/=255,T/=255,R/=255;const A=Math.max(y,T,R),x=Math.min(y,T,R),_=A-x;let P=0;_!==0&&(A===y?P=(T-R)/_%6:A===T?P=(R-y)/_+2:P=(y-T)/_+4,P=Math.round(P*60),P<0&&(P+=360));const I=(A+x)/2,k=_===0?0:_/(1-Math.abs(2*I-1));return{h:P,s:k*100,l:I*100}}function i(y,T,R){y=y*360%360,T/=100,R/=100;const A=(1-Math.abs(2*R-1))*T,x=A*(1-Math.abs(y/60%2-1)),_=R-A/2;let P=0,I=0,k=0;return 0<=y&&y<60?(P=A,I=x,k=0):60<=y&&y<120?(P=x,I=A,k=0):120<=y&&y<180?(P=0,I=A,k=x):180<=y&&y<240?(P=0,I=x,k=A):240<=y&&y<300?(P=x,I=0,k=A):300<=y&&y<=360&&(P=A,I=0,k=x),{r:Math.round((P+_)*255),g:Math.round((I+_)*255),b:Math.round((k+_)*255)}}function f(y,T,R){const A=(1-R+T)/2;let x;return A===0||A===1?x=0:x=(1-R-T)/(1-Math.abs(2*A-1)),{h:y,s:x*100,l:A*100}}const g=j(()=>{const{h:y,s:T,l:R}=f(s.value,1-d.value,0),{r:A,g:x,b:_}=i(y,T,R);return t.value={r:A,g:x,b:_},`hsl(${y}turn, ${T}%, ${R}%)`}),h=y=>{l=!l,E(y),window.addEventListener("pointermove",E),window.addEventListener("pointerup",F)},F=()=>{l=!1,window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",F)},E=y=>{if(l){const T=c.value.getBoundingClientRect(),R=Math.min(T.width,Math.max(0,y.clientX-T.left));d.value=R/T.width}},w=y=>{p=!p,S(y),window.addEventListener("pointermove",S),window.addEventListener("pointerup",q)},q=()=>{p=!1,window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",q)},S=y=>{if(p){const T=r.value.getBoundingClientRect(),R=Math.min(T.width,Math.max(0,y.clientX-T.left));s.value=R/T.width}};return(y,T)=>($(),D("div",Dr,[m("div",Or,[m("div",{class:"hue-slider",style:{background:"linear-gradient(to right, red, yellow, lime, cyan, blue, magenta, red)"},onPointerdown:w,onPointerup:q,onPointermove:S,ref_key:"hueRef",ref:r},[m("div",{class:"slider-handle",style:L({left:`${s.value*100}%`})},null,4)],544)]),m("div",Lr,[m("div",{class:"saturation-slider",style:L({background:`linear-gradient(to right, white, hsl(${s.value}turn, 100%, 50%))`}),onPointerdown:h,onPointerup:F,onPointermove:E,ref_key:"saturationRef",ref:c},[m("div",{class:"slider-handle",style:L({left:`${d.value*100}%`})},null,4)],36)]),Y(m("div",{class:"color-preview",style:L({backgroundColor:`${g.value}`})},null,4),[[te,!1]])]))}}),Br=Le(Fr,[["__scopeId","data-v-9536fbac"]]),Nr="/assets/yellow_led-TydLrbQ8.jpg",Ur={ref:"theref"},zr={class:"rounded-lg overflow-hidden relative"},Gr=["src"],jr={key:1,class:"absolute top-0 left-0"},Vr=N({type:"LED",params:{mode2:M.OUT},__name:"LED",props:{id:{}},setup(e){const{isOutside:t}=Te(le("theref")),n=b({r:0,g:255,b:0}),o=J(e.id),{pin2:s}=o,r=b({visible:!1,toggle:i=>{}});function d(i){r.value.toggle(i)}const c=j(()=>`
0 0 3px 3px rgba(${n.value.r}, ${n.value.g}, ${n.value.b}, ${s.value*.7}),
0 0 5px 5px rgba(${n.value.r}, ${n.value.g}, ${n.value.b}, ${s.value*.5}),
0 0 7px 7px rgba(${n.value.r}, ${n.value.g}, ${n.value.b}, ${s.value*.3})
`),p=j(()=>`radial-gradient(circle, rgb(${n.value.r}, ${n.value.g}, ${n.value.b}) 40%, #000 90%)`),l=j(()=>`rgb(${n.value.r}, ${n.value.g}, ${n.value.b})`),a=j(()=>`rgba(${n.value.r}, ${n.value.g}, ${n.value.b}, 0.7)`);return(i,f)=>{const g=Lo,h=Fo;return $(),D("div",Ur,[m("div",zr,[m("img",{src:v(Nr),alt:"LED"},null,8,Gr),m("div",{class:"absolute top-[10px] left-[30px] rounded-full h-[19px] w-[19px]",style:L({background:l.value})},null,4),m("div",{class:"absolute top-[12px] left-[32px] rounded-full h-[15px] w-[15px]",style:L({background:p.value})},null,4),v(s).value?($(),D("div",{key:0,class:"absolute top-2 left-7 rounded-full h-6 w-6 p-0 border-none absolute top-0 left-0 overflow-hidden",style:L({boxShadow:c.value,background:a.value})},null,4)):pe("",!0),!v(t)||r.value.visible?($(),D("div",jr,[yt(g,{type:"button",class:"w-6 h-6 bg-black",rounded:"",onClick:d,onPointerdown:f[0]||(f[0]=ae(()=>{},["stop"]))},{default:en(()=>f[2]||(f[2]=[m("span",{class:"material-icons"},"palette",-1)])),_:1})])):pe("",!0),yt(h,{ref_key:"colorPicker",ref:r},{default:en(()=>[yt(Br,{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=F=>n.value=F)},null,8,["modelValue"])]),_:1},512)])],512)}}}),Hr=Le(Vr,[["__scopeId","data-v-00dd067b"]]),Xr=Object.freeze(Object.defineProperty({__proto__:null,default:Hr},Symbol.toStringTag,{value:"Module"})),Yr="/assets/led_tower-BgHpljFW.png",Wr={ref:"theref"},Kr={class:"led-tower"},Qr=["src"],Jr=e=>(e.pixels||(e.pixels=b(Array.from({length:8},()=>[0,0,0]))),e.w=30,e.max_length=8,e),Zr={type:"led-tower",params:{mode2:1},pixels:b(Array.from({length:8},()=>[0,0,0])),max_length:8,w:30,extend:Jr},el=N({...Zr,__name:"LedTower",props:{id:{},pixels:{},on:{},dragging:{type:Boolean}},setup(e){const t=b(!1);H(()=>e.dragging,o=>{o||(t.value=!0)});const n=(o,s)=>{try{const r=o||[0,0,0];let[d=0,c=0,p=0]=r;const l=Math.max(d,c,p);if(!l)d=0,c=0,p=0;else{const f=255/l;d=f*d,c=f*c,p=f*p}const a=l/255,i=60.5+s*15.2;return{backgroundColor:d===0&&c===0&&p===0?"transparent":`rgb(${d}, ${c}, ${p})`,boxShadow:a>.1?`
        0 0 2px 2px rgba(${d}, ${c}, ${p}, ${a*.6}),
        0 0 4px 4px rgba(${d}, ${c}, ${p}, ${a*.4}),
        0 0 6px 6px rgba(${d}, ${c}, ${p}, ${a*.2}),
        0 0 6px 6px rgba(0, 0, 0, ${a*.07})
      `:"none",transition:"all 0.1s ease",position:"absolute",left:"14%",top:`${i}px`,width:"7px",height:"7px",borderRadius:"50%",zIndex:2,pointerEvents:"none"}}catch(r){return console.warn("LedTower getPixelStyle error:",r),{position:"absolute",left:"14%",top:"18px",width:"7px",height:"7px",pointerEvents:"none"}}};return(o,s)=>($(),D("div",Wr,[m("div",Kr,[m("img",{src:v(Yr),alt:"LED Tower",class:ne(t.value?"rotate-90":"base-view")},null,10,Qr),($(!0),D(Ut,null,zt(o.pixels,(r,d)=>($(),D("div",{key:d,class:"led-pixel",style:L(n(r,d))},null,4))),128))])],512))}}),tl=Le(el,[["__scopeId","data-v-61033943"]]),nl=Object.freeze(Object.defineProperty({__proto__:null,default:tl},Symbol.toStringTag,{value:"Module"})),ol="/assets/light_sensor-eM0m1ojf.jpg",sl={ref:"theref"},rl={class:"rounded-lg overflow-hidden relative"},ll=["src"],al={class:"absolute bottom-0 left-0 flex items-center cursor-ew-resize"},il=N({type:"light-sensor",params:{mode2:M.IN},__name:"LightSensor",props:{x:{},y:{},w:{},h:{},on:{},type:{},putOn8or9:{type:Boolean},dragging:{type:Boolean},connector:{},params:{},id:{},pin0:{},pin1:{},pin2:{},pin3:{},reset:{type:Function},i2c:{}},setup(e){const t=e,{pin2:n}=t;n.value=1;const{isOutside:o}=Te(le("theref")),s=j(()=>({background:`rgba(0, 0, 0, ${(1-n.value)*.5})`})),r=b(!1),d=()=>{r.value=!0},c=()=>{r.value=!1};return(p,l)=>($(),D("div",sl,[m("div",rl,[m("img",{src:v(ol),alt:"Light Sensor"},null,8,ll),m("div",{class:"absolute w-full h-full top-0 left-0",style:L(s.value)},null,4),Y(m("div",al,[Y(m("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":l[0]||(l[0]=a=>v(n).value=a),class:"w-full cursor-ew-resize",onPointerdown:ae(d,["stop"]),onPointerup:c,onPointercancel:c},null,544),[[Gt,v(n).value]])],512),[[te,!v(o)||r.value]])])],512))}}),cl=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"})),ul="/assets/microphone-BjeZeCno.jpg",dl={ref:"theref"},pl={class:"rounded-lg overflow-hidden relative"},fl=["src"],ml=N({type:"microphone",params:{mode2:M.OUT},__name:"Microphone",props:{id:{}},setup(e){return J(e.id),(t,n)=>($(),D("div",dl,[m("div",pl,[m("img",{src:v(ul),alt:"microphone"},null,8,fl)])],512))}}),vl=Object.freeze(Object.defineProperty({__proto__:null,default:ml},Symbol.toStringTag,{value:"Module"})),gl="/assets/motion_detector-5Zx7-09a.jpg";function dt(e,t,n=null){const o=b(""),s=b(!1),r=l=>{s.value&&l.key==="Escape"&&(o.value="",s.value=!1,window.removeEventListener("keydown",r)),s.value&&/^[A-Za-z0-9]$/.test(l.key)&&(o.value=l.key.toUpperCase(),s.value=!1,window.removeEventListener("keydown",r))},d=l=>{!s.value&&l.key.toUpperCase()===o.value&&e()},c=l=>{!s.value&&l.key.toUpperCase()===o.value&&t()},p=l=>{l.stopPropagation(),s.value=!0,window.addEventListener("keydown",r)};return Se(()=>{window.addEventListener("keydown",d),window.addEventListener("keyup",c)}),Cn(()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",c)}),n&&H(()=>n.shortcut,()=>{o.value||(o.value=n.shortcut)},{immediate:!0}),{shortcut:o,isSettingShortcut:s,startSettingShortcut:p}}const hl={class:"rounded-lg overflow-hidden relative"},yl=["src"],_l={class:"absolute top-11 left-[18px]"},xl={class:"w-[12px] h-[9px] bg-green-500 absolute top-[36px] left-[34px]"},wl=N({type:"motion-detector",params:{mode2:M.OUT},__name:"MotionDetector",props:{id:{},params:{}},setup(e){const t=le("theref"),{isOutside:n}=Te(t),o=J(e.id),{pin2:s}=o;let r=null;const d=()=>{s.value=1,r!==null&&clearTimeout(r),r=setTimeout(()=>{c(),r=null},4e3)},c=()=>{s.value=0},{shortcut:p,isSettingShortcut:l,startSettingShortcut:a}=dt(d,()=>{},e.params);return Se(()=>{t.value&&(t.value.addEventListener("click",d),t.value.addEventListener("mousemove",d))}),(i,f)=>($(),D("div",{ref_key:"theref",ref:t},[m("div",hl,[m("img",{src:v(gl),alt:"Toggle Switch"},null,8,yl),m("div",_l,se(v(p)),1),Y(m("div",xl,null,512),[[te,v(s).value]]),!v(n)||v(l)?($(),D("button",{key:0,onClick:f[0]||(f[0]=(...g)=>v(a)&&v(a)(...g)),onPointerdown:f[1]||(f[1]=ae(()=>{},["stop"])),class:"absolute w-full h-4 text-xs top-0 left-0 bg-black/[0.8] text-white rounded-lg"},se(v(l)?"Press a key...":v(p)?"Set shortcut":"Add shortcut"),33)):pe("",!0)])],512))}}),bl=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"})),Pl="/assets/potentiometer-CklP_JJ1.jpg",Sl={class:"rounded-lg overflow-hidden relative"},Tl=["src"],El={class:"absolute rounded-full top-5 left-8 w-10 h-10 cursor-ew-resize"},ql={key:0,class:"absolute bottom-0 left-0 flex items-center"},kl=N({type:"potentiometer",params:{mode2:M.IN},__name:"Potentiometer",props:{id:{}},setup(e){const t=J(e.id),{pin2:n}=t,o=j(()=>n.value*6/8-3/8),s=b(!1);let r=!1,d=0;const c=a=>{a.stopPropagation(),a.preventDefault(),r=!r,d=a.clientX,s.value=r,window.addEventListener("pointermove",l),window.addEventListener("pointerup",p)},p=()=>{r=!1,s.value=r,window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",p)},l=a=>{if(r){const i=(a.clientX-d)/20;d=a.clientX,n.value=Math.min(1,Math.max(0,n.value+i/2))}};return(a,i)=>($(),D("div",null,[m("div",Sl,[m("img",{src:v(Pl),alt:"Potentiometer"},null,8,Tl),m("button",El,[m("div",null,[m("div",{class:"top-0 left-0 relative w-10 h-10 rounded-full bg-rose-600 flex items-center justify-center",onPointerdown:c,style:L(`transform: rotate(${o.value}turn)`)},i[1]||(i[1]=[m("div",{class:"absolute top-0 left-4.5 w-1 h-5 bg-white"},null,-1),m("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},null,-1)]),36)])]),s.value?($(),D("div",ql,[Y(m("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":i[0]||(i[0]=f=>v(n).value=f),class:"w-full cursor-pointer"},null,512),[[Gt,v(n).value]])])):pe("",!0)])]))}}),Il=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"})),Ml="/assets/push_button-DvCvYEel.jpg",Rl={ref:"theref"},$l={class:"rounded-lg overflow-hidden relative"},Al=["src"],Cl=N({type:"push-button",params:{mode2:M.IN},__name:"PushButton",props:{id:{},params:{}},setup(e){const t=J(e.id),{pin2:n}=t,{isOutside:o}=Te(le("theref")),s=()=>{n.value=1},r=()=>{n.value=0},{shortcut:d,isSettingShortcut:c,startSettingShortcut:p}=dt(s,r,e.params);return(l,a)=>($(),D("div",Rl,[m("div",$l,[m("img",{src:v(Ml),alt:"Push Button"},null,8,Al),m("button",{class:ne(["absolute top-[27px] left-[27px] rounded-full w-[25px] h-[25px]",v(n).value?"bg-green-500":"bg-blue-500"]),onPointerdown:s,onPointerup:r,onPointerleave:r},se(v(d)),35),!v(o)||v(c)?($(),D("button",{key:0,onClick:a[0]||(a[0]=(...i)=>v(p)&&v(p)(...i)),onPointerdown:a[1]||(a[1]=ae(()=>{},["stop"])),class:"absolute w-full h-4 text-xs top-0 left-0 bg-black/[0.8] text-white rounded-lg"},se(v(c)?"Press a key...":v(d)?"Set shortcut":"Add shortcut"),33)):pe("",!0)])],512))}}),Dl=Object.freeze(Object.defineProperty({__proto__:null,default:Cl},Symbol.toStringTag,{value:"Module"})),Ol="data:image/svg+xml,%3csvg%20width='200'%20height='100'%20viewBox='0%200%20200%20100'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Servo%20(circle)%20--%3e%3ccircle%20cx='20'%20cy='20'%20r='20'%20stroke='black'%20fill='white'%20/%3e%3c!--%20Smooth%20transition%20path%20with%20a%20semi-circle%20at%20the%20end%20--%3e%3cpath%20d='M%2020%200%20L%20110%2010%20A%2010%2010%200%200%201%20110%2030%20L%2020%2040%20'%20stroke='black'%20fill='white'%20/%3e%3ccircle%20cx='20'%20cy='20'%20r='10'%20stroke='black'%20fill='white'%20/%3e%3c!--%20Holes%20in%20the%20header%20(5%20small%20circles)%20--%3e%3ccircle%20cx='48'%20cy='20'%20r='3'%20stroke='black'%20fill='none'%20/%3e%3ccircle%20cx='63'%20cy='20'%20r='3'%20stroke='black'%20fill='none'%20/%3e%3ccircle%20cx='77'%20cy='20'%20r='3'%20stroke='black'%20fill='none'%20/%3e%3ccircle%20cx='93'%20cy='20'%20r='3'%20stroke='black'%20fill='none'%20/%3e%3ccircle%20cx='108'%20cy='20'%20r='3'%20stroke='black'%20fill='none'%20/%3e%3c/svg%3e",Ll={class:"rounded-lg relative w-full h-full"},Fl=["src"],Bl=N({type:"servo",params:{mode2:M.OUT},__name:"Servo",props:{id:{}},setup(e){const t=J(e.id),{pin2:n}=t,o=b(0),s=b(!1);let r=!1,d=0;const c=g=>{g.stopPropagation(),g.preventDefault(),r=!0,d=g.clientX,s.value=r,window.addEventListener("pointermove",i),window.addEventListener("pointerup",p)},p=()=>{r=!1,s.value=r,window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",p)};let l=null,a=0;const i=g=>{if(r){const h=(g.clientX-d)/60;d=g.clientX,a=Math.min(0,Math.max(-.5,a+h/2)),l||(l=requestAnimationFrame(f))}},f=()=>{if(!l)return;let g=a-o.value;g>.5&&(g-=1),g<-.5&&(g+=1);const h=.1;Math.abs(g)>.001?(o.value+=g*h,o.value>1&&(o.value-=1),o.value<0&&(o.value+=1),l=requestAnimationFrame(f)):(o.value=a,cancelAnimationFrame(l),l=null)};return H([()=>n.freq,()=>n.value],()=>{if(n.value>0){const g=1e3/n.freq;a=-(n.value*g-.5)/4,a=Math.min(0,Math.max(-.5,a)),l||(l=requestAnimationFrame(f))}}),(g,h)=>($(),D("div",null,[m("div",Ll,[h[0]||(h[0]=m("div",{class:"absolute top-[20px] left-[26px] w-[28px] h-[60px] rounded bg-zinc-800"},null,-1)),h[1]||(h[1]=m("div",{class:"absolute top-[20px] left-[26px] w-[28px] h-[28px] rounded-full bg-zinc-700"},null,-1)),h[2]||(h[2]=m("div",{class:"absolute top-[41px] left-[34px] w-3 h-3 rounded-full bg-zinc-700"},null,-1)),h[3]||(h[3]=m("div",{class:"absolute top-[55px] left-[26px] w-[28px] h-[28px] text-white text-xs text-center"}," 180° ",-1)),m("button",{class:"absolute top-7 left-[34px] w-[60px]",onPointerdown:c},[m("img",{src:v(Ol),style:L(`transform: rotate(${o.value}turn); transform-origin: 6px 6px`)},null,12,Fl)],32)])]))}}),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Bl},Symbol.toStringTag,{value:"Module"})),Ul="/assets/switch-ChSLRb35.jpg",zl={ref:"theref"},Gl={class:"rounded-lg overflow-hidden relative"},jl=["src"],Vl={class:"absolute top-7 left-[55px]"},Hl=N({type:"switch",params:{mode2:M.IN},__name:"Switch",props:{id:{},params:{}},setup(e){const{isOutside:t}=Te(le("theref")),n=J(e.id),{pin2:o}=n,s=()=>{o.value=1-o.value},{shortcut:r,isSettingShortcut:d,startSettingShortcut:c}=dt(s,()=>{},e.params);return(p,l)=>($(),D("div",zl,[m("div",Gl,[m("img",{src:v(Ul),alt:"Toggle Switch"},null,8,jl),m("button",{class:"absolute top-[20px] left-[32px] w-[16px] h-[40px]",onPointerdown:s},[m("div",{class:ne(["absolute w-[5px] h-[5px] bg-black cursor-pointer border-none",v(o).value?"bg-green-500":"bg-rose-500"]),style:L({top:(v(o).value?"14":"21")+"px",left:"5px"})},null,6)],32),m("div",Vl,se(v(r)),1),!v(t)||v(d)?($(),D("button",{key:0,onClick:l[0]||(l[0]=(...a)=>v(c)&&v(c)(...a)),onPointerdown:l[1]||(l[1]=ae(()=>{},["stop"])),class:"absolute w-full h-4 text-xs top-0 left-0 bg-black/[0.8] text-white rounded-lg"},se(v(d)?"Press a key...":v(r)?"Set shortcut":"Add shortcut"),33)):pe("",!0)])],512))}}),Xl=Le(Hl,[["__scopeId","data-v-2148c44b"]]),Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"})),Wl="/assets/touch_sensor-CfCsQfvI.jpg",Kl={ref:"theref"},Ql={class:"rounded-lg overflow-hidden relative"},Jl=["src"],Zl=N({type:"touch-sensor",params:{mode2:M.OUT},__name:"TouchSensor",props:{id:{},params:{}},setup(e){const t=J(e.id),{pin2:n}=t,{isOutside:o}=Te(le("theref")),s=()=>{n.value=1},r=()=>{n.value=0},{shortcut:d,isSettingShortcut:c,startSettingShortcut:p}=dt(s,r,e.params);return(l,a)=>($(),D("div",Kl,[m("div",Ql,[m("img",{src:v(Wl),alt:"touch sensor"},null,8,Jl),m("button",{class:ne(["absolute top-[30px] left-[2px] w-[67px] h-[47px] rounded font-extrabold text-black",{"border-4 border-green-500":v(n).value,"bg-white":v(d)}]),onPointerdown:s,onPointerup:r,onPointerleave:r},se(v(d)),35),!v(o)||v(c)?($(),D("button",{key:0,onClick:a[0]||(a[0]=(...i)=>v(p)&&v(p)(...i)),onPointerdown:a[1]||(a[1]=ae(()=>{},["stop"])),class:"absolute w-full h-4 text-xs top-0 left-0 bg-black/[0.8] text-white rounded-lg"},se(v(c)?"Press a key...":v(d)?"Set shortcut":"Add shortcut"),33)):pe("",!0)])],512))}}),ea=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"}));var O=(e=>(e.PinGetValue="pin get value",e.PinGetMode="pin get mode",e.PinGetPull="pin get pull",e.AdcReadU16="adc read_u16",e.I2CScan="i2c scan",e.I2CReadFromMem="i2c readfrom_mem",e))(O||{});const kn=2;var C=(e=>(e.I2CWriteToMem="i2c writefrom_mem",e.PinSetValue="pin set value",e.PinSetMode="pin set mode",e.PinSetPull="pin set pull",e.PwmFreq="pwm freq",e.PwmDutyU16="pwm duty_u16",e.Output="output",e.Sleep="sleep",e.DisplayText="display text",e.DisplayClear="display clear",e.NeoPixelWrite="neopixel write",e.KeyboardInterrupt="keyboard interrupt",e.Error="error",e))(C||{}),me=(e=>(e.Finished="finished",e.Initialized="initialized",e.Timeout="timeout",e))(me||{});const di=Object.values({...O,...C,...me}),ta=new Set(Object.values(O)),na=new Set(Object.values(me));new Set(Object.values(C));function Yn(e){return ta.has(e)}function oa(e){return na.has(e)}function sa(e){return Yn(e.command)}function ra(e){return oa(e.command)}function la(e){return Yn(e.command)}const pi=[];function Et(e,t){return e.length!==t.length?!1:e.every((n,o)=>n===t[o])}const aa={error:()=>!0,"keyboard interrupt":()=>!0,finished:()=>!0,initialized:()=>!0,timeout:()=>!0,sleep:(e,t)=>e.request.time_ms===t.request.time_ms,output:(e,t)=>e.request.output===t.request.output,"pin set value":(e,t)=>e.request.pin===t.request.pin&&e.request.value===t.request.value,"pin set mode":(e,t)=>e.request.pin===t.request.pin&&e.request.mode===t.request.mode,"pin set pull":(e,t)=>e.request.pin===t.request.pin&&e.request.pull===t.request.pull,"pwm freq":(e,t)=>e.request.pin===t.request.pin&&e.request.freq===t.request.freq,"pwm duty_u16":(e,t)=>e.request.pin===t.request.pin&&e.request.duty_u16===t.request.duty_u16,"display text":(e,t)=>e.request.x===t.request.x&&e.request.y===t.request.y&&e.request.text===t.request.text,"display clear":()=>!0,"i2c writefrom_mem":(e,t)=>e.request.addr===t.request.addr&&e.request.buf===t.request.buf&&e.request.memaddr===t.request.memaddr&&e.request.scl===t.request.scl&&e.request.sda===t.request.sda,"pin get value":(e,t)=>e.request.pin===t.request.pin&&e.result===t.result,"pin get mode":(e,t)=>e.request.pin===t.request.pin&&e.result===t.result,"pin get pull":(e,t)=>e.request.pin===t.request.pin&&e.result===t.result,"adc read_u16":(e,t)=>e.request.pin===t.request.pin&&e.result===t.result,"i2c readfrom_mem":(e,t)=>e.request.addr===t.request.addr&&e.request.memaddr===t.request.memaddr&&e.request.nbytes===t.request.nbytes&&e.request.scl===t.request.scl&&e.request.sda===t.request.sda&&Et(e.result,t.result),"i2c scan":(e,t)=>e.request.scl===t.request.scl&&e.request.sda===t.request.sda&&Et(e.result,t.result),"neopixel write":(e,t)=>e.request.pin===t.request.pin&&Et(e.request.pixels,t.request.pixels)};function ia(e){return e.command==="pin set value"||e.command==="pin set pull"||e.command==="pin set mode"||e.command==="pwm duty_u16"||e.command==="pwm freq"||e.command==="neopixel write"||e.command==="pin get mode"||e.command==="pin get value"||e.command==="pin get pull"||e.command==="adc read_u16"}const qt=b(""),kt=b(0),It=b(0),Mt=b("#000000");function Wn(){function e(n,o,s,r){qt.value+=n+`\r
`,kt.value=o,It.value=s,r&&(Mt.value=r)}function t(){qt.value="",kt.value=0,It.value=0,Mt.value="#000000"}return{text:qt,x:kt,y:It,textColor:Mt,writeText:e,clearDisplay:t}}function Kn(e){return JSON.stringify({command:e.command,request:e.request})}function fi(e){return JSON.parse(e)}function ca(e){const t=[];for(let{content:n}of e)la(n)&&t.push(n);return t}const In=b(!1);function ua(e){const t=ca(e),n=new Map;for(const o of t){const s=Kn(o),r=n.get(s);r===void 0?n.set(s,[o.result]):r.push(o.result)}return n}function da(e,t){const n=[];let o=!0;for(let s=0;s<e.length&&s<t.length;s++){const r=pa(e[s].content,t[s].content);n.push({correct:r,expected:e[s],replayed:t[s]}),o&&(o=r)}for(let s=t.length;s<e.length;s++)o=!1,n.push({correct:!1,expected:e[s],replayed:null});for(let s=e.length;s<t.length;s++)o=!1,n.push({correct:!1,expected:null,replayed:t[s]});return{feedback:n,success:o}}function pa(e,t){if(e.command!==t.command)return!1;const n=aa[e.command];return n(e,t)}const fa=[O.PinGetValue,O.PinGetPull,O.PinGetMode,O.AdcReadU16,O.I2CScan,O.I2CReadFromMem,C.I2CWriteToMem,C.PinSetValue,C.PwmDutyU16,C.PwmFreq,C.Output,C.Sleep,C.DisplayText,C.DisplayClear],ma=e=>e.map((t,n)=>({...t,index:n}));async function va(e,t,n){In.value=!0;const o=Wt(),s=await ga(e,t.data,n);await o.stopPromise();let r=t.data;const d=l=>ma(l).filter(a=>n?n.includes(a.content.command):!0),{feedback:c,success:p}=da(d(r),d(s));return t.result={code:e,success:p,expected:r,replayed:s,feedback:c,message:""},In.value=!1,t.result}function mi(e){return e!==void 0?e?"border-green-500":"border-red-500":"border-blue-500"}async function vi(e,t,n=fa){for(const o of t)await va(e,o,n)}async function gi(e){const t=[];for(const n of e){const o=await fetch(n.url).then(s=>s.json());t.push({data:o,test:n})}return t}function ga(e,t,n){const o=Wt();return new Promise(s=>{o.reset(),o.recorder.start(n,t.length);const r=ua(t);o.replayer.start(r);const d=H(o.replayer.state,()=>{if(o.replayer.state.value==K.Finish){o.recorder.stop();const c=o.recorder.getRecords();s(c)}else if(o.replayer.state.value==K.Timeout){o.recorder.stop();const c=o.recorder.getRecords();c.push({content:{command:me.Timeout,request:{}},line:-1}),s(c)}d.stop()});o.run(e).then(()=>{o.replayer.restartTimeout()})})}const Mn=e=>e?"oklch(0.723 0.219 149.579)":"oklch(0.637 0.237 25.331)";function hi(e){const t=Fn(),{fileContent:n}=Ln(t),o=Nn(),s=Wt(),r=Bn(),d=Wn(),c=b();function p(){for(let i=0;i<6;i++)s.slots[i].class="",s.slots[i].style={};for(const i of s.moduleComponents)i.class="",i.style={}}async function l(i){for(const[f,g]of e.feedback.entries())if(!g.correct){a(f),i[f].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"});break}}async function a(i){s.reset(),n.value=e.code,r.clear(),p(),o.highlights.value=[],c.value=i,await He();let f=i;const g=e.feedback[f].replayed;if(g===null?f=e.replayed.length-1:f=g.index,g===null||e.replayed[f].line<0)return;for(let E=0;E<=f;E++)if(g!==null){const w=e.replayed[E].content;switch(w.command){case C.Error:r.write(w.request.message);break;case me.Initialized:break;case me.Finished:break;case C.Output:r.write(w.request.output);break;case C.PinSetValue:s.setPin(w.request.pin,w.request);break;case C.PinSetMode:s.setPin(w.request.pin,w.request);break;case C.PinSetPull:s.setPin(w.request.pin,w.request);break;case C.PwmFreq:s.setPin(w.request.pin,{freq:w.request.freq});break;case C.PwmDutyU16:s.setPin(w.request.pin,{value:w.request.duty_u16/65535});break;case C.DisplayText:{const{text:q,x:S,y}=w.request;d.writeText(q,S,y)}break;case C.DisplayClear:d.clearDisplay();break;case C.I2CWriteToMem:{const q=s.slots[s.pinToIndex[w.request.sda]];if(ot(q.with)){const S=q.with.i2c;S.address===w.request.addr&&S.write(w.request.memaddr,w.request.buf)}}break;case O.PinGetValue:s.setPinWith(w.request.pin,{value:w.result});break;case O.PinGetMode:s.setPinWith(w.request.pin,{mode:w.result});break;case O.PinGetPull:s.setPinWith(w.request.pin,{pull:w.result});break;case O.AdcReadU16:s.setPinWith(w.request.pin,{value:w.result/Un});break}}const h=e.replayed[f].content,F=e.replayed[f].line;if(o.highlights.value=[{line:F,color:Mn(e.feedback[i].correct)}],h!=null&&ia(h)){const E=s.getSlotByPinId(h.request.pin);E.style={outlineStyle:"solid",outlineColor:Mn(e.feedback[i].correct),outlineWidth:"4px"}}}return{selectNode:a,selectedIndex:c,firstError:l}}var K=(e=>(e[e.None=0]="None",e[e.Continue=1]="Continue",e[e.Finish=2]="Finish",e[e.Timeout=3]="Timeout",e[e.Error=4]="Error",e))(K||{});function ha(){let e=new Map,t=new Map;const n=b(0);let o=0,s=null;function r(){s&&clearTimeout(s),s=setTimeout(()=>{n.value=3},o)}return{storeInputToResult:l=>{r();const a=Kn(l);let i=t.get(a);i||(i=0);let f=e.get(a);if(!f||f.length===0||i>=f.length)return 2;const g=f[i];switch(l.command){case O.AdcReadU16:Atomics.store(l.result,0,g);break;case O.PinGetMode:Atomics.store(l.result,0,g);break;case O.PinGetPull:Atomics.store(l.result,0,g);break;case O.PinGetValue:Atomics.store(l.result,0,g);break;case O.I2CScan:for(let h=0;h<f.length;h++)Atomics.store(l.result,h,g);break;case O.I2CReadFromMem:for(let h=0;h<f.length;h++)Atomics.store(l.result,h,g);break}return t.set(a,i+1),1},restartTimeout:r,start:(l,a=200)=>{e=l,t=new Map,n.value=1,o=a},stop:()=>{n.value=2},state:n}}function ya(){let e=[];const t=b(0);let n,o,s=0;return{pushResult:(l,a)=>{if(t.value==1){let i=0,f;switch(l.command){case O.AdcReadU16:i=l.result[0],f={command:l.command,request:l.request,result:i};break;case O.I2CReadFromMem:i=Array.from(l.result),f={command:l.command,request:l.request,result:i};break;case O.PinGetMode:i=l.result[0],f={command:l.command,request:l.request,result:i};break;case O.PinGetPull:i=l.result[0],f={command:l.command,request:l.request,result:i};break;case O.PinGetValue:i=l.result[0],f={command:l.command,request:l.request,result:i};break;case O.I2CScan:i=Array.from(l.result),f={command:l.command,request:l.request,result:i};break;default:f=l;break}return e.push({content:f,line:a}),(!o||o.includes(l.command))&&s++,n&&s>=n?2:1}return 2},getRecords:()=>e,start:(l,a)=>{n=a,o=l,s=0,e=[],t.value=1},stop:()=>{t.value=2},state:t}}const Rt=Bn(),{fileContent:_a}=Ln(Fn()),xa=Object.assign({"./modules/Buzzer.vue":Jo,"./modules/ClimateSensor.vue":Os,"./modules/ColorSensor.vue":Qs,"./modules/DistanceSensor.vue":cr,"./modules/Encoder.vue":yr,"./modules/Gyro.vue":Cr,"./modules/LED.vue":Xr,"./modules/LedTower.vue":nl,"./modules/LightSensor.vue":cl,"./modules/Microphone.vue":vl,"./modules/Module.vue":Go,"./modules/MotionDetector.vue":bl,"./modules/Potentiometer.vue":Il,"./modules/PushButton.vue":Dl,"./modules/Servo.vue":Nl,"./modules/Switch.vue":Yl,"./modules/TouchSensor.vue":ea}),Qn=Object.fromEntries(Object.values(xa).map(e=>[e.default.type,e.default])),Xe={A:0,B:1,C:2,D:3,E:4,F:5,OUTER1:6};function _e(e,t,n,o,s){const r={id:e,pin2:{id:t,value:0,freq:0,mode:M.IN,pull:fe.NONE},pin3:{id:n,value:0,freq:0,mode:M.IN,pull:fe.NONE},with:Q,x:o,y:s,w:80,h:80,style:{},class:""};return e=="OUTER1"&&(r.style={width:"30px",height:"215px"}),r}const ve=U([]),Lt=b({}),wa=e=>{Lt.value={...Lt.value,...e}},rt=Wn(),De=b(!1),Ft=b(null),V=b(null),it=b(!1),Pe=b(!1),de=b(!1),Ht=b(!1),pt=b(!1),ft=b(""),ba={x:203,y:48,w:40,h:20},Pa={x:242,y:40,w:8,h:8},Sa=U({}),oe=U({x:0,y:0,w:0,h:0,id:-1,value:0,freq:0,mode:M.NONE,pull:fe.NONE,with:Q}),re=U({x:320,y:368,w:25,h:8,id:8,value:0,freq:0,mode:M.IN,pull:fe.NONE,with:Q}),ge=U({x:320,y:375,w:25,h:8,id:9,value:0,freq:0,mode:M.IN,pull:fe.NONE,with:Q}),mt={start:{x:0,y:0,connected:oe,at:Q,yOffset:0},end:{x:0,y:0,w:0,h:0,connected:oe,at:oe,yOffset:0},style:{}};Q.connector=mt;const Ta=U([z("LED"),z("push-button"),z("potentiometer"),z("encoder"),z("buzzer"),z("switch"),z("light-sensor"),z("motion-detector"),z("touch-sensor"),z("climate-sensor"),z("color-sensor"),z("distance-sensor"),z("servo"),z("gyro-accel"),z("microphone"),z("led-tower")]),Bt={8:re,9:ge,"":oe},Jn={8:re,9:ge},B=U([_e("A",0,1,69,52),_e("B",2,3,69,157),_e("C",28,22,69,262),_e("D",4,5,299,52),_e("E",6,7,299,157),_e("F",26,27,299,262),_e("OUTER1",8,9,415,222)]),ee={0:0,1:0,2:1,3:1,28:2,22:2,4:3,5:3,6:4,7:4,26:5,27:5},Ea=()=>B.map(t=>t.with.type);function Xt(e,t){const n=U(z(e));e!=""&&ve.push(n),Fe(t),He(()=>{Oe(t,n)})}function vt(e){const t=ve.indexOf(e);t>-1&&ve.splice(t,1)}function Zn(e){vt(e.with),e.with=Q}function qa(e,t){if(t==="OUTER1"){const n=U(z(e));e!=""&&ve.push(n),Fe(6),n.dragging=!0,He(()=>{Oe(6,n),n.dragging=!1,n.style.zIndex="10",Ha(n,re),n.connector.style.zIndex="10"})}else{const n=Xe[t];Xt(e,n)}}function ka(e){for(let t=0;t<e.length;t++)Xt(e[t],t)}function Ia(){for(let e=0;e<B.length;e++)Fe(e);ve.length=0}function Ma(e){const t=Xe[e];Fe(t)}function z(e){const t=Qn[e];let n=ut(t.params);return typeof t.extend=="function"&&(n=t.extend(n)),{x:0,y:0,w:80,h:80,is:t,on:-1,class:"",style:{},type:e,dragging:!1,connector:mt,putOn8or9:e=="servo"||e==="led-tower",params:jt(),...n}}function Ra(e){const t=e.is;let n=ut(t.params);return typeof t.extend=="function"&&(n=t.extend(n)),{x:0,y:0,w:80,h:80,is:e.is,on:-1,class:"",style:{},type:e.type,dragging:!1,connector:mt,putOn8or9:e.type=="servo"||e.type=="led-tower",params:jt(),...n}}function Oe(e,t){const n=B[e];t.x=n.x,t.y=n.y,t.params.shortcut=n.id,n.with=t,t.on=e,t.pin2.mode===M.OUT&&(n.pin2.mode===M.OUT&&(t.pin2.value=n.pin2.value,t.pin2.freq=n.pin2.freq),n.pin2.mode===M.IN&&(t.pin2.freq=0,t.pin2.value=0)),t.pin3.mode===M.OUT&&(n.pin3.mode===M.OUT&&(t.pin3.value=n.pin3.value,t.pin3.freq=n.pin3.freq),n.pin3.mode===M.IN&&(t.pin3.freq=0,t.pin3.value=0))}function Fe(e){const t=B[e];vt(t.with),t.with=Q}function $a(){return B}function Aa(e){const t=Xe[e];return B[t]}function Ca(e){if(e=="8")return Bt[e].with;if(e=="9")return Bt[e].with;const t=Xe[e];return B[t].with}function Da(e){return B[ee[e]]}function Oa(e){return Bt[e]}function Ue(e){const t=B[ee[e]];if(t){let n={id:0,value:0,freq:0,mode:M.NONE,pull:fe.NONE};return e===t.pin2.id&&(n=t.pin2,n.value=$t(t.pin2.mode)?t.pin2.value:t.with.pin2.value,t.with.type===""&&(n.value=nn(t.pin2.pull))),e===t.pin3.id&&(n=t.pin3,n.value=$t(t.pin3.mode)?t.pin3.value:t.with.pin3.value,t.with.type===""&&(n.value=nn(t.pin3.pull))),n.mode===M.NONE,n}return{id:0,value:0,freq:0,mode:M.NONE,pull:fe.NONE}}function La(e,t){const n=B[ee[e]];if(n){const o=e===n.pin2.id?n.with.pin2:n.with.pin3,{value:s=o.value,freq:r=o.freq}=t;o.value=s,o.freq=r}}function xe(e,t){const n=B[ee[e]];let o=on,s=on;if(n)[o,s]=e===n.pin2.id?[n.pin2,n.with.pin2]:[n.pin3,n.with.pin3];else if(e===8||e===9){const a=Jn[e];o=a,s=a.with.pin2}const{value:r=o.value,freq:d=o.freq,mode:c=o.mode,pull:p=o.pull}=t,l=o.mode===M.OUT?r:o.value;o.value=l,o.freq=d,o.mode=c,o.pull=p,s.mode===M.OUT&&(s.value=o.value,s.freq=o.freq)}let Ve,Ae,tt;function Fa(){return new Promise(e=>{Pe.value&&e(),Yt();const t=H(Ht,n=>{n&&(t.stop(),e())})})}function Yt(){Pe.value||(it.value=!0,rt.clearDisplay(),Ve=new Worker(new URL("/assets/mpWorker-CArwanpE.js",import.meta.url),{type:"module"}),Ve.onmessage=e=>{const{content:t,line:n}=e.data;switch(t.command){case C.Error:Rt.write(t.request.message),pt.value=!0,ft.value=t.request.message,de.value=!1,ct.value=!1;break;case C.KeyboardInterrupt:Rt.write(t.request.message),de.value=!1,ct.value=!1;break;case me.Initialized:it.value=!1,Ae=t.request.sharedArrayInterrupt,tt=t.request.sharedWakeupArray,Ht.value=!0;break;case me.Finished:de.value=!1,we.stop(),ze.stop();break;case C.Output:Rt.write(t.request.output);break;case C.PinSetValue:xe(t.request.pin,t.request);break;case C.PinSetMode:xe(t.request.pin,t.request);break;case C.PinSetPull:xe(t.request.pin,t.request);break;case C.PwmFreq:xe(t.request.pin,{freq:t.request.freq});break;case C.PwmDutyU16:xe(t.request.pin,{value:t.request.duty_u16/Un});break;case C.DisplayText:{const{text:o,x:s,y:r}=t.request;rt.writeText(o,s,r)}break;case C.DisplayClear:rt.clearDisplay();break;case C.I2CWriteToMem:{const o=B[ee[t.request.sda]];if(ot(o.with)){const s=o.with.i2c;s.address===t.request.addr&&s.write(t.request.memaddr,t.request.buf)}}break;case C.NeoPixelWrite:{const o=Jn[t.request.pin];if(o&&o.with&&"pixels"in o.with&&"max_length"in o.with&&o.with.pixels){const s=o.with.max_length??t.request.pixels.length,r=t.request.pixels.slice(0,s).map(d=>[...d]);o.with.pixels=r}}break}if(we.state.value==K.Continue)sa(t)&&we.storeInputToResult(t)!=K.Continue&&(we.state.value=K.Finish,ze.state.value=K.Finish);else switch(t.command){case O.PinGetValue:Ue(t.request.pin).value>.4?Atomics.store(t.result,0,1):Atomics.store(t.result,0,0);break;case O.PinGetMode:{const o=Ue(t.request.pin);Atomics.store(t.result,0,o.mode)}break;case O.PinGetPull:{const o=Ue(t.request.pin);Atomics.store(t.result,0,o.pull)}break;case O.AdcReadU16:{const o=Ue(t.request.pin);Atomics.store(t.result,0,o.value*65535)}break;case O.I2CReadFromMem:{const{request:o,result:s}=t,r=B[ee[o.sda]];if(r!==B[ee[o.scl]])Atomics.store(s,o.nbytes,1);else if(ot(r.with)){const d=r.with.i2c;d.address===o.addr?d.read(s,o.memaddr,o.nbytes):Atomics.store(s,o.nbytes,1)}else Atomics.store(s,o.nbytes,1)}break;case O.I2CScan:{const{request:o,result:s}=t,r=B[ee[o.sda]];r!==B[ee[o.scl]]?Atomics.store(s,0,-1):ot(r.with)?Atomics.store(s,0,r.with.i2c.address):Atomics.store(s,0,-1)}break}ra(t)||ze.pushResult(t,n)===K.Finish&&(we.state.value=K.Finish,ze.state.value=K.Finish),tt&&(Atomics.store(tt,0,1),Atomics.notify(tt,0,1))},Pe.value=!0)}function Ba(){for(let e=0;e<29;e++)xe(e,{value:0,freq:0,mode:M.IN}),rt.clearDisplay();for(const e of B)e.with.reset()}async function Na(e){Pe.value||await Fa(),de.value=!0,pt.value=!1,ft.value="",Ae&&(Ae[0]=0,Ae[1]=0),Ve.postMessage({command:"runPython",code:e??_a.value,isReplay:we.state.value==K.Continue})}const ct=b(!1),ze=ya(),we=ha();function eo(){de.value&&(ct.value=!0,Ae[0]=kn,Ae[1]=kn)}function Ua(){return new Promise(e=>{if(de.value){eo();const t=H(de,n=>{n||(t.stop(),e())})}else e()})}function to(){Ve.terminate(),de.value=!1,it.value=!1,Pe.value=!1,pt.value=!1,Ht.value=!1,ft.value="",Ve.onmessage=null}function za(){Pe.value&&to(),Yt()}function Ga(e,t){const n=B[e].with,o=B[t].with;Oe(t,n),Oe(e,o)}function no(e,t,n,o){const s={x:o.x,y:o.y},r={x:o.x+o.w-e.w,y:1/0};return c=>{if(!e)return;e.x=c.clientX-t,e.y=c.clientY-n,$e(e,s,r);const p=document.getElementById("module-list"),l={x:0,y:0,w:0,h:0};if(p){const{top:f,left:g}=p.getBoundingClientRect();l.x=g,l.y=f}if(je(l),De.value=e.y+e.h*(3/4)>l.y,Bo(e.connector)!==mt&&(e.connector.start.x=e.x+e.w/2,e.connector.start.y=e.y+e.h/2),e.putOn8or9&&e.type!="led-tower")return;const a=[0,0,0,0,0,0];for(const[f,g]of B.entries())a[f]=es(e,{x:g.x+o.x,y:g.y+o.y,w:g.w,h:g.h});let i=0;for(let f=1;f<a.length;f++)a[f]>a[i]&&(i=f);a[i]==0?V.value=null:V.value=i,e.type=="led-tower"&&V.value!=6&&(V.value=null),e.type!="led-tower"&&V.value==6&&(V.value=null)}}function ja(e,t,n,o){e.dragging=!0,e.style.zIndex="10";const s=B[n];Ft.value=n;const r=e.x,d=e.y,c=Ce("pibody");je(c),wt(e,c),wt(e.connector.start,c),wt(e.connector.end,c);const p=o.clientX-e.x,l=o.clientY-e.y,a=no(e,p,l,c),i=()=>{De.value?(s&&(s.with=Q),ve.splice(t,1)):e.putOn8or9&&n==-1?Ge(e,c):V.value===null?(e.x=r,e.y=d,e.style.zIndex="1"):(Ga(n,V.value),e.style.zIndex="1"),e.putOn8or9&&(Ge(e.connector.start,c),Ge(e.connector.end,c),e.connector.start.x=e.x+e.w/2,e.connector.start.y=e.y+e.h/2,e.style.zIndex="10",e.connector.style.zIndex="10"),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",i),De.value=!1,Ft.value=null,V.value=null,e.dragging=!1};document.addEventListener("pointermove",a),document.addEventListener("pointerup",i)}const Nt=b(!1),ce=b(re),Va=U({8:{x:re.x-10,y:re.y-48,class:"",style:{},visible:!1},9:{x:ge.x-10,y:ge.y+8,class:"",style:{},visible:!1}});function oo(e,t){const n=at(t);t===re?e.end.yOffset=30:t===ge&&(e.end.yOffset=-30),t.with=e.start.at,e.end.x=n.x,e.end.y=n.y,e.end.at=t}function so(e,t){t.stopPropagation(),e.end.at.with=Q,Nt.value=!0;const n=t.clientX-e.end.x,o=t.clientY-e.end.y,s=Ce("pibody"),r=c=>{e.end.x=c.clientX-n,e.end.y=c.clientY-o;const p={x:e.end.w/2,y:e.end.yOffset},l={x:s.w-e.end.w/2,y:s.h+e.end.yOffset-e.end.h};$e(e.end,p,l);const a=rn(e.end,at(re)),i=rn(e.end,at(ge)),f=80;a<i?(e.end.yOffset=30,a<f*f?ce.value=re:ce.value=oe):(e.end.yOffset=-30,i<f*f?ce.value=ge:ce.value=oe)},d=()=>{Nt.value=!1,ce.value===oe?vt(e.start.at):ce.value.with&&Zn(ce.value),oo(e,ce.value),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",d)};document.addEventListener("pointermove",r),document.addEventListener("pointerup",d)}function Ha(e,t){Zn(t);const s={start:{connected:e.pin2,at:e,x:e.x+e.w/2,y:e.y+e.h/2,yOffset:0},end:{connected:t,at:t,x:0,y:0,w:25,h:7,yOffset:0},style:{}};t.with=e,oo(s,t),e.connector=s}function Xa(e,t){const n={connected:e.pin2,at:e,x:e.x+e.w/2,y:e.y+e.h/2,yOffset:0},o={connected:oe,at:oe,x:t.clientX,y:t.clientY,w:25,h:8,yOffset:0};je(o);const s={start:n,end:o,style:{}};e.connector=s,so(e.connector,t)}function Ya(e,t){const n=U(Ra(e));n.dragging=!0,n.style.zIndex="10",n.style["touch-action"]="none";const o=Ce("pibody");if(t.currentTarget instanceof HTMLElement){const p=t.currentTarget,{top:l,left:a,width:i,height:f}=p.getBoundingClientRect();n.x=a,n.y=l}je(n),je(o),n.is=e.is,n.type=e.type,ve.push(n);const s=t.clientX-n.x,r=t.clientY-n.y,d=no(n,s,r,o),c=p=>{n&&(De.value||n.type!="servo"&&V.value===null?vt(n):(V.value!==null&&(Fe(V.value),Oe(V.value,n),n.style.zIndex="1"),n.putOn8or9&&He(()=>{Ge(n,o),Xa(n,p),n.style.zIndex="10",n.connector.style.zIndex="10"})),V.value=null,De.value=!1,n.dragging=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",c))};document.addEventListener("pointermove",d),document.addEventListener("pointerup",c)}function Wt(){return{settings:Lt,setSettings:wa,usb:ba,onLED:Pa,pin8:re,pin9:ge,NoneModule:Q,maxAreaIndex:V,fromSlotIndex:Ft,toDelete:De,pinToIndex:ee,slotTypeToSlotIndex:Xe,moduleTypeToComponent:Qn,getSlot:Aa,getSlotPinWith:Ca,getSlotByPinId:Da,getSlots:$a,getPin:Ue,setPin:xe,setPinWith:La,slots:B,slotHasList:Ea,moduleComponents:Ta,modules:ve,addModuleToSlot:Oe,newModuleToSlot:qa,newModuleToSlotIndex:Xt,clearSlot:Ma,clearSlots:Ia,putModuleList:ka,removeModuleFromSlot:Fe,dragged:Sa,startDragFromSlot:ja,startDragFromModuleList:Ya,isConnect8or9:Nt,chosenPin8or9:ce,moveConnectorEnd:so,getServoPin:Oa,pinNone:oe,helpArrows:Va,connect:Yt,run:Na,stop:eo,stopPromise:Ua,reset:Ba,disconnect:to,reconnect:za,isRunning:de,isRunError:pt,RunError:ft,isStopping:ct,isLoading:it,isConnected:Pe,recorder:ze,replayer:we}}export{be as A,ui as B,kr as C,di as I,M,C as O,fe as P,K as R,me as T,ei as _,ua as a,mi as b,vi as c,fa as d,va as e,gi as f,ci as g,Un as h,In as i,O as j,ni as k,fi as l,si as m,pi as n,ti as o,ri as p,hi as q,ga as r,ai as s,Nn as t,Wt as u,Wn as v,oi as w,ii as x,li as y,ns as z};
