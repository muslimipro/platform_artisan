import{s as M}from"./index-CDuz_jC-.js";import{s as B}from"./index-Bj7sNZBv.js";import{s as N}from"./index-CD0GvDV8.js";import{s as S}from"./index-B00-EmI9.js";import{_ as V}from"./AHeader.vue_vue_type_script_setup_true_lang-SvSkyIPT.js";import{_ as C}from"./ProjectCard.vue_vue_type_script_setup_true_lang-edgDPf_R.js";import{a as E}from"./index-CnxUim0u.js";import{t as F}from"./types-81Qs7ZwA.js";import{a as T,a0 as A,r as u,o as I,E as K,c as O,b as s,e as r,f as c,F as a,k as d,w as y,D as w,t as k,K as p,n as R,i as f}from"./index-C5BusG5M.js";import"./index-DzTrqgpp.js";import"./index-CckRWD9q.js";import"./logo-D1-3uCnC.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-C16HWRlM.js";import"./index-BThUNQj2.js";import"./index-D3U8S2Nx.js";import"./index-SvcixYA_.js";import"./index-D3T81l08.js";import"./index-xNy4xIqP.js";import"./StudentViewToggle.vue_vue_type_script_setup_true_lang-DzhnNzMo.js";import"./index-BkZmFwHn.js";import"./index-D-UbZ6xw.js";import"./index-DZHBDC13.js";import"./index-DFGvECIt.js";import"./http-TNhZgV1b.js";import"./profile-b50pncz2.js";import"./index-D0MhcdPE.js";import"./index-qswfE1q9.js";import"./pibody-BwAjMvHk.js";const q={class:"flex flex-col min-h-screen bg-slate-50"},G={key:0,class:"flex px-4 sm:px-12"},H={key:1,class:"flex px-4 sm:px-12"},J={key:3,class:"flex px-4 sm:px-12"},Q={key:4,class:"flex flex-wrap justify-center gap-8 px-4 sm:px-12 pb-8"},je=T({__name:"LegoPage",setup(U){const{locale:L}=A(),j=u([]),g=u([]),h=u([]),_=u([0,0,0,0,0,0]),v=u([0,0,0,0,0,0]),m=u(!1);async function x(){if(!m.value){m.value=!0;try{const{data:i}=await E.getProjects();m.value=!1,j.value=[],g.value=[],h.value=[],_.value=[0,0,0,0,0,0],v.value=[0,0,0,0,0,0];for(const o of i)o.lego&&(o.is_guidable?_.value[o.layer]++:v.value[o.layer]++);for(const o of i){if(!o.lego)continue;const n=await F(o);o.layer>0&&j.value.push(n),n.is_guidable?g.value.push(n):h.value.push(n)}}catch(i){console.log(i)}finally{m.value=!1}}}I(x),K(L,x);const P=O(()=>{const i=new Map,o=new Map;for(const e of g.value)i.has(e.layer)||i.set(e.layer,[]),i.get(e.layer).push(e);for(const e of h.value)o.has(e.layer)||o.set(e.layer,[]),o.get(e.layer).push(e);const n=[];for(let e=1;e<=5;e++)n.push({id:e,guided:i.get(e)||[],unguided:o.get(e)||[]});return n}),z=["secondary","success","info","warn","danger","contrast"];return(i,o)=>{const n=S,e=N,$=B,b=M;return s(),r("div",q,[c(V,{class:"sticky top-0 z-10 mb-4"}),(s(!0),r(a,null,d(P.value,t=>(s(),r("div",{key:t.id,class:"flex flex-col gap-2"},[t.guided.length>0||t.unguided.length>0?(s(),r("div",G,[c(n),c(e,{class:"min-w-fit text-2xl px-4",severity:z[t.id]},{default:y(()=>[w(k(t.id>0?`Level -
          ${t.id-1}`:"Other"),1)]),_:2},1032,["severity"]),c(n)])):p("",!0),t.guided.length>0?(s(),r("div",H,[c($,{class:"min-w-fit pr-4",size:"small",severity:"success"},{default:y(()=>[w(k(i.$t("pages.projects.learn")),1)]),_:1})])):p("",!0),t.guided.length>0?(s(),r("div",{key:2,class:R(["flex flex-wrap justify-center gap-8 px-4 sm:px-12",{"pb-8":t.unguided.length==0}])},[(s(!0),r(a,null,d(t.guided,l=>(s(),f(C,{key:l.id,project:l,id:l.id},null,8,["project","id"]))),128)),(s(!0),r(a,null,d(_.value[t.id]-t.guided.length,l=>(s(),f(b,{key:l,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))],2)):p("",!0),t.unguided.length>0?(s(),r("div",J,[c($,{class:"min-w-fit pr-4",size:"small",severity:"info"},{default:y(()=>[w(k(i.$t("pages.projects.practice")),1)]),_:1})])):p("",!0),t.unguided.length>0?(s(),r("div",Q,[(s(!0),r(a,null,d(t.unguided,l=>(s(),f(C,{key:l.id,project:l,onAfterRemove:x},null,8,["project"]))),128)),(s(!0),r(a,null,d(v.value[t.id]-t.unguided.length,l=>(s(),f(b,{key:l,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))])):p("",!0)]))),128))])}}});export{je as default};
