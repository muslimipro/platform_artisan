import{_ as I,o,c as i,y as c,X as D,m as M,a as m,ab as te,t as K,ac as X,d as N,ad as ae,j as U,ae as O,h as R,k as g,w as T,b,u as F,Y as _,e as W,s as q,r as ne,af as oe,i as se,ag as ie,f as re,A as le,F as B,n as P,x as de}from"./index-F0pUg8he.js";import{s as ue}from"./index-PwjCpPjq.js";import{_ as ce}from"./AHeader.vue_vue_type_script_setup_true_lang-C9pEPMfQ.js";import{s as he,a as pe}from"./index-DgKKQqvv.js";import{b as me}from"./index-VUcTiFhv.js";import{s as fe}from"./logo-Dz7jfZKw.js";import{a as V,t as E}from"./types-D6KDAI2I.js";import{P as L}from"./pibody-BwAjMvHk.js";import{u as ve,a as ye,m as be}from"./useSortable-0qs7pghJ.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BKXHChUD.js";import"./index-2f9_IIyA.js";var ge=function(t){var a=t.dt;return`
.p-card {
    background: `.concat(a("card.background"),`;
    color: `).concat(a("card.color"),`;
    box-shadow: `).concat(a("card.shadow"),`;
    border-radius: `).concat(a("card.border.radius"),`;
    display: flex;
    flex-direction: column;
}

.p-card-caption {
    display: flex;
    flex-direction: column;
    gap: `).concat(a("card.caption.gap"),`;
}

.p-card-body {
    padding: `).concat(a("card.body.padding"),`;
    display: flex;
    flex-direction: column;
    gap: `).concat(a("card.body.gap"),`;
}

.p-card-title {
    font-size: `).concat(a("card.title.font.size"),`;
    font-weight: `).concat(a("card.title.font.weight"),`;
}

.p-card-subtitle {
    color: `).concat(a("card.subtitle.color"),`;
}
`)},we={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},ke=I.extend({name:"card",theme:ge,classes:we}),xe={name:"BaseCard",extends:te,style:ke,provide:function(){return{$pcCard:this,$parentInstance:this}}},H={name:"Card",extends:xe,inheritAttrs:!1};function Me(e,t,a,s,l,n){return o(),i("div",c({class:e.cx("root")},e.ptmi("root")),[e.$slots.header?(o(),i("div",c({key:0,class:e.cx("header")},e.ptm("header")),[D(e.$slots,"header")],16)):M("",!0),m("div",c({class:e.cx("body")},e.ptm("body")),[e.$slots.title||e.$slots.subtitle?(o(),i("div",c({key:0,class:e.cx("caption")},e.ptm("caption")),[e.$slots.title?(o(),i("div",c({key:0,class:e.cx("title")},e.ptm("title")),[D(e.$slots,"title")],16)):M("",!0),e.$slots.subtitle?(o(),i("div",c({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[D(e.$slots,"subtitle")],16)):M("",!0)],16)):M("",!0),m("div",c({class:e.cx("content")},e.ptm("content")),[D(e.$slots,"content")],16),e.$slots.footer?(o(),i("div",c({key:1,class:e.cx("footer")},e.ptm("footer")),[D(e.$slots,"footer")],16)):M("",!0)],16)],16)}H.render=Me;var Re=function(t){var a=t.dt;return`
.p-knob-range {
    fill: none;
    transition: stroke 0.1s ease-in;
}

.p-knob-value {
    animation-name: p-knob-dash-frame;
    animation-fill-mode: forwards;
    fill: none;
}

.p-knob-text {
    font-size: 1.3rem;
    text-align: center;
}

.p-knob svg {
    border-radius: 50%;
    outline-color: transparent;
    transition: background `.concat(a("knob.transition.duration"),", color ").concat(a("knob.transition.duration"),", outline-color ").concat(a("knob.transition.duration"),", box-shadow ").concat(a("knob.transition.duration"),`;
}

.p-knob svg:focus-visible {
    box-shadow: `).concat(a("knob.focus.ring.shadow"),`;
    outline: `).concat(a("knob.focus.ring.width")," ").concat(a("knob.focus.ring.style")," ").concat(a("knob.focus.ring.color"),`;
    outline-offset: `).concat(a("knob.focus.ring.offset"),`;
}

@keyframes p-knob-dash-frame {
    100% {
        stroke-dashoffset: 0;
    }
}
`)},je={root:function(t){var a=t.instance,s=t.props;return["p-knob p-component",{"p-disabled":s.disabled,"p-invalid":a.$invalid}]},range:"p-knob-range",value:"p-knob-value",text:"p-knob-text"},$e=I.extend({name:"knob",theme:Re,classes:je}),Ce={name:"BaseKnob",extends:me,props:{size:{type:Number,default:100},readonly:{type:Boolean,default:!1},step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},valueColor:{type:String,default:function(){return X("knob.value.background").variable}},rangeColor:{type:String,default:function(){return X("knob.range.background").variable}},textColor:{type:String,default:function(){return X("knob.text.color").variable}},strokeWidth:{type:Number,default:14},showValue:{type:Boolean,default:!0},valueTemplate:{type:[String,Function],default:"{value}"},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:$e,provide:function(){return{$pcKnob:this,$parentInstance:this}}},x=3.14159265358979,G={name:"Knob",extends:Ce,inheritAttrs:!1,emits:["change"],data:function(){return{radius:40,midX:50,midY:50,minRadians:4*x/3,maxRadians:-x/3}},methods:{updateValueByOffset:function(t,a){var s=t-this.size/2,l=this.size/2-a,n=Math.atan2(l,s),v=-x/2-x/6;this.updateModel(n,v)},updateModel:function(t,a){var s;if(t>this.maxRadians)s=this.mapRange(t,this.minRadians,this.maxRadians,this.min,this.max);else if(t<a)s=this.mapRange(t+2*x,this.minRadians,this.maxRadians,this.min,this.max);else return;var l=Math.round((s-this.min)/this.step)*this.step+this.min;this.writeValue(l),this.$emit("change",l)},updateModelValue:function(t){t>this.max?this.writeValue(this.max):t<this.min?this.writeValue(this.min):this.writeValue(t)},mapRange:function(t,a,s,l,n){return(t-a)*(n-l)/(s-a)+l},onClick:function(t){!this.disabled&&!this.readonly&&this.updateValueByOffset(t.offsetX,t.offsetY)},onBlur:function(t){var a,s;(a=(s=this.formField).onBlur)===null||a===void 0||a.call(s,t)},onMouseDown:function(t){!this.disabled&&!this.readonly&&(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),t.preventDefault())},onMouseUp:function(t){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.preventDefault())},onTouchStart:function(t){!this.disabled&&!this.readonly&&(window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),t.preventDefault())},onTouchEnd:function(t){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),t.preventDefault())},onMouseMove:function(t){!this.disabled&&!this.readonly&&(this.updateValueByOffset(t.offsetX,t.offsetY),t.preventDefault())},onTouchMove:function(t){if(!this.disabled&&!this.readonly&&t.touches.length==1){var a=this.$el.getBoundingClientRect(),s=t.targetTouches.item(0),l=s.clientX-a.left,n=s.clientY-a.top;this.updateValueByOffset(l,n)}},onKeyDown:function(t){if(!this.disabled&&!this.readonly)switch(t.code){case"ArrowRight":case"ArrowUp":{t.preventDefault(),this.updateModelValue(this.d_value+this.step);break}case"ArrowLeft":case"ArrowDown":{t.preventDefault(),this.updateModelValue(this.d_value-this.step);break}case"Home":{t.preventDefault(),this.writeValue(this.min);break}case"End":{t.preventDefault(),this.writeValue(this.max);break}case"PageUp":{t.preventDefault(),this.updateModelValue(this.d_value+10);break}case"PageDown":{t.preventDefault(),this.updateModelValue(this.d_value-10);break}}}},computed:{rangePath:function(){return"M ".concat(this.minX," ").concat(this.minY," A ").concat(this.radius," ").concat(this.radius," 0 1 1 ").concat(this.maxX," ").concat(this.maxY)},valuePath:function(){return"M ".concat(this.zeroX," ").concat(this.zeroY," A ").concat(this.radius," ").concat(this.radius," 0 ").concat(this.largeArc," ").concat(this.sweep," ").concat(this.valueX," ").concat(this.valueY)},zeroRadians:function(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)},valueRadians:function(){return this.mapRange(this.d_value,this.min,this.max,this.minRadians,this.maxRadians)},minX:function(){return this.midX+Math.cos(this.minRadians)*this.radius},minY:function(){return this.midY-Math.sin(this.minRadians)*this.radius},maxX:function(){return this.midX+Math.cos(this.maxRadians)*this.radius},maxY:function(){return this.midY-Math.sin(this.maxRadians)*this.radius},zeroX:function(){return this.midX+Math.cos(this.zeroRadians)*this.radius},zeroY:function(){return this.midY-Math.sin(this.zeroRadians)*this.radius},valueX:function(){return this.midX+Math.cos(this.valueRadians)*this.radius},valueY:function(){return this.midY-Math.sin(this.valueRadians)*this.radius},largeArc:function(){return Math.abs(this.zeroRadians-this.valueRadians)<x?0:1},sweep:function(){return this.valueRadians>this.zeroRadians?0:1},valueToDisplay:function(){return typeof this.valueTemplate=="string"?this.valueTemplate.replace(/{value}/g,this.d_value):this.valueTemplate(this.d_value)}}},De=["width","height","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-labelledby","aria-label"],Te=["d","stroke-width","stroke"],Be=["d","stroke-width","stroke"],Pe=["fill"];function Ve(e,t,a,s,l,n){return o(),i("div",c({class:e.cx("root")},e.ptmi("root")),[(o(),i("svg",c({viewBox:"0 0 100 100",role:"slider",width:e.size,height:e.size,tabindex:e.readonly||e.disabled?-1:e.tabindex,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.d_value,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,onClick:t[0]||(t[0]=function(){return n.onClick&&n.onClick.apply(n,arguments)}),onBlur:t[1]||(t[1]=function(){return n.onBlur&&n.onBlur.apply(n,arguments)}),onKeydown:t[2]||(t[2]=function(){return n.onKeyDown&&n.onKeyDown.apply(n,arguments)}),onMousedown:t[3]||(t[3]=function(){return n.onMouseDown&&n.onMouseDown.apply(n,arguments)}),onMouseup:t[4]||(t[4]=function(){return n.onMouseUp&&n.onMouseUp.apply(n,arguments)}),onTouchstartPassive:t[5]||(t[5]=function(){return n.onTouchStart&&n.onTouchStart.apply(n,arguments)}),onTouchend:t[6]||(t[6]=function(){return n.onTouchEnd&&n.onTouchEnd.apply(n,arguments)})},e.ptm("svg")),[m("path",c({d:n.rangePath,"stroke-width":e.strokeWidth,stroke:e.rangeColor,class:e.cx("range")},e.ptm("range")),null,16,Te),m("path",c({d:n.valuePath,"stroke-width":e.strokeWidth,stroke:e.valueColor,class:e.cx("value")},e.ptm("value")),null,16,Be),e.showValue?(o(),i("text",c({key:0,x:50,y:57,"text-anchor":"middle",fill:e.textColor,class:e.cx("text")},e.ptm("text")),K(n.valueToDisplay),17,Pe)):M("",!0)],16,De))],16)}G.render=Ve;const ze={class:"h-[174px] overflow-hidden"},Se={class:"flex justify-between items-center px-4 py-1"},Xe={class:"pb-1"},Ye={key:0,class:"flex"},_e={key:1},A=N({__name:"ProjectCard",props:{project:{}},emits:["after-remove"],setup(e,{emit:t}){const a=W(),s=ae(),l=U(),{user:n}=O(l),v=R(!1),d=e,z=t;function h(){s.require({message:"Are you sure you want to Delete?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{j()}})}async function j(){v.value=!0;try{await V.deleteProjectByID(d.project.id),z("after-remove")}catch(r){console.log(r)}finally{v.value=!1}}function w(){a.push(`/project/${d.project.id}/edit`)}const y=R(d.project.cover_image.length>0?d.project.cover_image:L);function k(){d.project.cover_gif&&(y.value=d.project.cover_gif)}function S(){y.value=d.project.cover_image.length>0?d.project.cover_image:L}return(r,u)=>{const f=fe,$=he,C=q,p=G,J=pe,Q=H,Z=ne("RouterLink");return o(),g(Z,{to:v.value?"":`/project/${d.project.id}`},{default:T(()=>[b(Q,{style:{width:"300px",height:"234px",overflow:"hidden"},class:"p-0",dt:{body:{padding:"0px",gap:"2px"}}},{header:T(()=>[m("div",ze,[b(f,{alt:"user header",src:y.value,class:"animate-fadein animate-once animate-duration-1000 animate-ease-in-out",onMouseover:k,onMouseleave:S},null,8,["src"])])]),subtitle:T(()=>{var Y;return[m("div",Se,[m("div",null,[m("div",Xe,K(d.project.title),1),b($,{"model-value":d.project.level,readonly:""},null,8,["model-value"])]),((Y=F(n))==null?void 0:Y.user_type)=="editor"?(o(),i("div",Ye,[b(C,{icon:"pi pi-pen-to-square",severity:"info",variant:"text",rounded:"","aria-label":"Edit",onClick:_(w,["prevent"])}),b(C,{icon:"pi pi-trash",severity:"danger",variant:"text",rounded:"","aria-label":"Remove",onClick:_(h,["prevent"]),disabled:v.value,loading:v.value},null,8,["disabled","loading"])])):(o(),i("div",_e,[d.project.student_progress<100?(o(),g(p,{key:0,"model-value":d.project.student_progress,size:50,"value-template":ee=>`${ee}%`,readonly:"",valueColor:"orange"},null,8,["model-value","value-template"])):(o(),g(J,{key:1,label:r.$t("done"),icon:"pi pi-check",class:"bg-primary text-sm h-6 text-white font-semibold"},{icon:T(()=>u[0]||(u[0]=[m("i",{class:"pi pi-check text-white font-semibold",style:{"font-size":"12px"}},null,-1)])),_:1},8,["label"]))]))])]}),_:1})]),_:1},8,["to"])}}}),Ee={class:"flex flex-col min-h-screen bg-slate-50"},Le={class:"border border-dashed rounded-xl border-green-400 overflow-hidden"},Ae={key:1,class:"flex flex-wrap justify-center gap-8 px-12 py-6"},Qe=N({__name:"ProjectsView",setup(e){const t=oe("el"),a=se(),{locale:s}=ie(),l=W(),n=ve(),{addLesson:v}=n,d=U(),{user:z}=O(d),h=R([]),j=R(0),w=R(!1),y=R(!1);ye(t,h,{onUpdate:r=>{be(h.value,r.oldIndex,r.newIndex,r),de(async()=>{const u=[];h.value.map(f=>{const $=parseInt(f.id,10);u.push($)});try{await V.changeProjectsOrder(u),a.add({severity:"success",summary:"Projects order saved!",life:2e3})}catch(f){a.add({severity:"error",summary:"Order set error!",detail:f,life:2e3})}})}});async function k(){if(!w.value){w.value=!0;try{const{data:r}=await V.getProjects();w.value=!1,h.value=[],j.value=r.length;for(const u of r){const f=await E(u,s.value);h.value.push(f)}}catch(r){console.log(r)}finally{w.value=!1}}}re(k),le(s,k);async function S(){y.value=!0;try{const{data:r}=await V.createProject(),u=await E(r,s.value);v(u),l.push(`/project/${u.id}/edit`)}catch(r){console.log(r)}finally{y.value=!1}}return(r,u)=>{var C;const f=ue,$=q;return o(),i("div",Ee,[b(ce),((C=F(z))==null?void 0:C.user_type)=="editor"?(o(),i("div",{key:0,ref_key:"el",ref:t,class:"flex flex-wrap justify-center gap-8 px-12 py-6"},[(o(!0),i(B,null,P(h.value,p=>(o(),g(A,{key:p.id,project:p,onAfterRemove:k},null,8,["project"]))),128)),(o(!0),i(B,null,P(j.value-h.value.length,p=>(o(),g(f,{key:p,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128)),m("div",Le,[b($,{variant:"text",style:{width:"300px",height:"234px"},class:"bg-green-50",onClick:S,loading:y.value,disabled:y.value},{icon:T(()=>u[0]||(u[0]=[m("i",{class:"pi pi-plus text-3xl"},null,-1)])),_:1},8,["loading","disabled"])])],512)):(o(),i("div",Ae,[(o(!0),i(B,null,P(h.value,p=>(o(),g(A,{key:p.id,project:p,onAfterRemove:k},null,8,["project"]))),128)),(o(!0),i(B,null,P(j.value-h.value.length,p=>(o(),g(f,{key:p,width:"300px",height:"234px",class:"rounded-xl shadow-sm"}))),128))]))])}}});export{Qe as default};
