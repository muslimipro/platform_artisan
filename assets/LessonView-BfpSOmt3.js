import{u as j,s as H,S as O,_ as X,T as G,a as J}from"./SimulationView-D-22yZ-F.js";import{s as K}from"./index-q6oj3jDa.js";import{s as Q,a as U,t as W}from"./types-MG-PSILO.js";import{ac as C,ao as B,ag as Y,ap as V,ae as Z,an as D,e as $,o as N,w as T,D as s,E as f,I as g,T as a,af as t,V as o,a4 as M,aa as ee,ai as q,c as te,X as x,_ as y,al as se}from"./index-BzwGzcTW.js";import{L as ae,a as ne}from"./logo-DAC_l6Ja.js";import{_ as oe}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-PV3eNakI.js";import{a as le,t as ie}from"./dto-CnTnK2Ls.js";import{_ as re,a as ce,M as ue,b as pe,c as me}from"./QuestionStep.vue_vue_type_script_setup_true_lang-DfIAc8em.js";import"./pibody-B70zHXNr.js";import"./http-3QLNPXGC.js";import"./index-B7iqh13j.js";const fe={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},de={class:"flex flex-1 items-center"},_e={key:1,class:"flex items-center gap-1"},ve={class:"flex items-center gap-1"},ye={class:"flex flex-1 justify-end items-center gap-2"},ge=C({__name:"LessonHeader",setup(L){const{locale:u}=B(),l=Y(),n=V(),h=Z(),e=j(),{lesson:d,stepIndex:i,stepLoading:r}=D(e),{changeStep:p,setSteps:_}=e,k=$(!1);function R(c){switch(c){case"article":return"pi pi-align-left";case"code":return"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function I(){if(!k.value){k.value=!0;try{const{data:c}=await le.getProjectStepsByID(n.params.id.toString()),m=[];for(const[b,v]of c.entries())if(b==0){const w=await ie(v,u.value,!1);m.push(w)}else{const w={id:v.id.toString(),title:"",type:v.step_type,progress:"nothing",inner:{contents:[]}};m.push(w)}_(m)}catch(c){alert(c)}finally{k.value=!1}}}N(I),T(u,I,{immediate:!1});const P=$(),E=$([{label:"Profile",icon:"pi pi-user"},{label:"Log out",icon:"pi pi-sign-out",command:()=>{h.logout(),l.replace({name:"login"})}}]),A=c=>{P.value.toggle(c)};return(c,m)=>{const b=ne,v=q,w=Q,F=K;return s(),f("div",fe,[g("div",de,[a(b,{src:t(ae),width:"32"},null,8,["src"]),m[1]||(m[1]=g("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),a(v,{id:"#projects",icon:"pi pi-angle-left",label:c.$t("projects"),severity:"secondary",variant:"text",onClick:m[0]||(m[0]=z=>t(l).push({name:"projects"})),size:"small"},null,8,["label"])]),k.value||t(d)==null?(s(),o(w,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(s(),f("div",_e,[g("div",ve,[(s(!0),f(M,null,ee(t(d).steps,(z,S)=>(s(),o(v,{key:z.id,icon:R(z.type),rounded:"",severity:t(i)==S?void 0:"secondary",variant:t(i)==S?void 0:"outlined",onClick:je=>t(p)(S),class:"h-8 w-8",disabled:t(r),loading:S==t(i)&&t(r)},null,8,["icon","severity","variant","onClick","disabled","loading"]))),128))])])),g("div",ye,[a(oe),a(v,{type:"button",icon:"pi pi-ellipsis-v",onClick:A,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",variant:"outlined",severity:"secondary",class:"border border-slate-300 bg-slate-50",style:{width:"34px"}}),a(F,{ref_key:"menu",ref:P,id:"overlay_menu",model:E.value,popup:!0},null,8,["model"])])])}}}),he={class:"flex flex-col p-4 gap-4 overflow-scroll h-full justify-between bg-white"},xe={key:0},we={key:1,class:"flex"},ke=C({__name:"LessonDiv",setup(L){const u=j(),{lesson:l,stepIndex:n}=D(u),{changeStep:h}=u,e=te(()=>{var r;return n.value==null?null:((r=l.value)==null?void 0:r.steps[n.value])??null});async function d(){n.value!=null&&h(n.value-1)}async function i(){n.value!=null&&h(n.value+1)}return(r,p)=>{const _=q;return s(),f("div",he,[e.value?(s(),f("div",xe,[e.value.type=="article"?(s(),o(t(re),{key:0,step:e.value},null,8,["step"])):e.value.type=="code"?(s(),o(t(ce),{key:1,step:e.value},null,8,["step"])):e.value.type=="matching"?(s(),o(t(ue),{key:2,step:e.value},null,8,["step"])):e.value.type=="open"?(s(),o(t(pe),{key:3,step:e.value},null,8,["step"])):e.value.type=="question"?(s(),o(t(me),{key:4,step:e.value},null,8,["step"])):x("",!0)])):x("",!0),t(l)!=null&&t(l).steps!=null&&t(l).steps.length>0&&e.value?(s(),f("div",we,[t(n)!==0?(s(),o(_,{key:0,label:"Previous",icon:"pi pi-angle-left",size:"small",onClick:d})):x("",!0),t(n)<t(l).steps.length-1?(s(),o(_,{key:1,label:"Next",icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:i})):x("",!0)])):x("",!0)])}}}),Se={key:1,class:"h-[51px]"},$e={class:"flex bg-surface-0",style:{height:"calc(100vh - 52px)"}},be={class:"flex justify-center h-full"},ze={class:"max-w-[400px] w-full"},Re=C({__name:"LessonView",setup(L){const{locale:u}=B(),l=V(),n=j(),{setLesson:h}=n,e=$(!1);async function d(){if(!e.value){e.value=!0;try{const{data:i}=await U.getProjectByID(l.params.id.toString()),r=await W(i,u.value);h(r)}catch(i){alert(i)}finally{e.value=!1}}}return N(d),T(u,d),(i,r)=>{const p=J,_=H;return s(),f(M,null,[e.value?(s(),f("div",Se)):(s(),o(ge,{key:0})),g("div",$e,[a(_,{class:"w-full rounded-none"},{default:y(()=>[a(p,{size:33,minSize:10,class:"max-w-[467px] w-full"},{default:y(()=>[a(O)]),_:1}),a(p,{size:34,minSize:10},{default:y(()=>[a(_,{layout:"vertical",class:"h-full w-full"},{default:y(()=>[a(p,{size:65,minSize:10},{default:y(()=>[a(X)]),_:1}),a(p,{size:35,minSize:10},{default:y(()=>[a(G)]),_:1})]),_:1})]),_:1}),a(p,{size:33,minSize:10,class:se(["max-w-md mx-auto",{"animate-fadeinright animate-once animate-duration-1000 animate-ease-in-out":!0}])},{default:y(()=>[g("div",be,[g("div",ze,[e.value?x("",!0):(s(),o(ke,{key:0}))])])]),_:1})]),_:1})])],64)}}});export{Re as default};
