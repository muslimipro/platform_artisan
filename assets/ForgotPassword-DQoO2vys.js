import{h as B,z as g,s as P}from"./index-DLxlkzjw.js";import{s as R}from"./index-6yMZBmiP.js";import{s as C}from"./index-BWuXm0pQ.js";import{s as N}from"./index-DpB8_Bbd.js";import{a as S,u as z,r as c,Y as E,b as p,e as L,f as a,h as o,g as _,w as i,t as r,i as x,D as b,K as y,F as j,l as q,m as A}from"./index-CTzBRDkF.js";import{_ as D}from"./AuthHeader.vue_vue_type_script_setup_true_lang-CQJd7NFV.js";import{b as M}from"./http-C6s3B4Yp.js";import"./index-UttTpJwS.js";import"./index-CdRm71bP.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-C7fWNxxH.js";import"./index-DMNQpKnn.js";import"./index-_kVx5MDE.js";import"./index-DyBaiWfq.js";import"./index-C7LZT1XK.js";import"./logo-D1-3uCnC.js";const Y={class:"card flex flex-col items-center pt-4"},H={class:"flex flex-col flex-1 items-center justify-center my-4"},K={class:"text-4xl font-semibold px-2 mr-4 text-center"},U={class:"text-md px-2 mt-4 mr-4 text-slate-500 text-center"},G={class:"flex flex-col gap-1"},J={for:"email"},pe=S({__name:"ForgotPassword",setup(O){const u=z(),$=q(),l=c(!1),s=c(0);let n;const w=()=>{s.value=60,n=setInterval(()=>{s.value>0?s.value--:clearInterval(n)},1e3)},h=c({email:""}),k=B(g.object({email:g.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."})})),T=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:t}=await M.requestPasswordReset(e.states.email.value);u.add({severity:"success",summary:t.message,life:3e3}),w()}catch(t){u.add({severity:"error",summary:t.response.data.error,life:3e3})}finally{l.value=!1}}};return E(()=>{clearInterval(n)}),(e,t)=>{const d=A,V=N,F=C,f=R,I=P;return p(),L(j,null,[a(D),o("div",Y,[a(d,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:t[0]||(t[0]=m=>_($).replace({name:"login"}))},null,8,["label"]),a(I,{initialValues:h.value,resolver:_(k),onSubmit:T,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(m=>{var v;return[o("div",H,[o("p",K,r(e.$t("pages.login.forgotPassword")),1),o("p",U,r(e.$t("pages.login.provideYourAccountsEmailToResetPassword")),1)]),o("div",G,[a(F,{variant:"on"},{default:i(()=>[a(V,{id:"email",name:"email",type:"text",fluid:""}),o("label",J,r(e.$t("email")),1)]),_:1}),(v=m.email)!=null&&v.invalid?(p(),x(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[b(r(m.email.error.message),1)]),_:2},1024)):y("",!0)]),s.value>0?(p(),x(f,{key:0,severity:"success"},{default:i(()=>[b(r(e.$t("pages.login.weHaveSentLinkToResetPassword")),1)]),_:1})):y("",!0),a(d,{type:"submit",label:s.value>0?`${e.$t("pages.login.resendIn")} ${s.value}s`:e.$t("pages.login.send"),loading:l.value,disabled:l.value||s.value>0},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{pe as default};
