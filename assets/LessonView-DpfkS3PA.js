import{_ as Qe,S as et,T as tt,s as nt,a as st}from"./SimulationView-Dmv3WkJT.js";import{_ as ne,$ as ze,o,c as g,X as G,y as R,ab as se,Z as Ae,a as m,ah as fe,P as $e,ai as at,aj as be,a3 as it,ak as ot,al as _e,am as je,an as F,k as v,a9 as ye,m as I,ao as Ve,F as J,ap as U,w as D,aq as ae,d as Q,ae as Z,ar as ie,q as X,af as lt,h as E,ag as oe,f as xe,A as M,b,u as s,n as Te,s as le,e as Se,j as De,t as we,i as rt,as as ut,at as he,au as ct,av as dt,aw as me,l as ge}from"./index-ngKO0IH0.js";import{u as pt,T as vt,L as ft,s as bt,p as ht,l as mt,t as gt,a as yt,e as wt,m as _t,b as $t,c as kt,g as xt,d as Tt,f as St,h as Ct,i as Bt,j as Ie,k as Pt,n as Lt,o as zt,q as It}from"./index-Bu61_0WT.js";import{u as re,a as Y,t as Ne,b as At,_ as Oe,c as Ee,M as Re,d as Ke,e as ke}from"./QuestionStep.vue_vue_type_script_setup_true_lang-CWHfVnhX.js";import{s as Fe,a as He}from"./index-afXciwfA.js";import{L as qe,s as Ce}from"./logo-C6HUOSsX.js";import{_ as We}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-yTsAru4w.js";import{a as jt}from"./index-CoLnm8af.js";import{a as Vt,t as Dt}from"./types-Df3fvLJQ.js";import{a as Nt,t as Ot}from"./types-Mc1n0M0D.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pibody-BwAjMvHk.js";import"./index-26-L5GTo.js";import"./index-D0T-IxUR.js";import"./index-D1BTjiMw.js";var Et=function(e){var t=e.dt;return`
.p-tabs {
    display: flex;
    flex-direction: column;
}

.p-tablist {
    display: flex;
    position: relative;
}

.p-tabs-scrollable > .p-tablist {
    overflow: hidden;
}

.p-tablist-viewport {
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: none;
    overscroll-behavior: contain auto;
}

.p-tablist-viewport::-webkit-scrollbar {
    display: none;
}

.p-tablist-tab-list {
    position: relative;
    display: flex;
    background: `.concat(t("tabs.tablist.background"),`;
    border-style: solid;
    border-color: `).concat(t("tabs.tablist.border.color"),`;
    border-width: `).concat(t("tabs.tablist.border.width"),`;
}

.p-tablist-content {
    flex-grow: 1;
}

.p-tablist-nav-button {
    all: unset;
    position: absolute !important;
    flex-shrink: 0;
    inset-block-start: 0;
    z-index: 2;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: `).concat(t("tabs.nav.button.background"),`;
    color: `).concat(t("tabs.nav.button.color"),`;
    width: `).concat(t("tabs.nav.button.width"),`;
    transition: color `).concat(t("tabs.transition.duration"),", outline-color ").concat(t("tabs.transition.duration"),", box-shadow ").concat(t("tabs.transition.duration"),`;
    box-shadow: `).concat(t("tabs.nav.button.shadow"),`;
    outline-color: transparent;
    cursor: pointer;
}

.p-tablist-nav-button:focus-visible {
    z-index: 1;
    box-shadow: `).concat(t("tabs.nav.button.focus.ring.shadow"),`;
    outline: `).concat(t("tabs.nav.button.focus.ring.width")," ").concat(t("tabs.nav.button.focus.ring.style")," ").concat(t("tabs.nav.button.focus.ring.color"),`;
    outline-offset: `).concat(t("tabs.nav.button.focus.ring.offset"),`;
}

.p-tablist-nav-button:hover {
    color: `).concat(t("tabs.nav.button.hover.color"),`;
}

.p-tablist-prev-button {
    inset-inline-start: 0;
}

.p-tablist-next-button {
    inset-inline-end: 0;
}

.p-tablist-prev-button:dir(rtl),
.p-tablist-next-button:dir(rtl) {
    transform: rotate(180deg);
}


.p-tab {
    flex-shrink: 0;
    cursor: pointer;
    user-select: none;
    position: relative;
    border-style: solid;
    white-space: nowrap;
    background: `).concat(t("tabs.tab.background"),`;
    border-width: `).concat(t("tabs.tab.border.width"),`;
    border-color: `).concat(t("tabs.tab.border.color"),`;
    color: `).concat(t("tabs.tab.color"),`;
    padding: `).concat(t("tabs.tab.padding"),`;
    font-weight: `).concat(t("tabs.tab.font.weight"),`;
    transition: background `).concat(t("tabs.transition.duration"),", border-color ").concat(t("tabs.transition.duration"),", color ").concat(t("tabs.transition.duration"),", outline-color ").concat(t("tabs.transition.duration"),", box-shadow ").concat(t("tabs.transition.duration"),`;
    margin: `).concat(t("tabs.tab.margin"),`;
    outline-color: transparent;
}

.p-tab:not(.p-disabled):focus-visible {
    z-index: 1;
    box-shadow: `).concat(t("tabs.tab.focus.ring.shadow"),`;
    outline: `).concat(t("tabs.tab.focus.ring.width")," ").concat(t("tabs.tab.focus.ring.style")," ").concat(t("tabs.tab.focus.ring.color"),`;
    outline-offset: `).concat(t("tabs.tab.focus.ring.offset"),`;
}

.p-tab:not(.p-tab-active):not(.p-disabled):hover {
    background: `).concat(t("tabs.tab.hover.background"),`;
    border-color: `).concat(t("tabs.tab.hover.border.color"),`;
    color: `).concat(t("tabs.tab.hover.color"),`;
}

.p-tab-active {
    background: `).concat(t("tabs.tab.active.background"),`;
    border-color: `).concat(t("tabs.tab.active.border.color"),`;
    color: `).concat(t("tabs.tab.active.color"),`;
}

.p-tabpanels {
    background: `).concat(t("tabs.tabpanel.background"),`;
    color: `).concat(t("tabs.tabpanel.color"),`;
    padding: `).concat(t("tabs.tabpanel.padding"),`;
    outline: 0 none;
}

.p-tabpanel:focus-visible {
    box-shadow: `).concat(t("tabs.tabpanel.focus.ring.shadow"),`;
    outline: `).concat(t("tabs.tabpanel.focus.ring.width")," ").concat(t("tabs.tabpanel.focus.ring.style")," ").concat(t("tabs.tabpanel.focus.ring.color"),`;
    outline-offset: `).concat(t("tabs.tabpanel.focus.ring.offset"),`;
}

.p-tablist-active-bar {
    z-index: 1;
    display: block;
    position: absolute;
    inset-block-end: `).concat(t("tabs.active.bar.bottom"),`;
    height: `).concat(t("tabs.active.bar.height"),`;
    background: `).concat(t("tabs.active.bar.background"),`;
    transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
}
`)},Rt={root:function(e){var t=e.props;return["p-tabs p-component",{"p-tabs-scrollable":t.scrollable}]}},Kt=ne.extend({name:"tabs",theme:Et,classes:Rt}),Ft={name:"BaseTabs",extends:se,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:Kt,provide:function(){return{$pcTabs:this,$parentInstance:this}}},Me={name:"Tabs",extends:Ft,inheritAttrs:!1,emits:["update:value"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(e){this.id=e||ze()},value:function(e){this.d_value=e}},mounted:function(){this.id=this.id||ze()},methods:{updateValue:function(e){this.d_value!==e&&(this.d_value=e,this.$emit("update:value",e))},isVertical:function(){return this.orientation==="vertical"}}};function Ht(n,e,t,i,r,a){return o(),g("div",R({class:n.cx("root")},n.ptmi("root")),[G(n.$slots,"default")],16)}Me.render=Ht;var Ue={name:"ChevronLeftIcon",extends:Ae};function qt(n,e,t,i,r,a){return o(),g("svg",R({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.pti()),e[0]||(e[0]=[m("path",{d:"M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z",fill:"currentColor"},null,-1)]),16)}Ue.render=qt;var Ze={name:"ChevronRightIcon",extends:Ae};function Wt(n,e,t,i,r,a){return o(),g("svg",R({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.pti()),e[0]||(e[0]=[m("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"},null,-1)]),16)}Ze.render=Wt;var Mt={root:"p-tablist",content:function(e){var t=e.instance;return["p-tablist-content",{"p-tablist-viewport":t.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},Ut=ne.extend({name:"tablist",classes:Mt}),Zt={name:"BaseTabList",extends:se,props:{},style:Ut,provide:function(){return{$pcTabList:this,$parentInstance:this}}},Ge={name:"TabList",extends:Zt,inheritAttrs:!1,inject:["$pcTabs"],mutationObserver:null,data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0,isRTL:!1}},resizeObserver:void 0,watch:{showNavigators:function(e){e?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var e=this;this.$nextTick(function(){e.updateInkBar()}),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver()),this.updateDirection(),this.observeDirectionChanges()},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver(),this.mutationObserver&&this.mutationObserver.disconnect()},methods:{onScroll:function(e){this.showNavigators&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick:function(){var e=this.$refs.content,t=fe(e),i;this.isRTL?i=e.scrollLeft+t:i=e.scrollLeft-t,e.scrollLeft=i<=0?0:i},onNextButtonClick:function(){var e=this.$refs.content,t=fe(e)-this.getVisibleButtonWidths(),i,r;this.isRTL?(i=e.scrollLeft-t,r=e.scrollWidth+t):(i=e.scrollLeft+t,r=e.scrollWidth-t),e.scrollLeft=i>=r?r:i},bindResizeObserver:function(){var e=this;this.resizeObserver=new ResizeObserver(function(){return e.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var e;(e=this.resizeObserver)===null||e===void 0||e.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var e=this.$refs,t=e.content,i=e.inkbar,r=e.tabs,a=$e(t,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(i.style.height=at(a)+"px",i.style.top=be(a).top-be(r).top+"px"):(i.style.width=it(a)+"px",i.style.left=be(a).left-be(r).left+"px")},updateButtonState:function(){var e=this.$refs,t=e.list,i=e.content,r=i.scrollLeft,a=i.scrollTop,d=i.scrollWidth,h=i.scrollHeight,k=i.offsetWidth,C=i.offsetHeight,P=[fe(i),ot(i)],T=P[0],L=P[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=a!==0,this.isNextButtonEnabled=t.offsetHeight>=C&&parseInt(a)!==h-L):(this.isPrevButtonEnabled=r!==0,this.isNextButtonEnabled=t.offsetWidth>=k&&parseInt(r)!==d-T)},getVisibleButtonWidths:function(){var e=this.$refs,t=e.prevBtn,i=e.nextBtn;return[t,i].reduce(function(r,a){return a?r+fe(a):r},0)},updateDirection:function(){this.isRTL=!!this.$el.closest('[dir="rtl"]')},observeDirectionChanges:function(){var e=this,t=document.documentElement,i={attributes:!0,attributeFilter:["dir"]};this.mutationObserver=new MutationObserver(function(){e.updateDirection()}),this.mutationObserver.observe(t,i)}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0}},components:{ChevronLeftIcon:Ue,ChevronRightIcon:Ze},directives:{ripple:_e}},Gt=["aria-label","tabindex"],Xt=["aria-orientation"],Yt=["aria-label","tabindex"];function Jt(n,e,t,i,r,a){var d=je("ripple");return o(),g("div",R({ref:"list",class:n.cx("root")},n.ptmi("root")),[a.showNavigators&&r.isPrevButtonEnabled?F((o(),g("button",R({key:0,ref:"prevButton",class:n.cx("prevButton"),"aria-label":a.prevButtonAriaLabel,tabindex:a.$pcTabs.tabindex,onClick:e[0]||(e[0]=function(){return a.onPrevButtonClick&&a.onPrevButtonClick.apply(a,arguments)})},n.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(o(),v(ye(a.templates.previcon||"ChevronLeftIcon"),R({"aria-hidden":"true"},n.ptm("prevIcon")),null,16))],16,Gt)),[[d]]):I("",!0),m("div",R({ref:"content",class:n.cx("content"),onScroll:e[1]||(e[1]=function(){return a.onScroll&&a.onScroll.apply(a,arguments)})},n.ptm("content")),[m("div",R({ref:"tabs",class:n.cx("tabList"),role:"tablist","aria-orientation":a.$pcTabs.orientation||"horizontal"},n.ptm("tabList")),[G(n.$slots,"default"),m("span",R({ref:"inkbar",class:n.cx("activeBar"),role:"presentation","aria-hidden":"true"},n.ptm("activeBar")),null,16)],16,Xt)],16),a.showNavigators&&r.isNextButtonEnabled?F((o(),g("button",R({key:1,ref:"nextButton",class:n.cx("nextButton"),"aria-label":a.nextButtonAriaLabel,tabindex:a.$pcTabs.tabindex,onClick:e[2]||(e[2]=function(){return a.onNextButtonClick&&a.onNextButtonClick.apply(a,arguments)})},n.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(o(),v(ye(a.templates.nexticon||"ChevronRightIcon"),R({"aria-hidden":"true"},n.ptm("nextIcon")),null,16))],16,Yt)),[[d]]):I("",!0)],16)}Ge.render=Jt;var Qt={root:"p-tabpanels"},en=ne.extend({name:"tabpanels",classes:Qt}),tn={name:"BaseTabPanels",extends:se,props:{},style:en,provide:function(){return{$pcTabPanels:this,$parentInstance:this}}},Xe={name:"TabPanels",extends:tn,inheritAttrs:!1};function nn(n,e,t,i,r,a){return o(),g("div",R({class:n.cx("root"),role:"presentation"},n.ptmi("root")),[G(n.$slots,"default")],16)}Xe.render=nn;var sn={root:function(e){var t=e.instance;return["p-tabpanel",{"p-tabpanel-active":t.active}]}},an=ne.extend({name:"tabpanel",classes:sn}),on={name:"BaseTabPanel",extends:se,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:an,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},Ye={name:"TabPanel",extends:on,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var e;return Ve((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tab_").concat(this.value)},attrs:function(){return R(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var e;return{id:this.id,tabindex:(e=this.$pcTabs)===null||e===void 0?void 0:e.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function ln(n,e,t,i,r,a){var d,h;return a.$pcTabs?(o(),g(J,{key:1},[n.asChild?G(n.$slots,"default",{key:1,class:ae(n.cx("root")),active:a.active,a11yAttrs:a.a11yAttrs}):(o(),g(J,{key:0},[!((d=a.$pcTabs)!==null&&d!==void 0&&d.lazy)||a.active?F((o(),v(ye(n.as),R({key:0,class:n.cx("root")},a.attrs),{default:D(function(){return[G(n.$slots,"default")]}),_:3},16,["class"])),[[U,(h=a.$pcTabs)!==null&&h!==void 0&&h.lazy?!0:a.active]]):I("",!0)],64))],64)):G(n.$slots,"default",{key:0})}Ye.render=ln;const rn={class:"flex w-full justify-between overflow-hidden"},un={ref:"prev"},cn={key:1,ref:"listContainer",class:"flex w-full justify-center gap-1 overflow-hidden"},dn={key:1,class:"flex flex-col justify-end items-center h-8 w-8"},pn={key:2,class:"flex flex-col justify-end items-center h-8 w-8"},vn={ref:"next"},fn=Q({__name:"StepList",setup(n){const e=re(),{lesson:t,stepIndex:i,stepLoading:r}=Z(e),{changeStep:a,setSteps:d,setStepIndex:h}=e,k=ie(),C=X(()=>t.value.steps.length),{width:P}=pt(lt("listContainer")),T=E(0),L=E(0),K=E(0),A=E([]),l=X(()=>t.value===null||i.value===null||i.value>=t.value.steps.length?{id:0,type:"article",progress:"nothing",inner:{contents:[],modules:[]},skip_submit:!1}:t.value.steps[i.value]),q=()=>{O.value&&(T.value--,L.value--,B())},N=()=>{y.value&&(T.value++,L.value++,B())},O=E(0),y=E(0),{locale:W}=oe(),H=E(!1);async function c(){if(!H.value){H.value=!0;try{const{data:f}=await Y.getStudentProjectStepsByID(k.params.id.toString()),$=[];for(const[j,V]of f.steps.entries())if(V.id==f.last_step_id){h(j);const z=await Ne(V,W.value);$.push(z)}else{const z={id:V.id.toString(),title:"",type:V.step_type,progress:V.status,inner:{contents:[],modules:[]},answer:{open:"",question:[]},state:{code:"",stdout:"",slots:[]},access_type:V.access_type,accessibility:V.accessibility,skip_submit:V.skip_submit};$.push(z)}d($)}catch(f){console.log(f)}finally{H.value=!1}}}function w(f,$){if($)return"info";if(f!="completed")return f=="attempted"?"warn":(f=="started","secondary")}function _(f,$){if(!$&&f!="completed")return f=="attempted"||f=="started"?"outlined":void 0}function S(f,$){switch(f){case"article":return"pi pi-align-left";case"code":return $?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}xe(c);function B(){if(!(t.value===null||i.value===null)){if(y.value=0,O.value=0,K.value==C.value){A.value=t.value.steps;return}T.value>0&&(O.value++,T.value>=i.value&&O.value++),L.value<C.value&&(y.value++,L.value-y.value<=i.value&&y.value++),A.value=t.value.steps.slice(T.value+O.value,L.value-y.value)}}return M(W,c,{immediate:!1}),M(P,()=>{let f=0,$=0;for(;$+36<=P.value&&f<C.value;)$+=36,f++;K.value=Math.max(3,f),T.value=0,L.value=K.value,B()},{immediate:!0}),M(i,B),(f,$)=>{const j=le,V=Fe;return o(),g("div",rn,[m("div",un,[b(j,{severity:"secondary",disabled:H.value||O.value==0,icon:"pi pi-angle-left",class:"h-8 w-8",onClick:q},null,8,["disabled"])],512),H.value||s(t)==null?(o(),v(V,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(o(),g("div",cn,[s(i)!==null&&O.value>1?(o(),v(j,{key:0,severity:"info",variant:_(l.value.progress,!0),icon:S(l.value.type,l.value.skip_submit),loading:s(r),onClick:$[0]||($[0]=z=>s(a)(s(i))),class:"h-8 w-8 flex-none",rounded:""},null,8,["variant","icon","loading"])):I("",!0),O.value?(o(),g("div",dn,$[2]||($[2]=[m("span",{class:"material-icons text-zinc-500"},"more_horiz ",-1)]))):I("",!0),(o(!0),g(J,null,Te(A.value,(z,ue)=>(o(),g("div",{key:z.id,class:"relative"},[z.access_type!="premium"?(o(),v(j,{key:z.id,icon:S(z.type,z.skip_submit),rounded:"",severity:w(z.progress,z.id==l.value.id),variant:_(z.progress,z.id==l.value.id),class:ae([{"bg-orange-100":z.progress=="attempted"&&z.id!=l.value.id},"h-8 w-8 flex-none"]),onClick:ce=>s(a)(ue+T.value+O.value),disabled:s(r)||!z.accessibility,loading:ue+T.value+O.value==s(i)&&s(r)},null,8,["icon","severity","variant","class","onClick","disabled","loading"])):(o(),v(j,{key:1,icon:"pi pi-crown",rounded:"",severity:"secondary",class:"h-8 w-8 flex-none bg-purple-100 border-purple-100 text-purple-500"}))]))),128)),y.value>0?(o(),g("div",pn,$[3]||($[3]=[m("span",{class:"material-icons text-zinc-500"},"more_horiz ",-1)]))):I("",!0),s(i)!==null&&y.value>=2?(o(),v(j,{key:3,severity:"info",variant:_(l.value.progress,!0),icon:S(l.value.type,l.value.skip_submit),loading:s(r),onClick:$[1]||($[1]=z=>s(a)(s(i))),class:"h-8 w-8 flex-none",rounded:""},null,8,["variant","icon","loading"])):I("",!0)],512)),m("div",vn,[b(j,{severity:"secondary",disabled:H.value||y.value==0,icon:"pi pi-angle-right",class:"h-8 w-8",onClick:N},null,8,["disabled"])],512)])}}}),bn={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white gap-2"},hn={class:"flex flex-none justify-end items-center gap-2"},mn={class:"relative overflow-hidden w-full border-0 bg-transparent flex items-start p-2 pl-4 rounded-none cursor-pointer transition-colors duration-200"},gn={class:"inline-flex flex-col items-start"},yn={class:"font-bold"},wn={class:"text-sm"},_n=Q({__name:"LessonHeader",setup(n){const e=Se(),t=ie(),{t:i}=oe(),r=De(),{user:a}=Z(r),d=E(!1),h=E(),k=E([{label:i("logOut"),icon:"pi pi-sign-out",command:()=>{r.logout(),e.replace({name:"login"})}}]),C=T=>{h.value.toggle(T)};async function P(){if(!d.value){d.value=!0;try{await Y.resetStepsProgress(t.params.id.toString()),window.location.reload()}catch(T){console.log(T)}finally{d.value=!1}}}return(T,L)=>{var N;const K=Ce,A=le,l=He,q=_e;return o(),g("div",bn,[m("button",{class:"flex flex-none items-center hover:opacity-80 transition",onClick:L[1]||(L[1]=O=>s(e).push("/projects"))},[b(K,{src:s(qe),width:"32"},null,8,["src"]),L[2]||(L[2]=m("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),b(A,{icon:"pi pi-angle-left",label:T.$t("back"),severity:"secondary",variant:"text",onClick:L[0]||(L[0]=O=>s(e).push("/projects")),size:"small"},null,8,["label"])]),b(fn),m("div",hn,[((N=s(a))==null?void 0:N.user_type)=="editor"?(o(),v(A,{key:0,label:"Reset",icon:"pi pi-refresh",severity:"info",variant:"outlined",size:"small",onClick:P,disabled:d.value,loading:d.value},null,8,["disabled","loading"])):I("",!0),b(We),b(A,{type:"button",icon:"pi pi-ellipsis-v",onClick:C,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",variant:"outlined",severity:"secondary",class:"border border-slate-300 bg-slate-50",style:{width:"34px"}}),b(l,{ref_key:"menu",ref:h,id:"overlay_menu",model:k.value,popup:!0},{start:D(()=>{var O,y,W;return[F((o(),g("button",mn,[m("span",gn,[m("span",yn,we((O=s(a))==null?void 0:O.email),1),m("span",wn,we(((y=s(a))==null?void 0:y.user_type)=="student"?T.$t("student"):((W=s(a))==null?void 0:W.user_type)=="teacher"?T.$t("teacher"):T.$t("editor")),1)])])),[[q]])]}),_:1},8,["model"])])])}}}),$n={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},kn={key:1,class:"flex justify-center w-full gap-1"},xn={class:"flex gap-1"},Tn={class:"flex flex-1 justify-end items-center gap-2"},Sn={class:"relative overflow-hidden w-full border-0 bg-transparent flex items-start p-2 pl-4 rounded-none cursor-pointer transition-colors duration-200"},Cn={class:"inline-flex flex-col items-start"},Bn={class:"font-bold"},Pn={class:"text-sm"},Ln=Q({__name:"OpenLessonHeader",setup(n){const{locale:e,t}=oe(),i=Se(),r=ie(),a=De(),{user:d}=Z(a),h=re(),{lesson:k,stepIndex:C,stepLoading:P}=Z(h),{changeStep:T,setSteps:L,setStepIndex:K}=h,A=E(!1);function l(c){return c?"info":"secondary"}function q(c){}function N(c){switch(c){case"article":return"pi pi-align-left";case"code":return"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function O(){if(!A.value){A.value=!0;try{let c;if(r.name=="module"){const{data:_}=await jt.getModuleStepsByID(r.params.id.toString());c=_}else{const{data:_}=await Y.getStudentProjectStepsByID(r.params.id.toString());c=_.steps}const w=[];for(const[_,S]of c.entries())if(_==0){K(_);const B=await(r.name=="module"?At(S,e.value,!1):Ne(S,e.value));w.push(B)}else{const B={id:S.id.toString(),title:"",type:S.step_type,progress:"nothing",inner:{contents:[],modules:[]},answer:{open:"",question:[]},state:{code:"",stdout:"",slots:[]},access_type:"freemium",skip_submit:S.skip_submit};w.push(B)}L(w)}catch(c){console.log(c)}finally{A.value=!1}}}xe(O),M(e,O,{immediate:!1});const y=E(),W=E([{label:t("logOut"),icon:"pi pi-sign-out",command:()=>{a.logout(),i.replace({name:"login"})}}]),H=c=>{y.value.toggle(c)};return(c,w)=>{const _=Ce,S=le,B=Fe,f=He,$=_e;return o(),g("div",$n,[m("button",{class:"flex flex-none items-center hover:opacity-80 transition",onClick:w[1]||(w[1]=j=>s(i).push("/modules"))},[b(_,{src:s(qe),width:"32"},null,8,["src"]),w[2]||(w[2]=m("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),b(S,{icon:"pi pi-angle-left",label:c.$t("back"),severity:"secondary",variant:"text",onClick:w[0]||(w[0]=j=>s(i).push("/modules")),size:"small"},null,8,["label"])]),A.value||s(k)==null?(o(),v(B,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(o(),g("div",kn,[m("div",xn,[(o(!0),g(J,null,Te(s(k).steps,(j,V)=>(o(),v(S,{key:j.id,icon:N(j.type),rounded:"",severity:l(V==s(C)),variant:(V==s(C),void 0),class:ae([{"bg-orange-100":j.progress=="attempted"&&V!=s(C)},"h-8 w-8"]),onClick:z=>s(T)(V),disabled:s(P),loading:V==s(C)&&s(P)},null,8,["icon","severity","variant","class","onClick","disabled","loading"]))),128))])])),m("div",Tn,[b(We),b(S,{type:"button",icon:"pi pi-ellipsis-v",onClick:H,"aria-haspopup":"true","aria-controls":"overlay_menu",size:"small",variant:"outlined",severity:"secondary",class:"border border-slate-300 bg-slate-50",style:{width:"34px"}}),b(f,{ref_key:"menu",ref:y,id:"overlay_menu",model:W.value,popup:!0},{start:D(()=>{var j,V,z;return[F((o(),g("button",Sn,[m("span",Cn,[m("span",Bn,we((j=s(d))==null?void 0:j.email),1),m("span",Pn,we(((V=s(d))==null?void 0:V.user_type)=="student"?c.$t("student"):((z=s(d))==null?void 0:z.user_type)=="teacher"?c.$t("teacher"):c.$t("editor")),1)])])),[[$]])]}),_:1},8,["model"])])])}}}),zn={class:"flex flex-col p-4 gap-4 overflow-auto h-full justify-between bg-white relative"},In={class:"absolute top-0 right-0 p-2"},An={key:1,class:"flex"},jn={class:"flex justify-end gap-2"},Vn=Q({__name:"LessonDiv",setup(n){const{locale:e}=oe(),t=Se(),i=rt(),r=re(),{lesson:a,stepIndex:d,userCode:h,submitEnabled:k,stepLoading:C}=Z(r),{changeStep:P,updateStatus:T,updateAccess:L,restartStep:K}=r,A=E(!1),l=X(()=>{var c;return d.value==null||C.value?null:((c=a.value)==null?void 0:c.steps[d.value])??null});async function q(){d.value!=null&&P(d.value-1)}async function N(){var c,w,_,S,B;if(d.value!=null){if((((c=l.value)==null?void 0:c.type)=="article"||(w=l.value)!=null&&w.skip_submit)&&((_=l.value)==null?void 0:_.progress)!="completed"){y.value=!0;try{let f={};((S=l.value)==null?void 0:S.type)=="code"&&(f={code:h.value});const{data:$}=await Y.submitStep(((B=l.value)==null?void 0:B.id)??"",e.value,f);T($.status),L(!0)}catch(f){console.log(f)}finally{y.value=!1}}P(d.value+1)}}async function O(){var c,w,_;if(d.value!=null){if(((c=l.value)==null?void 0:c.progress)=="completed"){A.value=!0;return}if(((w=l.value)==null?void 0:w.type)=="article"){y.value=!0;try{const{data:S}=await Y.submitStep(((_=l.value)==null?void 0:_.id)??"",e.value,{});T(S.status),A.value=!0}catch(S){console.log(S)}finally{y.value=!1}}}}const y=E(!1);async function W(){var c,w,_,S;y.value=!0;try{let B;switch((c=l.value)==null?void 0:c.type){case"code":B={code:h.value};break;case"open":B={open:l.value.answer.open};break;case"question":const j=[];(w=l.value.inner.options)==null||w.forEach(V=>{j.push(V.correct)}),l.value.answer.question=j,B={question:j};break;case"matching":B={match:[{key:"dog",value:"b"},{key:"a",value:"animal"},{key:"c",value:"d"}]};break;default:B={};break}const f=((_=l.value)==null?void 0:_.progress)=="completed",{data:$}=await Y.submitStep(((S=l.value)==null?void 0:S.id)??"",e.value,B);f||T($.status),$.status=="completed"?(f||L(!0),i.add({severity:"success",summary:"Correct, good job!",detail:"Completed successfully",life:5e3})):$.status=="attempted"&&i.add({severity:"error",summary:"Wrong answer!",detail:"Keep trying",life:5e3})}catch(B){console.log(B)}finally{y.value=!1}}function H(){A.value=!1,t.push({name:"projects"})}return(c,w)=>{const _=le,S=ut,B=vt;return o(),g(J,null,[m("div",zn,[m("div",In,[F(b(_,{variant:"text",severity:"info",icon:"pi pi-refresh",onClick:s(K)},null,8,["onClick"]),[[B,"Restart step"]])]),l.value?(o(),g("div",{key:l.value.id},[l.value.type=="article"?(o(),v(s(Oe),{key:0,step:l.value,isPreview:!1},null,8,["step"])):l.value.type=="code"?(o(),v(s(Ee),{key:1,step:l.value,isPreview:!1},null,8,["step"])):l.value.type=="matching"?(o(),v(s(Re),{key:2,step:l.value,isPreview:!1},null,8,["step"])):l.value.type=="open"?(o(),v(s(Ke),{key:3,step:l.value,isPreview:!1,modelValue:l.value.answer.open,"onUpdate:modelValue":w[0]||(w[0]=f=>l.value.answer.open=f)},null,8,["step","modelValue"])):l.value.type=="question"?(o(),v(s(ke),{key:4,step:l.value,isPreview:!1},null,8,["step"])):I("",!0)])):I("",!0),s(a)!=null&&s(a).steps!=null&&s(a).steps.length>0&&l.value?(o(),g("div",An,[s(d)!==0?(o(),v(_,{key:0,label:c.$t("previous"),icon:"pi pi-angle-left",size:"small",onClick:q},null,8,["label"])):I("",!0),l.value.type!="article"&&l.value.progress!="completed"&&!l.value.skip_submit?(o(),v(_,{key:1,label:c.$t("submit"),icon:"pi pi-check",iconPos:"right",severity:"info",size:"small",class:"ml-auto self-end",onClick:W,disabled:y.value||!s(k),loading:y.value},null,8,["label","disabled","loading"])):I("",!0),s(d)<s(a).steps.length-1&&(l.value.progress=="completed"||l.value.type=="article"||l.value.skip_submit)?(o(),v(_,{key:2,label:c.$t("next"),icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:N,disabled:y.value||l.value.progress!="completed"&&(l.value.type!="article"&&!l.value.skip_submit||!s(k)),loading:y.value},null,8,["label","disabled","loading"])):s(d)==s(a).steps.length-1&&(l.value.progress=="completed"||l.value.type=="article")?(o(),v(_,{key:3,label:"Finish ðŸ¥³",size:"small",class:"ml-auto self-end",onClick:O,disabled:y.value||l.value.progress!="completed"&&(l.value.type!="article"||!s(k)),loading:y.value},null,8,["disabled","loading"])):I("",!0)])):I("",!0)]),b(S,{visible:A.value,"onUpdate:visible":w[1]||(w[1]=f=>A.value=f),modal:"",header:"CongratulationsðŸ¥³ðŸŽ‰",style:{width:"25rem"}},{default:D(()=>[w[2]||(w[2]=m("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"You successfully completed this project",-1)),m("div",jn,[b(_,{type:"button",label:"Go to next Project âž¡ï¸",onClick:H})])]),_:1},8,["visible"])],64)}}}),Dn="/assets/joystick-Ok9Z0V--.jpg",Nn={class:"flex flex-col p-4 gap-4 overflow-auto h-full justify-between bg-white"},On={key:0},En={key:0,class:"flex gap-2"},Rn={key:1,class:"flex"},Kn=Q({__name:"OpenLessonDiv",setup(n){const e={LED:ft,switch:bt,"push-button":ht,"light-sensor":mt,"touch-sensor":gt,potentiometer:yt,encoder:wt,"motion-detector":_t,microphone:$t,climate_sensor:kt,"gyro-accel":xt,buzzer:Tt,"color-sensor":St,joystick:Dn,"distance-sensor":Ct},t=ie(),i=re(),{lesson:r,stepIndex:a}=Z(i),{changeStep:d}=i,h=X(()=>{var P;return a.value==null?null:((P=r.value)==null?void 0:P.steps[a.value])??null});async function k(){a.value!=null&&d(a.value-1)}async function C(){a.value!=null&&d(a.value+1)}return(P,T)=>{var A,l,q;const L=Ce,K=le;return o(),g("div",Nn,[h.value?(o(),g("div",On,[s(t).name=="project"&&!((A=s(r))!=null&&A.is_guidable)?(o(),g("div",En,[(o(!0),g(J,null,Te(h.value.inner.modules,N=>(o(),g("div",{key:N},[e[N]?(o(),v(L,{key:0,src:e[N],width:"80"},null,8,["src"])):I("",!0)]))),128))])):I("",!0),h.value.type=="article"?(o(),v(s(Oe),{key:1,step:h.value,isPreview:!1},null,8,["step"])):h.value.type=="code"?(o(),v(s(Ee),{key:2,step:h.value,isPreview:!1},null,8,["step"])):h.value.type=="matching"?(o(),v(s(Re),{key:3,step:h.value,isPreview:!1},null,8,["step"])):h.value.type=="open"?(o(),v(s(Ke),{key:4,step:h.value,isPreview:!1},null,8,["step"])):h.value.type=="question"?(o(),v(s(ke),{key:5,step:h.value,isPreview:!1},null,8,["step"])):I("",!0),s(t).name=="project"&&!((l=s(r))!=null&&l.is_guidable)?(o(),v(s(ke),{key:6,step:h.value,isPreview:!1},null,8,["step"])):I("",!0)])):I("",!0),s(r)!=null&&s(r).steps!=null&&s(r).steps.length>0&&h.value&&s(a)!=null?(o(),g("div",Rn,[s(a)!==0?(o(),v(K,{key:0,label:P.$t("previous"),icon:"pi pi-angle-left",size:"small",onClick:k},null,8,["label"])):I("",!0),s(a)<s(r).steps.length-1?(o(),v(K,{key:1,label:s(t).name=="project"&&!((q=s(r))!=null&&q.is_guidable)?P.$t("start"):P.$t("next"),icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:C},null,8,["label"])):I("",!0)])):I("",!0)])}}});var Fn={root:function(e){var t=e.instance,i=e.props;return["p-tab",{"p-tab-active":t.active,"p-disabled":i.disabled}]}},Hn=ne.extend({name:"tab",classes:Fn}),qn={name:"BaseTab",extends:se,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Hn,provide:function(){return{$pcTab:this,$parentInstance:this}}},te={name:"Tab",extends:qn,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(e){switch(e.code){case"ArrowRight":this.onArrowRightKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(e);break}},onArrowRightKey:function(e){var t=this.findNextTab(e.currentTarget);t?this.changeFocusedTab(e,t):this.onHomeKey(e),e.preventDefault()},onArrowLeftKey:function(e){var t=this.findPrevTab(e.currentTarget);t?this.changeFocusedTab(e,t):this.onEndKey(e),e.preventDefault()},onHomeKey:function(e){var t=this.findFirstTab();this.changeFocusedTab(e,t),e.preventDefault()},onEndKey:function(e){var t=this.findLastTab();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.findLastTab()),e.preventDefault()},onPageUpKey:function(e){this.scrollInView(this.findFirstTab()),e.preventDefault()},onEnterKey:function(e){this.changeActiveValue(),e.preventDefault()},findNextTab:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t?e:e.nextElementSibling;return i?he(i,"data-p-disabled")||he(i,"data-pc-section")==="inkbar"?this.findNextTab(i):$e(i,'[data-pc-name="tab"]'):null},findPrevTab:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t?e:e.previousElementSibling;return i?he(i,"data-p-disabled")||he(i,"data-pc-section")==="inkbar"?this.findPrevTab(i):$e(i,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.content.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.content.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(e,t){ct(t),this.scrollInView(t)},scrollInView:function(e){var t;e==null||(t=e.scrollIntoView)===null||t===void 0||t.call(e,{block:"nearest"})}},computed:{active:function(){var e;return Ve((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tab_").concat(this.value)},ariaControls:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tabpanel_").concat(this.value)},attrs:function(){return R(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}}},directives:{ripple:_e}};function Wn(n,e,t,i,r,a){var d=je("ripple");return n.asChild?G(n.$slots,"default",{key:1,class:ae(n.cx("root")),active:a.active,a11yAttrs:a.a11yAttrs,onClick:a.onClick}):F((o(),v(ye(n.as),R({key:0,class:n.cx("root"),onClick:a.onClick},a.attrs),{default:D(function(){return[G(n.$slots,"default")]}),_:3},16,["class","onClick"])),[[d]])}te.render=Wn;const Mn={key:0},Un={key:1,class:"h-[51px]"},Zn={key:2,class:"flex bg-surface-0"},Gn={class:"flex justify-center h-full"},Xn={class:"w-full max-w-4xl"},ps=Q({__name:"LessonView",setup(n){const t=Bt(zt).smallerOrEqual("md"),{locale:i}=oe(),r=ie(),a=re(),{simVisible:d,ideVisible:h,lesson:k,stepIndex:C,modulesWerePut:P}=Z(a),{setLesson:T,lightUp:L,clearSlotsModulesClasses:K,toastModulePut:A,runCodePressed:l,saveStepStateLocally:q}=a,N=Ie(),{clearSlots:O}=N,y=Pt(),{setCode:W}=y,{fileContent:H}=Z(y),c=E(!1);async function w(){if(!c.value){c.value=!0;try{if(r.name=="project"){const{data:p}=await Vt.getProjectByID(r.params.id.toString()),u=await Dt(p,i.value);T(u)}else if(r.name=="module"){const{data:p}=await Nt.getModuleByID(r.params.id.toString()),u=await Ot(p,i.value);T(u)}}catch(p){console.log(p)}finally{c.value=!1}}}xe(w),M(i,w);function _(p){if(P.value=!0,K(),k.value==null||C.value==null||k.value.steps.length==0)return;const u=k.value.steps[C.value].inner.highlights;if(u)for(const x of u){if(!x.slot||!x.module||x.slot=="8"||x.slot=="9")continue;p.id===x.slot&&p.with.type!==""&&A(p.with.type,x.module);const pe=N.getSlot(x.slot),ve=pe.with.type;if(ve!==x.module){L(x.slot,x.module),ve&&(pe.class="shadow-lg shadow-red-500"),P.value=!1;break}}}function S(p){if(P.value=!0,K(),k.value===null||C.value===null||k.value.steps.length==0)return;const u=k.value.steps[C.value].inner.highlights;if(u){for(const x of u)if(!(!x.slot||!x.module||x.slot!=="8"&&x.slot!=="9")&&(p.id==x.slot&&p.with.type!==""&&A(p.with.type,x.module),p.with.type!==x.module)){L(x.slot,x.module),P.value=!1;break}}}for(const p of N.slots)M(()=>p.with.type,()=>{_(p)},{immediate:!0});M(()=>N.pin8.with.type,()=>{S(N.pin8)},{immediate:!0}),M(()=>N.pin9.with.type,()=>{S(N.pin9)},{immediate:!0}),M(()=>{if(!k.value||!k.value.steps[C.value??0])return null;const p=k.value.steps[C.value??0].inner.highlights;return p||null},()=>{for(const u of N.slots)_(u);if(k.value==null||C.value==null||k.value.steps.length==0)return;const p=k.value.steps[C.value].inner.highlights;if(p)for(const u of p){if(!u.slot||!u.module||u.slot!=="8"&&u.slot!=="9")continue;const x=N.getServoPin(u.slot,u.module);if(x&&x.with.type!==u.module){L(u.slot,u.module),P.value=!1;break}}});const B=X(()=>{var p;return C.value==null?null:((p=k.value)==null?void 0:p.steps[C.value])??null}),f=E(!1),$=It(p=>{ue(p),q(p)},1e3,{maxWait:5e3}),j=Ie(),V=Lt(),{output:z}=Z(V);M([j.slotHasList,H,z],(p,u)=>{if(p==null||u==null)return;f.value=!0;const x={code:H.value,stdout:z.value,slots:j.slotHasList()};r.name=="project"&&$(x)},{deep:!0});async function ue(p){if(B.value!=null){f.value=!0;try{await Y.saveStudentStepStateByID(B.value,i.value,p)}catch(u){console.log(u)}finally{f.value=!1}}}dt(()=>{O(),W("")});const ce=X(()=>{let p=1;return d.value&&p++,h.value&&p++,100/p}),de=X(()=>t.value?"#tabs":"#splitter");return(p,u)=>{var Pe,Le;const x=Ye,pe=Xe,ve=Ge,Je=Me,ee=nt,Be=st;return o(),g(J,null,[c.value?(o(),g("div",Un)):F((o(),g("div",Mn,[s(r).name=="module"||!((Pe=s(k))!=null&&Pe.is_guidable)?(o(),v(Ln,{key:0})):s(r).name=="project"?(o(),v(_n,{key:1})):I("",!0)],512)),[[U,!s(t)]]),c.value?I("",!0):(o(),g("div",Zn,[(o(),v(me,{to:de.value+"-lesson",defer:""},[m("div",Gn,[m("div",Xn,[s(r).name=="module"||!((Le=s(k))!=null&&Le.is_guidable)?(o(),v(Kn,{key:0})):s(r).name=="project"?(o(),v(Vn,{key:1})):I("",!0)])])],8,["to"])),(o(),v(me,{to:de.value+"-code",defer:""},[b(Qe,{onRun:s(l)},null,8,["onRun"])],8,["to"])),(o(),v(me,{to:de.value+"-emulator",defer:""},[b(et)],8,["to"])),(o(),v(me,{to:de.value+"-terminal",defer:""},[b(tt)],8,["to"])),F(b(Je,{value:"0",class:ae(["grid w-full h-screen","grid-rows-[1fr_auto]"])},{default:D(()=>[b(pe,{class:"overflow-auto",style:{}},{default:D(()=>[b(x,{id:"tabs-lesson",value:"0"},{default:D(()=>u[0]||(u[0]=[m("div",null,null,-1)])),_:1}),b(x,{id:"tabs-emulator",value:"1",class:"h-full w-full"},{default:D(()=>u[1]||(u[1]=[m("div",null,null,-1)])),_:1}),b(x,{id:"tabs-code",value:"2",class:"h-full w-full"},{default:D(()=>u[2]||(u[2]=[m("div",null,null,-1)])),_:1}),b(x,{id:"tabs-terminal",value:"3",class:"h-full w-full"},{default:D(()=>u[3]||(u[3]=[m("div",null,null,-1)])),_:1})]),_:1}),b(ve,{class:"w-full bg-white border-t"},{default:D(()=>[b(s(te),{value:"0"},{default:D(()=>u[4]||(u[4]=[ge("Lesson")])),_:1}),F(b(s(te),{value:"1"},{default:D(()=>u[5]||(u[5]=[ge("Pibody")])),_:1},512),[[U,s(d)]]),F(b(s(te),{value:"2"},{default:D(()=>u[6]||(u[6]=[ge("Editor")])),_:1},512),[[U,s(h)]]),F(b(s(te),{value:"3"},{default:D(()=>u[7]||(u[7]=[ge("Terminal")])),_:1},512),[[U,s(h)]])]),_:1})]),_:1},512),[[U,s(t)]]),F(b(Be,{class:"w-full rounded-none",style:{height:"calc(100vh - 52px)"}},{default:D(()=>[F(b(ee,{id:"splitter-emulator",size:ce.value,minSize:10,class:"max-w-[467px] w-full"},{default:D(()=>u[8]||(u[8]=[m("div",null,null,-1)])),_:1},8,["size"]),[[U,s(d)]]),F(b(ee,{size:ce.value,minSize:10},{default:D(()=>[b(Be,{layout:"vertical",class:"h-full w-full"},{default:D(()=>[b(ee,{id:"splitter-code",size:65,minSize:10},{default:D(()=>u[9]||(u[9]=[m("div",null,null,-1)])),_:1}),b(ee,{id:"splitter-terminal",size:35,minSize:10},{default:D(()=>u[10]||(u[10]=[m("div",null,null,-1)])),_:1})]),_:1})]),_:1},8,["size"]),[[U,s(h)]]),b(ee,{id:"splitter-lesson",size:ce.value,minSize:10,class:"mx-auto"},{default:D(()=>u[11]||(u[11]=[m("div",null,null,-1)])),_:1},8,["size"])]),_:1},512),[[U,!s(t)]])]))],64)}}});export{ps as default};
