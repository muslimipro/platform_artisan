import{_ as Me,S as Ge,T as Ye,s as Qe,a as Xe}from"./SimulationView-Ct9XOriO.js";import{B as ie,K as de,L as ge,M as Ze,N as Te,v as E,R as Se,y as le,O as Be,P as K,o as l,f as v,w as I,x as X,Q as he,C as ee,S as pe,T as Je,U as ve,V as et,W as tt,c as x,h as L,e as $,F as te,X as G,Y as _e,d as ne,A as Z,n as oe,I as Y,E as nt,r as N,G as ye,m as re,H as q,b as p,j as i,i as Pe,s as ue,k as me,a as at,u as st,Z as we,_ as it,a0 as fe,g as be}from"./index-DcyBeJgC.js";import{s as lt}from"./index-Bnw7iMHR.js";import{s as ot}from"./index-CcCvklg2.js";import{u as rt,a as ut,b as ct,c as dt}from"./index-ClYcSkZ_.js";import{u as ce,a as J,t as Ce,b as pt,_ as Le,c as ze,M as Ie,d as Ae,e as Ve}from"./QuestionStep.vue_vue_type_script_setup_true_lang-Ci0Y_h5E.js";import{L as Ne,s as Oe}from"./logo-Cr9YRutO.js";import{_ as De}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-CG-OV08p.js";import{s as je}from"./index-DL4vh9p1.js";import{_ as Re,a as Ee}from"./StudentViewToggle.vue_vue_type_script_setup_true_lang-D2ruvpuC.js";import{a as vt}from"./index-CD2e-UIx.js";import{a as ft}from"./index-Co_6RbC6.js";import{t as bt}from"./types-CG_ifl2b.js";import{a as ht,t as mt}from"./types-D51jrd2l.js";import{T as gt}from"./index-D9bkqAe8.js";import{_ as yt}from"./VerifyEmailDialog.vue_vue_type_script_setup_true_lang-DfdeiVAC.js";import{u as wt,a as kt,b as xe}from"./pibody-DqOzv7Z7.js";import"./index-dDCPORGv.js";import"./index-CwC5BdXP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pibody-BwAjMvHk.js";import"./index-gHHiHdoU.js";import"./index-N8YLxu86.js";import"./index-C5SrmfWd.js";import"./index-CCrQOVR9.js";import"./index-seXcSKnd.js";import"./index-BS_i5v3E.js";import"./index-Dm115m7X.js";import"./index-BauW75GO.js";import"./index-Dzo9KCOb.js";import"./index-DmQEPo33.js";import"./index-B6KUmJMy.js";import"./index-aHnXE6gR.js";import"./profile-Dwrl7aX4.js";var $t={root:function(e){var t=e.instance,s=e.props;return["p-tab",{"p-tab-active":t.active,"p-disabled":s.disabled}]}},_t=ie.extend({name:"tab",classes:$t}),xt={name:"BaseTab",extends:le,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:_t,provide:function(){return{$pcTab:this,$parentInstance:this}}},se={name:"Tab",extends:xt,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(e){switch(e.code){case"ArrowRight":this.onArrowRightKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(e);break}},onArrowRightKey:function(e){var t=this.findNextTab(e.currentTarget);t?this.changeFocusedTab(e,t):this.onHomeKey(e),e.preventDefault()},onArrowLeftKey:function(e){var t=this.findPrevTab(e.currentTarget);t?this.changeFocusedTab(e,t):this.onEndKey(e),e.preventDefault()},onHomeKey:function(e){var t=this.findFirstTab();this.changeFocusedTab(e,t),e.preventDefault()},onEndKey:function(e){var t=this.findLastTab();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.findLastTab()),e.preventDefault()},onPageUpKey:function(e){this.scrollInView(this.findFirstTab()),e.preventDefault()},onEnterKey:function(e){this.changeActiveValue(),e.preventDefault()},findNextTab:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=t?e:e.nextElementSibling;return s?de(s,"data-p-disabled")||de(s,"data-pc-section")==="inkbar"?this.findNextTab(s):ge(s,'[data-pc-name="tab"]'):null},findPrevTab:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=t?e:e.previousElementSibling;return s?de(s,"data-p-disabled")||de(s,"data-pc-section")==="inkbar"?this.findPrevTab(s):ge(s,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.content.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.content.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(e,t){Ze(t),this.scrollInView(t)},scrollInView:function(e){var t;e==null||(t=e.scrollIntoView)===null||t===void 0||t.call(e,{block:"nearest"})}},computed:{active:function(){var e;return Te((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tab_").concat(this.value)},ariaControls:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tabpanel_").concat(this.value)},attrs:function(){return E(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}}},directives:{ripple:Se}};function Tt(n,e,t,s,r,a){var d=Be("ripple");return n.asChild?X(n.$slots,"default",{key:1,class:ee(n.cx("root")),active:a.active,a11yAttrs:a.a11yAttrs,onClick:a.onClick}):K((l(),v(he(n.as),E({key:0,class:n.cx("root"),onClick:a.onClick},a.attrs),{default:I(function(){return[X(n.$slots,"default")]}),_:3},16,["class","onClick"])),[[d]])}se.render=Tt;var St={root:"p-tablist",content:function(e){var t=e.instance;return["p-tablist-content",{"p-tablist-viewport":t.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},Bt=ie.extend({name:"tablist",classes:St}),Pt={name:"BaseTabList",extends:le,props:{},style:Bt,provide:function(){return{$pcTabList:this,$parentInstance:this}}},Ke={name:"TabList",extends:Pt,inheritAttrs:!1,inject:["$pcTabs"],mutationObserver:null,data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0,isRTL:!1}},resizeObserver:void 0,watch:{showNavigators:function(e){e?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var e=this;this.$nextTick(function(){e.updateInkBar()}),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver()),this.updateDirection(),this.observeDirectionChanges()},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver(),this.mutationObserver&&this.mutationObserver.disconnect()},methods:{onScroll:function(e){this.showNavigators&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick:function(){var e=this.$refs.content,t=pe(e),s;this.isRTL?s=e.scrollLeft+t:s=e.scrollLeft-t,e.scrollLeft=s<=0?0:s},onNextButtonClick:function(){var e=this.$refs.content,t=pe(e)-this.getVisibleButtonWidths(),s,r;this.isRTL?(s=e.scrollLeft-t,r=e.scrollWidth+t):(s=e.scrollLeft+t,r=e.scrollWidth-t),e.scrollLeft=s>=r?r:s},bindResizeObserver:function(){var e=this;this.resizeObserver=new ResizeObserver(function(){return e.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var e;(e=this.resizeObserver)===null||e===void 0||e.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var e=this.$refs,t=e.content,s=e.inkbar,r=e.tabs,a=ge(t,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(s.style.height=Je(a)+"px",s.style.top=ve(a).top-ve(r).top+"px"):(s.style.width=et(a)+"px",s.style.left=ve(a).left-ve(r).left+"px")},updateButtonState:function(){var e=this.$refs,t=e.list,s=e.content,r=s.scrollLeft,a=s.scrollTop,d=s.scrollWidth,T=s.scrollHeight,z=s.offsetWidth,w=s.offsetHeight,k=[pe(s),tt(s)],g=k[0],A=k[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=a!==0,this.isNextButtonEnabled=t.offsetHeight>=w&&parseInt(a)!==T-A):(this.isPrevButtonEnabled=r!==0,this.isNextButtonEnabled=t.offsetWidth>=z&&parseInt(r)!==d-g)},getVisibleButtonWidths:function(){var e=this.$refs,t=e.prevBtn,s=e.nextBtn;return[t,s].reduce(function(r,a){return a?r+pe(a):r},0)},updateDirection:function(){this.isRTL=!!this.$el.closest('[dir="rtl"]')},observeDirectionChanges:function(){var e=this,t=document.documentElement,s={attributes:!0,attributeFilter:["dir"]};this.mutationObserver=new MutationObserver(function(){e.updateDirection()}),this.mutationObserver.observe(t,s)}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0}},components:{ChevronLeftIcon:lt,ChevronRightIcon:ot},directives:{ripple:Se}},Ct=["aria-label","tabindex"],Lt=["aria-orientation"],zt=["aria-label","tabindex"];function It(n,e,t,s,r,a){var d=Be("ripple");return l(),x("div",E({ref:"list",class:n.cx("root")},n.ptmi("root")),[a.showNavigators&&r.isPrevButtonEnabled?K((l(),x("button",E({key:0,ref:"prevButton",class:n.cx("prevButton"),"aria-label":a.prevButtonAriaLabel,tabindex:a.$pcTabs.tabindex,onClick:e[0]||(e[0]=function(){return a.onPrevButtonClick&&a.onPrevButtonClick.apply(a,arguments)})},n.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(l(),v(he(a.templates.previcon||"ChevronLeftIcon"),E({"aria-hidden":"true"},n.ptm("prevIcon")),null,16))],16,Ct)),[[d]]):L("",!0),$("div",E({ref:"content",class:n.cx("content"),onScroll:e[1]||(e[1]=function(){return a.onScroll&&a.onScroll.apply(a,arguments)})},n.ptm("content")),[$("div",E({ref:"tabs",class:n.cx("tabList"),role:"tablist","aria-orientation":a.$pcTabs.orientation||"horizontal"},n.ptm("tabList")),[X(n.$slots,"default"),$("span",E({ref:"inkbar",class:n.cx("activeBar"),role:"presentation","aria-hidden":"true"},n.ptm("activeBar")),null,16)],16,Lt)],16),a.showNavigators&&r.isNextButtonEnabled?K((l(),x("button",E({key:1,ref:"nextButton",class:n.cx("nextButton"),"aria-label":a.nextButtonAriaLabel,tabindex:a.$pcTabs.tabindex,onClick:e[2]||(e[2]=function(){return a.onNextButtonClick&&a.onNextButtonClick.apply(a,arguments)})},n.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(l(),v(he(a.templates.nexticon||"ChevronRightIcon"),E({"aria-hidden":"true"},n.ptm("nextIcon")),null,16))],16,zt)),[[d]]):L("",!0)],16)}Ke.render=It;var At={root:function(e){var t=e.instance;return["p-tabpanel",{"p-tabpanel-active":t.active}]}},Vt=ie.extend({name:"tabpanel",classes:At}),Nt={name:"BaseTabPanel",extends:le,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:Vt,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},Fe={name:"TabPanel",extends:Nt,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var e;return Te((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.id,"_tab_").concat(this.value)},attrs:function(){return E(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var e;return{id:this.id,tabindex:(e=this.$pcTabs)===null||e===void 0?void 0:e.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function Ot(n,e,t,s,r,a){var d,T;return a.$pcTabs?(l(),x(te,{key:1},[n.asChild?X(n.$slots,"default",{key:1,class:ee(n.cx("root")),active:a.active,a11yAttrs:a.a11yAttrs}):(l(),x(te,{key:0},[!((d=a.$pcTabs)!==null&&d!==void 0&&d.lazy)||a.active?K((l(),v(he(n.as),E({key:0,class:n.cx("root")},a.attrs),{default:I(function(){return[X(n.$slots,"default")]}),_:3},16,["class"])),[[G,(T=a.$pcTabs)!==null&&T!==void 0&&T.lazy?!0:a.active]]):L("",!0)],64))],64)):X(n.$slots,"default",{key:0})}Fe.render=Ot;var Dt={root:"p-tabpanels"},jt=ie.extend({name:"tabpanels",classes:Dt}),Rt={name:"BaseTabPanels",extends:le,props:{},style:jt,provide:function(){return{$pcTabPanels:this,$parentInstance:this}}},We={name:"TabPanels",extends:Rt,inheritAttrs:!1};function Et(n,e,t,s,r,a){return l(),x("div",E({class:n.cx("root"),role:"presentation"},n.ptmi("root")),[X(n.$slots,"default")],16)}We.render=Et;var Kt=function(e){var t=e.dt;return`
.p-tabs {
    display: flex;
    flex-direction: column;
}

.p-tablist {
    display: flex;
    position: relative;
}

.p-tabs-scrollable > .p-tablist {
    overflow: hidden;
}

.p-tablist-viewport {
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: none;
    overscroll-behavior: contain auto;
}

.p-tablist-viewport::-webkit-scrollbar {
    display: none;
}

.p-tablist-tab-list {
    position: relative;
    display: flex;
    background: `.concat(t("tabs.tablist.background"),`;
    border-style: solid;
    border-color: `).concat(t("tabs.tablist.border.color"),`;
    border-width: `).concat(t("tabs.tablist.border.width"),`;
}

.p-tablist-content {
    flex-grow: 1;
}

.p-tablist-nav-button {
    all: unset;
    position: absolute !important;
    flex-shrink: 0;
    inset-block-start: 0;
    z-index: 2;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: `).concat(t("tabs.nav.button.background"),`;
    color: `).concat(t("tabs.nav.button.color"),`;
    width: `).concat(t("tabs.nav.button.width"),`;
    transition: color `).concat(t("tabs.transition.duration"),", outline-color ").concat(t("tabs.transition.duration"),", box-shadow ").concat(t("tabs.transition.duration"),`;
    box-shadow: `).concat(t("tabs.nav.button.shadow"),`;
    outline-color: transparent;
    cursor: pointer;
}

.p-tablist-nav-button:focus-visible {
    z-index: 1;
    box-shadow: `).concat(t("tabs.nav.button.focus.ring.shadow"),`;
    outline: `).concat(t("tabs.nav.button.focus.ring.width")," ").concat(t("tabs.nav.button.focus.ring.style")," ").concat(t("tabs.nav.button.focus.ring.color"),`;
    outline-offset: `).concat(t("tabs.nav.button.focus.ring.offset"),`;
}

.p-tablist-nav-button:hover {
    color: `).concat(t("tabs.nav.button.hover.color"),`;
}

.p-tablist-prev-button {
    inset-inline-start: 0;
}

.p-tablist-next-button {
    inset-inline-end: 0;
}

.p-tablist-prev-button:dir(rtl),
.p-tablist-next-button:dir(rtl) {
    transform: rotate(180deg);
}


.p-tab {
    flex-shrink: 0;
    cursor: pointer;
    user-select: none;
    position: relative;
    border-style: solid;
    white-space: nowrap;
    background: `).concat(t("tabs.tab.background"),`;
    border-width: `).concat(t("tabs.tab.border.width"),`;
    border-color: `).concat(t("tabs.tab.border.color"),`;
    color: `).concat(t("tabs.tab.color"),`;
    padding: `).concat(t("tabs.tab.padding"),`;
    font-weight: `).concat(t("tabs.tab.font.weight"),`;
    transition: background `).concat(t("tabs.transition.duration"),", border-color ").concat(t("tabs.transition.duration"),", color ").concat(t("tabs.transition.duration"),", outline-color ").concat(t("tabs.transition.duration"),", box-shadow ").concat(t("tabs.transition.duration"),`;
    margin: `).concat(t("tabs.tab.margin"),`;
    outline-color: transparent;
}

.p-tab:not(.p-disabled):focus-visible {
    z-index: 1;
    box-shadow: `).concat(t("tabs.tab.focus.ring.shadow"),`;
    outline: `).concat(t("tabs.tab.focus.ring.width")," ").concat(t("tabs.tab.focus.ring.style")," ").concat(t("tabs.tab.focus.ring.color"),`;
    outline-offset: `).concat(t("tabs.tab.focus.ring.offset"),`;
}

.p-tab:not(.p-tab-active):not(.p-disabled):hover {
    background: `).concat(t("tabs.tab.hover.background"),`;
    border-color: `).concat(t("tabs.tab.hover.border.color"),`;
    color: `).concat(t("tabs.tab.hover.color"),`;
}

.p-tab-active {
    background: `).concat(t("tabs.tab.active.background"),`;
    border-color: `).concat(t("tabs.tab.active.border.color"),`;
    color: `).concat(t("tabs.tab.active.color"),`;
}

.p-tabpanels {
    background: `).concat(t("tabs.tabpanel.background"),`;
    color: `).concat(t("tabs.tabpanel.color"),`;
    padding: `).concat(t("tabs.tabpanel.padding"),`;
    outline: 0 none;
}

.p-tabpanel:focus-visible {
    box-shadow: `).concat(t("tabs.tabpanel.focus.ring.shadow"),`;
    outline: `).concat(t("tabs.tabpanel.focus.ring.width")," ").concat(t("tabs.tabpanel.focus.ring.style")," ").concat(t("tabs.tabpanel.focus.ring.color"),`;
    outline-offset: `).concat(t("tabs.tabpanel.focus.ring.offset"),`;
}

.p-tablist-active-bar {
    z-index: 1;
    display: block;
    position: absolute;
    inset-block-end: `).concat(t("tabs.active.bar.bottom"),`;
    height: `).concat(t("tabs.active.bar.height"),`;
    background: `).concat(t("tabs.active.bar.background"),`;
    transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
}
`)},Ft={root:function(e){var t=e.props;return["p-tabs p-component",{"p-tabs-scrollable":t.scrollable}]}},Wt=ie.extend({name:"tabs",theme:Kt,classes:Ft}),Ht={name:"BaseTabs",extends:le,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:Wt,provide:function(){return{$pcTabs:this,$parentInstance:this}}},He={name:"Tabs",extends:Ht,inheritAttrs:!1,emits:["update:value"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(e){this.id=e||_e()},value:function(e){this.d_value=e}},mounted:function(){this.id=this.id||_e()},methods:{updateValue:function(e){this.d_value!==e&&(this.d_value=e,this.$emit("update:value",e))},isVertical:function(){return this.orientation==="vertical"}}};function Ut(n,e,t,s,r,a){return l(),x("div",E({class:n.cx("root")},n.ptmi("root")),[X(n.$slots,"default")],16)}He.render=Ut;const qt={class:"flex w-full justify-between overflow-hidden"},Mt={ref:"prev"},Gt={key:1,ref:"listContainer",class:"flex w-full justify-center gap-1 overflow-hidden"},Yt={key:1,class:"flex flex-col justify-end items-center h-8 w-8"},Qt={key:2,class:"flex flex-col justify-end items-center h-8 w-8"},Xt={ref:"next"},Zt=ne({__name:"StepList",setup(n){const e=ce(),{lesson:t,stepIndex:s,stepLoading:r}=Z(e),{changeStep:a,setSteps:d,setStepIndex:T}=e,z=oe(),w=Y(()=>t.value.steps.length),{width:k}=rt(nt("listContainer")),g=N(0),A=N(0),V=N(0),H=N([]),o=Y(()=>t.value===null||s.value===null||s.value>=t.value.steps.length?{id:0,type:"article",progress:"nothing",inner:{contents:[],modules:[]},skip_submit:!1}:t.value.steps[s.value]),B=()=>{y.value&&(g.value--,A.value--,S())},D=()=>{h.value&&(g.value++,A.value++,S())},y=N(0),h=N(0),{locale:U}=ye(),O=N(!1);async function P(){if(!O.value){O.value=!0;try{const{data:c}=await J.getStudentProjectStepsByID(z.params.id.toString()),u=[];for(const[C,_]of c.steps.entries())if(_.id==c.last_step_id){T(C);const m=await Ce(_);u.push(m)}else{const m={id:_.id.toString(),title:"",type:_.step_type,progress:_.status,inner:{contents:[],modules:[]},answer:{open:"",question:[]},state:{code:"",stdout:"",slots:[]},access_type:_.access_type,accessibility:_.accessibility,skip_submit:_.skip_submit};u.push(m)}d(u)}catch(c){console.log(c)}finally{O.value=!1}}}function F(c,u){if(u)return"info";if(c!="completed")return c=="attempted"?"warn":(c=="started","secondary")}function R(c,u){if(!u&&c!="completed")return c=="attempted"||c=="started"?"outlined":void 0}function Q(c,u){switch(c){case"article":return"pi pi-align-left";case"code":return u?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}re(P);function S(){if(!(t.value===null||s.value===null)){if(h.value=0,y.value=0,V.value==w.value){H.value=t.value.steps;return}g.value>0&&(y.value++,g.value>=s.value&&y.value++),A.value<w.value&&(h.value++,A.value-h.value<=s.value&&h.value++),H.value=t.value.steps.slice(g.value+y.value,A.value-h.value)}}return q(U,P,{immediate:!1}),q(k,()=>{let c=0,u=0;for(;u+36<=k.value&&c<w.value;)u+=36,c++;V.value=Math.max(3,c),g.value=0,A.value=V.value,S()},{immediate:!0}),q(s,S),(c,u)=>{const C=ue,_=je;return l(),x("div",qt,[$("div",Mt,[p(C,{severity:"secondary",disabled:O.value||y.value==0,icon:"pi pi-angle-left",class:"h-8 w-8",onClick:B},null,8,["disabled"])],512),O.value||i(t)==null?(l(),v(_,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(l(),x("div",Gt,[i(s)!==null&&y.value>1?(l(),v(C,{key:0,severity:"info",variant:R(o.value.progress,!0),icon:Q(o.value.type,o.value.skip_submit),loading:i(r),onClick:u[0]||(u[0]=m=>i(a)(i(s))),class:"h-8 w-8 flex-none",rounded:""},null,8,["variant","icon","loading"])):L("",!0),y.value?(l(),x("div",Yt,u[2]||(u[2]=[$("span",{class:"material-icons text-zinc-500"},"more_horiz ",-1)]))):L("",!0),(l(!0),x(te,null,Pe(H.value,(m,W)=>(l(),x("div",{key:m.id,class:"relative"},[m.access_type!="premium"?(l(),v(C,{key:m.id,icon:Q(m.type,m.skip_submit),rounded:"",severity:F(m.progress,m.id==o.value.id),variant:R(m.progress,m.id==o.value.id),class:ee([{"bg-orange-100":m.progress=="attempted"&&m.id!=o.value.id},"h-8 w-8 flex-none"]),onClick:M=>i(a)(W+g.value+y.value),disabled:i(r)||!m.accessibility,loading:W+g.value+y.value==i(s)&&i(r)},null,8,["icon","severity","variant","class","onClick","disabled","loading"])):(l(),v(C,{key:1,icon:"pi pi-crown",rounded:"",severity:"secondary",class:"h-8 w-8 flex-none bg-purple-100 border-purple-100 text-purple-500"}))]))),128)),h.value>0?(l(),x("div",Qt,u[3]||(u[3]=[$("span",{class:"material-icons text-zinc-500"},"more_horiz ",-1)]))):L("",!0),i(s)!==null&&h.value>=2?(l(),v(C,{key:3,severity:"info",variant:R(o.value.progress,!0),icon:Q(o.value.type,o.value.skip_submit),loading:i(r),onClick:u[1]||(u[1]=m=>i(a)(i(s))),class:"h-8 w-8 flex-none",rounded:""},null,8,["variant","icon","loading"])):L("",!0)],512)),$("div",Xt,[p(C,{severity:"secondary",disabled:O.value||h.value==0,icon:"pi pi-angle-right",class:"h-8 w-8",onClick:D},null,8,["disabled"])],512)])}}}),Jt={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white gap-2"},en={class:"flex flex-none justify-end items-center gap-2"},tn=ne({__name:"LessonHeader",setup(n){const e=me(),t=oe(),s=at(),{user:r}=Z(s),a=N(!1);async function d(){if(!a.value){a.value=!0;try{await J.resetStepsProgress(t.params.id.toString()),window.location.reload()}catch(T){console.log(T)}finally{a.value=!1}}}return(T,z)=>{var g;const w=Oe,k=ue;return l(),x("div",Jt,[$("button",{class:"flex flex-none items-center hover:opacity-80 transition",onClick:z[1]||(z[1]=A=>i(e).push("/"))},[p(w,{src:i(Ne),width:"32"},null,8,["src"]),z[2]||(z[2]=$("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),p(k,{icon:"pi pi-angle-left",label:T.$t("back"),severity:"secondary",variant:"text",onClick:z[0]||(z[0]=A=>i(e).go(-1)),size:"small"},null,8,["label"])]),p(Zt),$("div",en,[["editor","contributor"].includes(((g=i(r))==null?void 0:g.user_type)??"")?(l(),v(k,{key:0,label:"Reset",icon:"pi pi-refresh",severity:"info",variant:"outlined",size:"small",onClick:d,disabled:a.value,loading:a.value},null,8,["disabled","loading"])):L("",!0),p(Re,{path:i(t).fullPath+"/edit"},null,8,["path"]),p(De),p(Ee)])])}}}),nn={class:"mx-auto flex items-center justify-between p-2 px-6 w-full bg-white"},an={key:1,class:"flex justify-center w-full gap-1"},sn={class:"flex gap-1"},ln={class:"flex flex-1 justify-end items-center gap-2"},on=ne({__name:"OpenLessonHeader",setup(n){const{locale:e}=ye(),t=me(),s=oe(),r=ce(),{lesson:a,stepIndex:d,stepLoading:T}=Z(r),{changeStep:z,setSteps:w,setStepIndex:k}=r,g=N(!1);function A(B){return B?"info":"secondary"}function V(B){}function H(B){switch(B){case"article":return"pi pi-align-left";case"code":return"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}async function o(){if(!g.value){g.value=!0;try{let B;if(s.name=="module"){const{data:y}=await vt.getModuleStepsByID(s.params.id.toString());B=y}else{const{data:y}=await J.getStudentProjectStepsByID(s.params.id.toString());B=y.steps}const D=[];for(const[y,h]of B.entries())if(y==0){k(y);const U=await(s.name=="module"?pt(h,!1):Ce(h));D.push(U)}else{const U={id:h.id.toString(),title:"",type:h.step_type,progress:"nothing",inner:{contents:[],modules:[]},answer:{open:"",question:[]},state:{code:"",stdout:"",slots:[]},access_type:"freemium",skip_submit:h.skip_submit};D.push(U)}w(D)}catch(B){console.log(B)}finally{g.value=!1}}}return re(o),q(e,o,{immediate:!1}),(B,D)=>{const y=Oe,h=ue,U=je;return l(),x("div",nn,[$("button",{class:"flex flex-none items-center hover:opacity-80 transition",onClick:D[1]||(D[1]=O=>i(t).push("/"))},[p(y,{src:i(Ne),width:"32"},null,8,["src"]),D[2]||(D[2]=$("p",{class:"text-xl font-semibold px-2 mr-4"},"Artisan",-1)),p(h,{icon:"pi pi-angle-left",label:B.$t("back"),severity:"secondary",variant:"text",onClick:D[0]||(D[0]=O=>i(t).go(-1)),size:"small"},null,8,["label"])]),g.value||i(a)==null?(l(),v(U,{key:0,shape:"circle",size:"2rem",class:"mr-2"})):(l(),x("div",an,[$("div",sn,[(l(!0),x(te,null,Pe(i(a).steps,(O,P)=>(l(),v(h,{key:O.id,icon:H(O.type),rounded:"",severity:A(P==i(d)),variant:(P==i(d),void 0),class:ee([{"bg-orange-100":O.progress=="attempted"&&P!=i(d)},"h-8 w-8"]),onClick:F=>i(z)(P),disabled:i(T),loading:P==i(d)&&i(T)},null,8,["icon","severity","variant","class","onClick","disabled","loading"]))),128))])])),$("div",ln,[p(Re,{path:i(s).fullPath+"/edit"},null,8,["path"]),p(De),p(Ee)])])}}}),rn={class:"absolute top-0 right-0 p-2"},un={key:1,class:"flex"},cn={class:"flex justify-end gap-2"},dn=ne({__name:"LessonDiv",setup(n){const e=me(),t=st(),s=ce(),{lesson:r,stepIndex:a,userCode:d,submitEnabled:T,stepLoading:z}=Z(s),{changeStep:w,updateStatus:k,updateAccess:g,restartStep:A}=s,V=N(!1),H=N(!1),o=Y(()=>{var S;return a.value==null||z.value?null:((S=r.value)==null?void 0:S.steps[a.value])??null});async function B(){a.value!=null&&w(a.value-1)}async function D(){var S,c,u,C,_;if(a.value!=null){if((((S=o.value)==null?void 0:S.type)=="article"||(c=o.value)!=null&&c.skip_submit)&&((u=o.value)==null?void 0:u.progress)!="completed"){h.value=!0;try{let m={};((C=o.value)==null?void 0:C.type)=="code"&&(m={code:d.value});const{data:W}=await J.submitStep(((_=o.value)==null?void 0:_.id)??"",m);k(W.status),g(!0)}catch(m){console.log(m)}finally{h.value=!1}}w(a.value+1)}}async function y(){var S,c,u;if(a.value!=null){if(((S=o.value)==null?void 0:S.progress)=="completed"){V.value=!0;return}if(((c=o.value)==null?void 0:c.type)=="article"){h.value=!0;try{const{data:C}=await J.submitStep(((u=o.value)==null?void 0:u.id)??"",{});k(C.status),V.value=!0}catch(C){console.log(C)}finally{h.value=!1}}}}const h=N(!1);async function U(){var S,c,u,C;h.value=!0;try{let _;switch((S=o.value)==null?void 0:S.type){case"code":_={code:d.value};break;case"open":_={open:o.value.answer.open};break;case"question":const M=[];(c=o.value.inner.options)==null||c.forEach(f=>{M.push(f.correct)}),o.value.answer.question=M,_={question:M};break;case"matching":_={match:[{key:"dog",value:"b"},{key:"a",value:"animal"},{key:"c",value:"d"}]};break;default:_={};break}const m=((u=o.value)==null?void 0:u.progress)=="completed",{data:W}=await J.submitStep(((C=o.value)==null?void 0:C.id)??"",_);m||k(W.status),W.status=="completed"?(m||g(!0),t.add({severity:"success",summary:"Correct, good job!",detail:"Completed successfully",life:5e3})):W.status=="attempted"&&t.add({severity:"error",summary:"Wrong answer!",detail:"Keep trying",life:5e3})}catch(_){console.log(_)}finally{h.value=!1}}function O(){V.value=!1,e.push({name:"projects"})}const P=N(null),F=N(0);let R=null;re(()=>{P.value&&(R=new ResizeObserver(()=>{P.value&&(F.value=P.value.clientWidth)}),R.observe(P.value))}),we(()=>{R&&P.value&&(R.unobserve(P.value),R.disconnect())});const Q=Y(()=>F.value>1536?"px-96":F.value>1280?"px-56":(F.value>1024||F.value>768||F.value>640,""));return(S,c)=>{const u=ue,C=it,_=gt;return l(),x(te,null,[$("div",{ref_key:"containerRef",ref:P,class:ee(["flex flex-col p-4 gap-4 overflow-auto h-full justify-between bg-white relative",Q.value])},[$("div",rn,[K(p(u,{variant:"text",severity:"info",icon:"pi pi-refresh",onClick:i(A)},null,8,["onClick"]),[[_,"Restart step"]])]),o.value?(l(),x("div",{key:o.value.id},[o.value.type=="article"?(l(),v(i(Le),{key:0,step:o.value,isPreview:!1},null,8,["step"])):o.value.type=="code"?(l(),v(i(ze),{key:1,step:o.value,isPreview:!1},null,8,["step"])):o.value.type=="matching"?(l(),v(i(Ie),{key:2,step:o.value,isPreview:!1},null,8,["step"])):o.value.type=="open"?(l(),v(i(Ae),{key:3,step:o.value,isPreview:!1,modelValue:o.value.answer.open,"onUpdate:modelValue":c[0]||(c[0]=m=>o.value.answer.open=m)},null,8,["step","modelValue"])):o.value.type=="question"?(l(),v(i(Ve),{key:4,step:o.value,isPreview:!1},null,8,["step"])):L("",!0)])):L("",!0),i(r)!=null&&i(r).steps!=null&&i(r).steps.length>0&&o.value?(l(),x("div",un,[i(a)!==0?(l(),v(u,{key:0,label:S.$t("previous"),icon:"pi pi-angle-left",size:"small",onClick:B},null,8,["label"])):L("",!0),o.value.type!="article"&&o.value.progress!="completed"&&!o.value.skip_submit?(l(),v(u,{key:1,label:S.$t("submit"),icon:"pi pi-check",iconPos:"right",severity:"info",size:"small",class:"ml-auto self-end",onClick:U,disabled:h.value||!i(T),loading:h.value},null,8,["label","disabled","loading"])):L("",!0),i(a)<i(r).steps.length-1&&(o.value.progress=="completed"||o.value.type=="article"||o.value.skip_submit)?(l(),v(u,{key:2,label:S.$t("next"),icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:D,disabled:h.value||o.value.progress!="completed"&&(o.value.type!="article"&&!o.value.skip_submit||!i(T)),loading:h.value},null,8,["label","disabled","loading"])):i(a)==i(r).steps.length-1&&(o.value.progress=="completed"||o.value.type=="article")?(l(),v(u,{key:3,label:"Finish 🥳",size:"small",class:"ml-auto self-end",onClick:y,disabled:h.value||o.value.progress!="completed"&&(o.value.type!="article"||!i(T)),loading:h.value},null,8,["disabled","loading"])):L("",!0)])):L("",!0)],2),p(C,{visible:V.value,"onUpdate:visible":c[1]||(c[1]=m=>V.value=m),modal:"",header:"Congratulations🥳🎉",style:{width:"25rem"}},{default:I(()=>[c[3]||(c[3]=$("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"You successfully completed this project",-1)),$("div",cn,[p(u,{type:"button",label:"Go to next Project ➡️",onClick:O})])]),_:1},8,["visible"]),p(yt,{modelValue:H.value,"onUpdate:modelValue":c[2]||(c[2]=m=>H.value=m)},null,8,["modelValue"])],64)}}}),pn={key:0},vn={key:1,class:"flex"},fn=ne({__name:"OpenLessonDiv",setup(n){const e=oe(),t=ce(),{lesson:s,stepIndex:r}=Z(t),{changeStep:a}=t,d=Y(()=>{var V;return r.value==null?null:((V=s.value)==null?void 0:V.steps[r.value])??null});async function T(){r.value!=null&&a(r.value-1)}async function z(){r.value!=null&&a(r.value+1)}const w=N(null),k=N(0);let g=null;re(()=>{w.value&&(g=new ResizeObserver(()=>{w.value&&(k.value=w.value.clientWidth)}),g.observe(w.value))}),we(()=>{g&&w.value&&(g.unobserve(w.value),g.disconnect())});const A=Y(()=>k.value>1536?"px-96":k.value>1280?"px-56":(k.value>1024||k.value>768||k.value>640,""));return(V,H)=>{var B;const o=ue;return l(),x("div",{ref_key:"containerRef",ref:w,class:ee(["flex flex-col p-4 gap-4 overflow-auto h-full justify-between bg-white",A.value])},[d.value?(l(),x("div",pn,[d.value.type=="article"?(l(),v(i(Le),{key:0,step:d.value,isPreview:!1},null,8,["step"])):d.value.type=="code"?(l(),v(i(ze),{key:1,step:d.value,isPreview:!1},null,8,["step"])):d.value.type=="matching"?(l(),v(i(Ie),{key:2,step:d.value,isPreview:!1},null,8,["step"])):d.value.type=="open"?(l(),v(i(Ae),{key:3,step:d.value,isPreview:!1},null,8,["step"])):d.value.type=="question"?(l(),v(i(Ve),{key:4,step:d.value,isPreview:!1},null,8,["step"])):L("",!0)])):L("",!0),i(s)!=null&&i(s).steps!=null&&i(s).steps.length>0&&d.value&&i(r)!=null?(l(),x("div",vn,[i(r)!==0?(l(),v(o,{key:0,label:V.$t("previous"),icon:"pi pi-angle-left",size:"small",onClick:T},null,8,["label"])):L("",!0),i(r)<i(s).steps.length-1?(l(),v(o,{key:1,label:i(e).name=="project"&&!((B=i(s))!=null&&B.is_guidable)?V.$t("start"):V.$t("next"),icon:"pi pi-angle-right",iconPos:"right",size:"small",class:"ml-auto self-end",onClick:z},null,8,["label"])):L("",!0)])):L("",!0)],2)}}}),bn={key:0},hn={key:1,class:"h-[51px]"},mn={key:2,class:"flex bg-surface-0"},gn={class:"flex justify-center h-full"},yn={class:"w-full"},ea=ne({__name:"LessonView",setup(n){const t=ut(ct).smallerOrEqual("md"),{locale:s}=ye(),r=me(),a=oe(),d=ce(),{simVisible:T,ideVisible:z,lesson:w,stepIndex:k,modulesWerePut:g}=Z(d),{setLesson:A,lightUp:V,clearSlotsModulesClasses:H,toastModulePut:o,runCodePressed:B,saveStepStateLocally:D}=d,y=xe(),h=wt(),{setCode:U}=h,{fileContent:O}=Z(h),P=N(!1);async function F(){if(!P.value){P.value=!0;try{if(a.name=="project"){const{data:f}=await ft.getProjectByID(a.params.id.toString()),b=await bt(f);A(b)}else if(a.name=="module"){const{data:f}=await ht.getModuleByID(a.params.id.toString()),b=await mt(f);A(b)}}catch(f){r.replace("/"),console.log(f)}finally{P.value=!1}}}re(F),q(s,F);function R(f){if(g.value=!0,H(),w.value==null||k.value==null||w.value.steps.length==0)return;const b=w.value.steps[k.value].inner.highlights;if(b)for(const j of b){if(!j.slot||!j.module)continue;if(f.id==j.slot&&f.with.type!==""&&o(f.with.type,j.module),y.getSlotPinWith(j.slot).type!==j.module){V(j.slot,j.module),g.value=!1;break}}}for(const f of y.slots)q(()=>f.with.type,()=>{R(f)},{immediate:!0});q(()=>y.pin8.with.type,()=>{R(y.pin8)},{immediate:!0}),q(()=>y.pin9.with.type,()=>{R(y.pin9)},{immediate:!0}),q(()=>{if(!w.value||!w.value.steps[k.value??0])return null;const f=w.value.steps[k.value??0].inner.highlights;return f||null},()=>{for(const f of y.slots)R(f)});const Q=Y(()=>{var f;return k.value==null?null:((f=w.value)==null?void 0:f.steps[k.value])??null}),S=N(!1),c=dt(f=>{m(f),D(f)},1e3,{maxWait:5e3}),u=xe(),C=kt(),{output:_}=Z(C);q([u.slotHasList,O,_],(f,b)=>{if(f==null||b==null)return;S.value=!0;const j={code:O.value,stdout:_.value,slots:u.slotHasList()};a.name=="project"&&c(j)},{deep:!0});async function m(f){if(Q.value!=null){S.value=!0;try{await J.saveStudentStepStateByID(Q.value,f)}catch(b){console.log(b)}finally{S.value=!1}}}we(()=>{y.clearSlots(),U("")});const W=Y(()=>{let f=1;return T.value&&f++,z.value&&f++,100/f}),M=Y(()=>t.value?"#tabs":"#splitter");return(f,b)=>{const j=Fe,ke=We,Ue=Ke,qe=He,ae=Qe,$e=Xe;return l(),x(te,null,[P.value?(l(),x("div",hn)):K((l(),x("div",bn,[i(a).name=="module"?(l(),v(on,{key:0})):i(a).name=="project"?(l(),v(tn,{key:1})):L("",!0)],512)),[[G,!i(t)]]),P.value?L("",!0):(l(),x("div",mn,[(l(),v(fe,{to:M.value+"-lesson",defer:""},[$("div",gn,[$("div",yn,[i(a).name=="module"?(l(),v(fn,{key:0})):i(a).name=="project"?(l(),v(dn,{key:1})):L("",!0)])])],8,["to"])),(l(),v(fe,{to:M.value+"-code",defer:""},[p(Me,{onRun:i(B)},null,8,["onRun"])],8,["to"])),(l(),v(fe,{to:M.value+"-emulator",defer:""},[p(Ge)],8,["to"])),(l(),v(fe,{to:M.value+"-terminal",defer:""},[p(Ye)],8,["to"])),K(p(qe,{value:"0",class:ee(["grid w-full h-screen","grid-rows-[1fr_auto]"])},{default:I(()=>[p(ke,{class:"overflow-auto",style:{}},{default:I(()=>[p(j,{id:"tabs-lesson",value:"0"},{default:I(()=>b[0]||(b[0]=[$("div",null,null,-1)])),_:1}),p(j,{id:"tabs-emulator",value:"1",class:"h-full w-full"},{default:I(()=>b[1]||(b[1]=[$("div",null,null,-1)])),_:1}),p(j,{id:"tabs-code",value:"2",class:"h-full w-full"},{default:I(()=>b[2]||(b[2]=[$("div",null,null,-1)])),_:1}),p(j,{id:"tabs-terminal",value:"3",class:"h-full w-full"},{default:I(()=>b[3]||(b[3]=[$("div",null,null,-1)])),_:1})]),_:1}),p(Ue,{class:"w-full bg-white border-t"},{default:I(()=>[p(i(se),{value:"0"},{default:I(()=>b[4]||(b[4]=[be("Lesson")])),_:1}),K(p(i(se),{value:"1"},{default:I(()=>b[5]||(b[5]=[be("Pibody")])),_:1},512),[[G,i(T)]]),K(p(i(se),{value:"2"},{default:I(()=>b[6]||(b[6]=[be("Editor")])),_:1},512),[[G,i(z)]]),K(p(i(se),{value:"3"},{default:I(()=>b[7]||(b[7]=[be("Terminal")])),_:1},512),[[G,i(z)]])]),_:1})]),_:1},512),[[G,i(t)]]),K(p($e,{class:"w-full rounded-none",style:{height:"calc(100vh - 52px)"}},{default:I(()=>[K(p(ae,{id:"splitter-emulator",size:W.value,minSize:10,class:"max-w-[467px] w-full"},{default:I(()=>b[8]||(b[8]=[$("div",null,null,-1)])),_:1},8,["size"]),[[G,i(T)]]),K(p(ae,{size:W.value,minSize:10},{default:I(()=>[p($e,{layout:"vertical",class:"h-full w-full"},{default:I(()=>[p(ae,{id:"splitter-code",size:65,minSize:10},{default:I(()=>b[9]||(b[9]=[$("div",null,null,-1)])),_:1}),p(ae,{id:"splitter-terminal",size:35,minSize:10},{default:I(()=>b[10]||(b[10]=[$("div",null,null,-1)])),_:1})]),_:1})]),_:1},8,["size"]),[[G,i(z)]]),p(ae,{id:"splitter-lesson",size:W.value,minSize:10,class:"mx-auto"},{default:I(()=>b[11]||(b[11]=[$("div",null,null,-1)])),_:1},8,["size"])]),_:1},512),[[G,!i(t)]])]))],64)}}});export{ea as default};
