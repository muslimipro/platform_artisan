import{S as O,_ as P,T as U,s as I,a as j}from"./SimulationView-CGcs8FE9.js";import{_ as q}from"./IdeHeader.vue_vue_type_script_setup_true_lang-_ljH7-uP.js";import{s as G}from"./index-BrpomCLz.js";import{s as H}from"./index-VUcTiFhv.js";import{d as z,ae as C,h as p,i as K,o as x,c as S,a as o,b as e,w as s,t as n,u as c,m as Q,l as W,F as A,x as X,s as Y,A as Z}from"./index-F0pUg8he.js";import{h as ee,g as te,k as ae,m as se}from"./index-4JDLsMN0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-Dz7jfZKw.js";import"./pibody-BwAjMvHk.js";import"./index-2f9_IIyA.js";const le={class:"material-icons"},ie={class:"material-icons"},oe={class:"material-icons"},ne={class:"material-icons"},ce={class:"material-icons"},re={key:0},ue=z({__name:"TesterControls",setup(N){const{fileContent:b}=C(ee()),l=te(),{isLoading:t,isReplaying:y,isReplayTimeout:$}=C(l),v=p({activity:[],userActivity:[]}),w=p({activity:[],userActivity:[]}),r=p({activity:[],userActivity:[]}),_=p(""),f=p("");let h="",m=[];const u=p(null),T=K(),V=p([]);function D(){m=[];for(const i of l.getSlots())m.push(i.with.type);h=b.value,l.startRecording()}function F(){v.value=l.stopRecording()}function J(){ae(v.value.activity,v.value.userActivity,h,m,_.value,f.value)}const L=async i=>{var d;const a=(d=i.target.files)==null?void 0:d[0];if(a)try{u.value=await se(a),r.value.activity=u.value.activity,r.value.userActivity=u.value.userActivity,h=u.value.code,_.value=u.value.name,f.value=u.value.description,m=u.value.moduleList,console.log("Loaded Test Data:",u.value)}catch(g){console.error("Error loading JSON:",g)}};function k(){l.startReplaying(r.value.userActivity,r.value.activity.length);const i=Z(y,()=>{if(!y.value){w.value=l.getRecordedResults();let a="error";JSON.stringify(r.value.activity)===JSON.stringify(w.value.activity)&&(a="success"),T.add({severity:a,summary:"Replayed",life:3e3}),l.stop()}$.value&&T.add({severity:"warn",summary:"Replay timeout",life:3e3}),i.stop()})}const B=async()=>{b.value=h;for(let i=0;i<m.length;i++){const a=m[i];l.newModuleToSlotIndex(a,i)}X(()=>{k()})},E=async()=>{k()};return(i,a)=>{const d=Y,g=H,M=G;return x(),S(A,null,[o("div",null,[e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"success",rounded:"",onClick:D,disabled:c(t)||c(l).isRecording},{default:s(()=>[o("span",le,n(c(t)?"hourglass_top":"play_arrow"),1)]),_:1},8,["disabled"]),e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"danger",rounded:"",onClick:F,disabled:c(t)||!c(l).isRecording},{default:s(()=>[o("span",ie,n(c(t)?"hourglass_top":"stop"),1)]),_:1},8,["disabled"]),e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"info",rounded:"",onClick:J,disabled:v.value.activity.length<=0},{default:s(()=>[o("span",oe,n(c(t)?"hourglass_top":"save"),1)]),_:1},8,["disabled"])]),o("div",null,[e(g,{type:"text",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=R=>_.value=R),placeholder:"Name",disabled:v.value.activity.length>0},null,8,["modelValue","disabled"])]),o("div",null,[e(M,{type:"text",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=R=>f.value=R),placeholder:"Description",disabled:v.value.activity.length>0},null,8,["modelValue","disabled"])]),o("div",null,[e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"info",rounded:"",onClick:B,disabled:r.value.activity.length<=0},{default:s(()=>[o("span",ne,n(c(t)?"hourglass_top":"bug_report"),1)]),_:1},8,["disabled"]),e(d,{type:"button",class:"w-9 h-9 mr-1",severity:"warn",rounded:"",onClick:E,disabled:r.value.activity.length<=0},{default:s(()=>[o("span",ce,n(c(t)?"hourglass_top":"task"),1)]),_:1},8,["disabled"]),e(g,{type:"file",onChange:L,accept:"application/json",placeholder:"Name"})]),V.value.length>0?(x(),S("div",re,n(V.value.length),1)):Q("",!0),W(" Recorded: "+n(v.value.activity.length)+" Replayed: "+n(w.value.activity.length)+" Loaded: "+n(r.value.activity.length),1)],64)}}}),de={class:"flex bg-surface-0",style:{height:"calc(100vh - 52px)"}},Re=z({__name:"TesterView",setup(N){return(b,l)=>{const t=I,y=j;return x(),S(A,null,[e(q),o("div",de,[e(y,{class:"w-full rounded-none"},{default:s(()=>[e(t,{size:50,minSize:10,class:"max-w-[467px] w-full"},{default:s(()=>[e(O)]),_:1}),e(t,{size:50,minSize:10},{default:s(()=>[e(y,{layout:"vertical",class:"h-full w-full"},{default:s(()=>[e(t,{size:65,minSize:10},{default:s(()=>[e(P)]),_:1}),e(t,{size:35,minSize:10},{default:s(()=>[e(U)]),_:1})]),_:1})]),_:1}),e(t,{size:50,minSize:10},{default:s(()=>[e(ue)]),_:1})]),_:1})])],64)}}});export{Re as default};
