var Fe=Object.defineProperty;var Ie=(e,t,n)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _=(e,t,n)=>Ie(e,typeof t!="symbol"?t+"":t,n);var at=xe((lt,Y)=>{var A=(e=>(e.PinGetValue="pin get value",e.PinGetMode="pin get mode",e.PinGetPull="pin get pull",e.AdcReadU16="adc read_u16",e.I2CScan="i2c scan",e.I2CReadFromMem="i2c readfrom_mem",e.Input="input",e))(A||{});const te=2;var d=(e=>(e.I2CWriteToMem="i2c writefrom_mem",e.PinSetValue="pin set value",e.PinSetMode="pin set mode",e.PinSetPull="pin set pull",e.PwmFreq="pwm freq",e.PwmDutyU16="pwm duty_u16",e.Output="output",e.Sleep="sleep",e.DisplayText="display text",e.DisplayClear="display clear",e.NeoPixelWrite="neopixel write",e.RawOutput="raw output",e.KeyboardInterrupt="keyboard interrupt",e.Error="error",e))(d||{}),T=(e=>(e.Finished="finished",e.Initialized="initialized",e.Timeout="timeout",e))(T||{});Object.values({...A,...d,...T});new Set(Object.values(A));new Set(Object.values(T));new Set(Object.values(d));var k=(e=>(e[e.NONE=-1]="NONE",e[e.IN=0]="IN",e[e.OUT=1]="OUT",e[e.ANALOG=5]="ANALOG",e[e.PWM=6]="PWM",e))(k||{}),z=(e=>(e[e.NONE=-1]="NONE",e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e))(z||{}),qe=Object.defineProperty,p=(e,t)=>qe(e,"name",{value:t,configurable:!0}),ie=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});function oe(e){return!isNaN(parseFloat(e))&&isFinite(e)}p(oe,"_isNumber");function E(e){return e.charAt(0).toUpperCase()+e.substring(1)}p(E,"_capitalize");function V(e){return function(){return this[e]}}p(V,"_getter");var x=["isConstructor","isEval","isNative","isToplevel"],q=["columnNumber","lineNumber"],D=["fileName","functionName","source"],De=["args"],Le=["evalOrigin"],M=x.concat(q,D,De,Le);function g(e){if(e)for(var t=0;t<M.length;t++)e[M[t]]!==void 0&&this["set"+E(M[t])](e[M[t]])}p(g,"StackFrame");g.prototype={getArgs:function(){return this.args},setArgs:function(e){if(Object.prototype.toString.call(e)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof g)this.evalOrigin=e;else if(e instanceof Object)this.evalOrigin=new g(e);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",o=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:o?o+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}};g.fromString=p(function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),o=e.substring(0,t),r=e.substring(t+1,n).split(","),i=e.substring(n+1);if(i.indexOf("@")===0)var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),a=s[1],f=s[2],c=s[3];return new g({functionName:o,args:r||void 0,fileName:a,lineNumber:f||void 0,columnNumber:c||void 0})},"StackFrame$$fromString");for(P=0;P<x.length;P++)g.prototype["get"+E(x[P])]=V(x[P]),g.prototype["set"+E(x[P])]=function(e){return function(t){this[e]=!!t}}(x[P]);var P;for(N=0;N<q.length;N++)g.prototype["get"+E(q[N])]=V(q[N]),g.prototype["set"+E(q[N])]=function(e){return function(t){if(!oe(t))throw new TypeError(e+" must be a Number");this[e]=Number(t)}}(q[N]);var N;for(O=0;O<D.length;O++)g.prototype["get"+E(D[O])]=V(D[O]),g.prototype["set"+E(D[O])]=function(e){return function(t){this[e]=String(t)}}(D[O]);var O,C=g;function se(){var e=/^\s*at .*(\S+:\d+|\(native\))/m,t=/^(eval@)?(\[native code])?$/;return{parse:p(function(n){if(n.stack&&n.stack.match(e))return this.parseV8OrIE(n);if(n.stack)return this.parseFFOrSafari(n);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:p(function(n){if(n.indexOf(":")===-1)return[n];var o=/(.+?)(?::(\d+))?(?::(\d+))?$/,r=o.exec(n.replace(/[()]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:p(function(n){var o=n.stack.split(`
`).filter(function(r){return!!r.match(e)},this);return o.map(function(r){r.indexOf("(eval ")>-1&&(r=r.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var i=r.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),s=i.match(/ (\(.+\)$)/);i=s?i.replace(s[0],""):i;var a=this.extractLocation(s?s[1]:i),f=s&&i||void 0,c=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new C({functionName:f,fileName:c,lineNumber:a[1],columnNumber:a[2],source:r})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:p(function(n){var o=n.stack.split(`
`).filter(function(r){return!r.match(t)},this);return o.map(function(r){if(r.indexOf(" > eval")>-1&&(r=r.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),r.indexOf("@")===-1&&r.indexOf(":")===-1)return new C({functionName:r});var i=/((.*".+"[^@]*)?[^@]*)(?:@)/,s=r.match(i),a=s&&s[1]?s[1]:void 0,f=this.extractLocation(r.replace(i,""));return new C({functionName:a,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:r})},this)},"ErrorStackParser$$parseFFOrSafari")}}p(se,"ErrorStackParser");var Ue=new se,Re=Ue,b=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,ae=b&&typeof Y<"u"&&typeof Y.exports<"u"&&typeof ie<"u"&&typeof __dirname<"u",Te=b&&!ae,je=typeof Deno<"u",ce=!b&&!je,$e=ce&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",Me=ce&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var le,G,ue,re,J;async function Z(){if(!b||(le=(await import("./__vite-browser-external-9wXp6ZBx.js")).default,re=await import("./__vite-browser-external-9wXp6ZBx.js"),J=await import("./__vite-browser-external-9wXp6ZBx.js"),ue=(await import("./__vite-browser-external-9wXp6ZBx.js")).default,G=await import("./__vite-browser-external-9wXp6ZBx.js"),Q=G.sep,typeof ie<"u"))return;let e=re,t=await import("./__vite-browser-external-9wXp6ZBx.js"),n=await import("./__vite-browser-external-9wXp6ZBx.js"),o=await import("./__vite-browser-external-9wXp6ZBx.js"),r={fs:e,crypto:t,ws:n,child_process:o};globalThis.require=function(i){return r[i]}}p(Z,"initNodeModules");function me(e,t){return G.resolve(t||".",e)}p(me,"node_resolvePath");function fe(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}p(fe,"browser_resolvePath");var K;b?K=me:K=fe;var Q;b||(Q="/");function pe(e,t){return e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?{response:fetch(e)}:{binary:J.readFile(e).then(n=>new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}}p(pe,"node_getBinaryResponse");function de(e,t){let n=new URL(e,location);return{response:fetch(n,t?{integrity:t}:{})}}p(de,"browser_getBinaryResponse");var B;b?B=pe:B=de;async function ye(e,t){let{response:n,binary:o}=B(e,t);if(o)return o;let r=await n;if(!r.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await r.arrayBuffer())}p(ye,"loadBinaryFile");var W;if($e)W=p(async e=>await import(e),"loadScript");else if(Me)W=p(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(b)W=he;else throw new Error("Cannot determine runtime environment");async function he(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?ue.runInThisContext(await(await fetch(e)).text()):await import(le.pathToFileURL(e).href)}p(he,"nodeLoadScript");async function we(e){if(b){await Z();let t=await J.readFile(e,{encoding:"utf8"});return JSON.parse(t)}else return await(await fetch(e)).json()}p(we,"loadLockFile");async function ge(){if(ae)return __dirname;let e;try{throw new Error}catch(o){e=o}let t=Re.parse(e)[0].fileName;if(b&&!t.startsWith("file://")&&(t=`file://${t}`),Te){let o=await import("./__vite-browser-external-9wXp6ZBx.js");return(await import("./__vite-browser-external-9wXp6ZBx.js")).fileURLToPath(o.dirname(t))}let n=t.lastIndexOf(Q);if(n===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,n)}p(ge,"calculateDirname");function be(e){let t=e.FS,n=e.FS.filesystems.MEMFS,o=e.PATH,r={DIR_MODE:16895,FILE_MODE:33279,mount:function(i){if(!i.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return n.mount.apply(null,arguments)},syncfs:async(i,s,a)=>{try{let f=r.getLocalSet(i),c=await r.getRemoteSet(i),l=s?c:f,m=s?f:c;await r.reconcile(i,l,m),a(null)}catch(f){a(f)}},getLocalSet:i=>{let s=Object.create(null);function a(l){return l!=="."&&l!==".."}p(a,"isRealDir");function f(l){return m=>o.join2(l,m)}p(f,"toAbsolute");let c=t.readdir(i.mountpoint).filter(a).map(f(i.mountpoint));for(;c.length;){let l=c.pop(),m=t.stat(l);t.isDir(m.mode)&&c.push.apply(c,t.readdir(l).filter(a).map(f(l))),s[l]={timestamp:m.mtime,mode:m.mode}}return{type:"local",entries:s}},getRemoteSet:async i=>{let s=Object.create(null),a=await We(i.opts.fileSystemHandle);for(let[f,c]of a)f!=="."&&(s[o.join2(i.mountpoint,f)]={timestamp:c.kind==="file"?(await c.getFile()).lastModifiedDate:new Date,mode:c.kind==="file"?r.FILE_MODE:r.DIR_MODE});return{type:"remote",entries:s,handles:a}},loadLocalEntry:i=>{let s=t.lookupPath(i).node,a=t.stat(i);if(t.isDir(a.mode))return{timestamp:a.mtime,mode:a.mode};if(t.isFile(a.mode))return s.contents=n.getFileDataAsTypedArray(s),{timestamp:a.mtime,mode:a.mode,contents:s.contents};throw new Error("node type not supported")},storeLocalEntry:(i,s)=>{if(t.isDir(s.mode))t.mkdirTree(i,s.mode);else if(t.isFile(s.mode))t.writeFile(i,s.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(i,s.mode),t.utime(i,s.timestamp,s.timestamp)},removeLocalEntry:i=>{var s=t.stat(i);t.isDir(s.mode)?t.rmdir(i):t.isFile(s.mode)&&t.unlink(i)},loadRemoteEntry:async i=>{if(i.kind==="file"){let s=await i.getFile();return{contents:new Uint8Array(await s.arrayBuffer()),mode:r.FILE_MODE,timestamp:s.lastModifiedDate}}else{if(i.kind==="directory")return{mode:r.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+i.kind)}},storeRemoteEntry:async(i,s,a)=>{let f=i.get(o.dirname(s)),c=t.isFile(a.mode)?await f.getFileHandle(o.basename(s),{create:!0}):await f.getDirectoryHandle(o.basename(s),{create:!0});if(c.kind==="file"){let l=await c.createWritable();await l.write(a.contents),await l.close()}i.set(s,c)},removeRemoteEntry:async(i,s)=>{await i.get(o.dirname(s)).removeEntry(o.basename(s)),i.delete(s)},reconcile:async(i,s,a)=>{let f=0,c=[];Object.keys(s.entries).forEach(function(u){let y=s.entries[u],w=a.entries[u];(!w||t.isFile(y.mode)&&y.timestamp.getTime()>w.timestamp.getTime())&&(c.push(u),f++)}),c.sort();let l=[];if(Object.keys(a.entries).forEach(function(u){s.entries[u]||(l.push(u),f++)}),l.sort().reverse(),!f)return;let m=s.type==="remote"?s.handles:a.handles;for(let u of c){let y=o.normalize(u.replace(i.mountpoint,"/")).substring(1);if(a.type==="local"){let w=m.get(y),v=await r.loadRemoteEntry(w);r.storeLocalEntry(u,v)}else{let w=r.loadLocalEntry(u);await r.storeRemoteEntry(m,y,w)}}for(let u of l)if(a.type==="local")r.removeLocalEntry(u);else{let y=o.normalize(u.replace(i.mountpoint,"/")).substring(1);await r.removeRemoteEntry(m,y)}}};e.FS.filesystems.NATIVEFS_ASYNC=r}p(be,"initializeNativeFS");var We=p(async e=>{let t=[];async function n(r){for await(let i of r.values())t.push(i),i.kind==="directory"&&await n(i)}p(n,"collect"),await n(e);let o=new Map;o.set(".",e);for(let r of t){let i=(await e.resolve(r)).join("/");o.set(i,r)}return o},"getFsHandles");function ve(e){let t={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:Pe(e),quit(n,o){throw t.exited={status:n,toThrow:o},o},print:e.stdout,printErr:e.stderr,arguments:e.args,API:{config:e},locateFile:n=>e.indexURL+n,instantiateWasm:Ne(e.indexURL)};return t}p(ve,"createSettings");function _e(e){return function(t){let n="/";try{t.FS.mkdirTree(e)}catch(o){console.error(`Error occurred while making a home directory '${e}':`),console.error(o),console.error(`Using '${n}' for a home directory instead`),e=n}t.FS.chdir(e)}}p(_e,"createHomeDirectory");function Se(e){return function(t){Object.assign(t.ENV,e)}}p(Se,"setEnvironment");function Ae(e){return t=>{for(let n of e)t.FS.mkdirTree(n),t.FS.mount(t.FS.filesystems.NODEFS,{root:n},n)}}p(Ae,"mountLocalDirectories");function Ee(e){let t=ye(e);return n=>{let o=n._py_version_major(),r=n._py_version_minor();n.FS.mkdirTree("/lib"),n.FS.mkdirTree(`/lib/python${o}.${r}/site-packages`),n.addRunDependency("install-stdlib"),t.then(i=>{n.FS.writeFile(`/lib/python${o}${r}.zip`,i)}).catch(i=>{console.error("Error occurred while installing the standard library:"),console.error(i)}).finally(()=>{n.removeRunDependency("install-stdlib")})}}p(Ee,"installStdlib");function Pe(e){let t;return e.stdLibURL!=null?t=e.stdLibURL:t=e.indexURL+"python_stdlib.zip",[Ee(t),_e(e.env.HOME),Se(e.env),Ae(e._node_mounts),be]}p(Pe,"getFileSystemInitializationFuncs");function Ne(e){if(typeof WasmOffsetConverter<"u")return;let{binary:t,response:n}=B(e+"pyodide.asm.wasm");return function(o,r){return async function(){try{let i;n?i=await WebAssembly.instantiateStreaming(n,o):i=await WebAssembly.instantiate(await t,o);let{instance:s,module:a}=i;r(s,a)}catch(i){console.warn("wasm instantiation failed!"),console.warn(i)}}(),{}}}p(Ne,"getInstantiateWasmFunc");var ne="0.27.2";async function Oe(e={}){var t,n;await Z();let o=e.indexURL||await ge();o=K(o),o.endsWith("/")||(o+="/"),e.indexURL=o;let r={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:o+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:o,packages:[],enableRunUntilComplete:!1,checkAPIVersion:!0,BUILD_ID:"f88dc4abb40ec8e780c94a5f70bcef45ec9eb3c1aee1c99da527febfef1c6f3f"},i=Object.assign(r,e);(t=i.env).HOME??(t.HOME="/home/pyodide"),(n=i.env).PYTHONINSPECT??(n.PYTHONINSPECT="1");let s=ve(i),a=s.API;if(a.lockFilePromise=we(i.lockFileURL),typeof _createPyodideModule!="function"){let u=`${i.indexURL}pyodide.asm.js`;await W(u)}let f;if(e._loadSnapshot){let u=await e._loadSnapshot;ArrayBuffer.isView(u)?f=u:f=new Uint8Array(u),s.noInitialRun=!0,s.INITIAL_MEMORY=f.length}let c=await _createPyodideModule(s);if(s.exited)throw s.exited.toThrow;if(e.pyproxyToStringRepr&&a.setPyProxyToStringMethod(!0),a.version!==ne&&i.checkAPIVersion)throw new Error(`Pyodide version does not match: '${ne}' <==> '${a.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);c.locateFile=u=>{throw new Error("Didn't expect to load any more file_packager files!")};let l;f&&(l=a.restoreSnapshot(f));let m=a.finalizeBootstrap(l,e._snapshotDeserializer);return a.sys.path.insert(0,a.config.env.HOME),m.version.includes("dev")||a.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${m.version}/full/`),a._pyodide.set_excepthook(),await a.packageIndexReady,a.initializeStreams(i.stdin,i.stdout,i.stderr),m}p(Oe,"loadPyodide");const Be=new SharedArrayBuffer(16),j=new Int32Array(Be),ze=new SharedArrayBuffer(2),U=new Uint8Array(ze);function h(e){Atomics.store(j,0,0);const t=ke.currentframe().f_lineno;postMessage({content:e,line:t}),Atomics.wait(j,0,0)}function S(e){Atomics.store(j,0,0),postMessage({content:e,line:-1}),Atomics.wait(j,0,0)}function I(e){postMessage({content:e,line:-1})}function Ve(e,t){return e+t}function Ce(e,t){return e-t}class X{constructor(t,n,o){_(this,"pin");this.pin=t,h({command:d.PinSetMode,request:{pin:this.pin,mode:n}}),h({command:d.PinSetPull,request:{pin:this.pin,pull:o}})}on(){h({command:d.PinSetValue,request:{pin:this.pin,value:1}})}off(){h({command:d.PinSetValue,request:{pin:this.pin,value:0}})}toggle(){const t=this.value();h({command:d.PinSetValue,request:{pin:this.pin,value:1-t}})}value(t=null){if(t===1)this.on();else if(t===0)this.off();else{const n=new Int8Array(new SharedArrayBuffer(4));return h({command:A.PinGetValue,request:{pin:this.pin},result:n}),Atomics.load(n,0)}}}function $(e){return e instanceof X?e.pin:e}class He{constructor(t,n,o){_(this,"pin");this.pin=$(t),t instanceof X?h({command:d.PinSetMode,request:{pin:this.pin,mode:k.OUT}}):h({command:d.PinSetMode,request:{pin:this.pin,mode:k.OUT}})}freq(t){h({command:d.PwmFreq,request:{freq:t,pin:this.pin}})}duty_u16(t){h({command:d.PwmDutyU16,request:{duty_u16:t,pin:this.pin}})}}const Ge={0:[0,4,8,12,16,20],1:[2,6,10,14,18,26]},Ke={0:[1,5,9,13,17,21],1:[3,7,11,15,19,27]};class Ye{constructor(t,n,o,r=4e5,i=5e4){_(this,"id");_(this,"sda");_(this,"scl");_(this,"freq");_(this,"timeout");if(t!==0&&t!==1)throw`I2C(${t}) doesn't exist: only 0 and 1 can be used`;const s=$(n),a=$(o);if(!Ke[t].includes(a))throw"Bad SCL pin: "+a;if(!Ge[t].includes(s))throw"Bad SDA pin: "+s;this.sda=s,this.scl=a,this.id=t,this.freq=r,this.timeout=i}readfrom(t,n){return this.readfrom_mem(t,0,n)}readfrom_into(t,n,o){throw"Not implemented"}readfrom_mem(t,n,o){const r=new SharedArrayBuffer(1+o),i=new Uint8Array(r);return h({command:A.I2CReadFromMem,request:{sda:this.sda,scl:this.scl,addr:t,memaddr:n,nbytes:o},result:i}),i}writeto_mem(t,n,o){const r=new Uint8Array(o);h({command:d.I2CWriteToMem,request:{sda:this.sda,scl:this.scl,addr:t,memaddr:n,buf:r}})}writeto(t,n){}scan(){const t=new SharedArrayBuffer(1020),n=new Int32Array(t);h({command:A.I2CScan,request:{sda:this.sda,scl:this.scl},result:n});const o=Atomics.load(n,0),r=[];return r.toString=function(){return`[${this.join(", ")}]`},o<0||r.push(o),r}toString(){return`I2C(${this.id}, freq=${this.freq}, scl=${this.scl}, sda=${this.sda}, timeout=${this.timeout})`}}class Je{constructor(t){_(this,"pin");if(this.pin=$(t),this.pin===0||this.pin===1||this.pin===2)this.pin+=26;else if(this.pin!==26&&this.pin!==27&&this.pin!==28)throw`Pin(${this.pin}) doesn't have ADC capabilities`;h({command:d.PinSetMode,request:{pin:this.pin,mode:k.ANALOG}})}read_u16(){const t=new Uint16Array(new SharedArrayBuffer(2));return h({command:A.AdcReadU16,request:{pin:this.pin},result:t}),Atomics.load(t,0)}}const Ze=e=>new Je(e),Qe={0:5,1:3},Xe={0:0,1:2},et=(e,{sda:t=Xe[e],scl:n=Qe[e],freq:o=4e5,timeout:r=5e4}={})=>new Ye(e,t,n,o,r),F=(e,t=k.IN,n=z.NONE)=>new X(e,t,n),tt=(e,t,n)=>new He(e,t,n);F.IN=k.IN;F.OUT=k.OUT;F.PULL_UP=z.UP;F.PULL_DOWN=z.DOWN;const rt={Pin:F,PWM:tt,ADC:Ze,I2C:et},nt={const:e=>e},it={display:e=>{h({command:d.DisplayText,request:{text:e,x:0,y:16}})},clear:()=>{h({command:d.DisplayClear,request:{}})},LED:e=>F(e,F.OUT)},ot={NeoPixel:function(e,t,n=3,o=1){const r={};r.pin=$(e),r.n=t,r.bpp=n,r.timing=o,r.pixels=Array(t).fill(null).map(()=>Array(n).fill(0)),r.fill=function(i){let s;Array.isArray(i)?s=i.slice(0,3).map(Number):i&&typeof i=="object"&&"length"in i?s=[Number(i[0]||0),Number(i[1]||0),Number(i[2]||0)]:s=[0,0,0];for(let a=0;a<r.n;a++)r.pixels[a]=[...s]},r.write=function(){const i=r.pixels.map((s,a)=>Array.isArray(s)?s.slice(0,r.bpp).map(Number):Array(r.bpp).fill(0));S({command:d.NeoPixelWrite,request:{pin:r.pin,pixels:i}})},r.show=r.write,r.__len__=function(){return r.n},r.set_pixel=function(i,s){if(i>=0&&i<r.n){let a;Array.isArray(s)?a=s:s&&typeof s=="object"&&"length"in s&&typeof s.length=="number"?a=Array.from(s):a=[0,0,0];const f=a.slice(0,r.bpp).map(Number);r.pixels[i]=f}},r.get_pixel=function(i){return i>=0&&i<r.n?r.pixels[i].slice():Array(r.bpp).fill(0)},r.set=r.set_pixel,r.get=r.get_pixel;try{r.__setitem__=r.set_pixel,r.__getitem__=r.get_pixel}catch{}return r}};async function st(){return await fetch("https://raw.githubusercontent.com/Artisan-education/artisan-libs/main/manifest.json").then(t=>t.json()).catch(()=>{})}function R(e,t,n){const o=`
import sys
import os

file_path = "/home/pyodide/${t}.py"
if os.path.exists(file_path):
    os.remove(file_path)

sys.modules.pop("${t}", None)
`;e.runPython(o),e.registerJsModule(t,n)}let ke,H=!1;(async()=>{function e(){if(S({command:d.Output,request:{output:"> "}}),H){let m="",u=0;const y=new SharedArrayBuffer(256),w=new Uint8Array(y);for(S({command:A.Input,request:{},result:w});;){const v=Atomics.load(w,u);if(v==10)break;m+=String.fromCharCode(v),u++}return S({command:d.RawOutput,request:{output:m+`
\r`}}),m}const c=new Uint8Array(new SharedArrayBuffer(4));let l="";for(;;){S({command:A.Input,request:{},result:c});const m=new Int32Array(c.buffer)[0],u=String.fromCodePoint(m);if(m===10){S({command:d.Output,request:{output:u}});break}else m===8?l.length>0&&(S({command:d.Output,request:{output:u}}),l=l.substring(0,l.length-1)):(S({command:d.Output,request:{output:u}}),l+=u);o.checkInterrupt()}return l}const t=Oe({stdout:c=>S({command:d.Output,request:{output:c+`
\r`}}),stdin:e}),n=(async()=>{const c=await st(),l=Object.entries(c).map(async([u,y])=>{if(y)try{const v=await(await fetch("https://raw.githubusercontent.com/Artisan-education/artisan-libs/main/"+u)).text();return[u,v]}catch{return null}}),m=await Promise.all(l);return new Map(m.filter(u=>!!u))})(),[o,r]=await Promise.all([t,n]);ke=o.pyimport("inspect");for(const[c,l]of r){const m=`/home/pyodide/${c}`;try{o.FS.mkdirTree(m.replace(/\/[^/]+$/,"")),o.FS.writeFile(m,l)}catch(u){console.error("Error writing file to Pyodide FS:",c,u)}}const i=new Int32Array(new SharedArrayBuffer(4)),s={sleep:c=>{const l=c*1e3;s.sleep_ms(l)},sleep_ms:c=>{if(h({command:d.Sleep,request:{time_ms:c}}),H)return;const m=performance.now()+c,u=Math.min(c/20,50);for(;performance.now()<m;){const y=m-performance.now();Atomics.wait(i,0,0,Math.min(u,y)),o.checkInterrupt()}},sleep_us:c=>{s.sleep_ms(c/1e3)},ticks_ms:()=>performance.now(),ticks_us:()=>performance.now()*1e3,ticks_add:Ve,ticks_diff:Ce,time:()=>Date.now(),time_ns:()=>performance.now()*1e3*1e3},a={print(...c){let l=" ",m=`
\r`;c.length>0&&c[c.length-1]!==null&&typeof c[c.length-1]=="object"&&("sep"in c[c.length-1]||"end"in c[c.length-1])&&({sep:l=l,end:m=m}=c.pop());const u=c.map(String).join(l)+m;h({command:d.Output,request:{output:u}})}};R(o,"utime",s),R(o,"machine",rt),R(o,"micropython",nt),R(o,"rtzero",it),R(o,"neopixel",ot),o.setInterruptBuffer(U);const f=`
import time
import utime
time.time = utime.time
time.time_ns = utime.time_ns
time.sleep = utime.sleep
time.sleep_ms = utime.sleep_ms
time.sleep_us = utime.sleep_us
time.ticks_ms = utime.ticks_ms
time.ticks_us = utime.ticks_us
time.ticks_add = utime.ticks_add
time.ticks_diff = utime.ticks_diff
`;o.globals.set("print",a.print),o.runPython(f),self.onmessage=c=>{const{command:l,code:m,isReplay:u}=c.data;if(l==="runPython"){if(!o){I({command:d.Error,request:{message:"Interpreter not initialized"}});return}try{H=u,o.runPython(m),I({command:T.Finished,request:{}})}catch(y){let w="";if(U[0]!==te&&U[1]===te)U[1]=0,I({command:d.KeyboardInterrupt,request:{message:`KeyboardInterrupt
\r`}});else if(y instanceof Error){const v=y.message.split(`
`),ee=v.findIndex(L=>L.includes("<exec>"));ee!==-1?w=v.slice(ee).filter(L=>!L.includes("mpWorker.ts")&&!/mpWorker-[A-Za-z0-9]+\.js/.test(L)&&!L.includes("pyodide.asm.js")).join(`
`):w=y.message,I({command:d.Error,request:{message:w}})}else w=String(y),I({command:d.Error,request:{message:w}})}}},I({command:T.Initialized,request:{sharedArrayInterrupt:U,sharedWakeupArray:j}})})()});export default at();
