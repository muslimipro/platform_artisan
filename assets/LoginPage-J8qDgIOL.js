import{z as M,a as m,_ as N,s as T,b as I}from"./AuthHeader.vue_vue_type_script_setup_true_lang-C1YzOYMr.js";import{d as L,i as P,j as q,h as y,o as r,c,b as s,a,w as i,t as n,k as b,l as A,m as w,F as h,n as E,u as k,e as R,s as D}from"./index-B44sbgom.js";import{s as H}from"./index-CYYyC0Mi.js";import{s as U}from"./index-C19kJoCe.js";import{s as G}from"./index-B_iG_Hws.js";import{a as J}from"./index-BTlblSkV.js";import"./logo-C5OIO6yL.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BrXZUtLn.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-1 items-center justify-center my-4"},Q={class:"text-4xl font-semibold px-2 mr-4"},W={class:"flex flex-col gap-1"},X={for:"email"},Y={class:"flex flex-col gap-1"},Z={for:"password"},ee={class:"my-0 flex flex-col gap-1"},ce=L({__name:"LoginPage",setup(se){const d=P(),u=R(),p=q(),o=y(!1),$=y({email:"",password:""}),S=M(m.object({email:m.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:m.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),V=async e=>{if(!o.value&&e.valid){o.value=!0;try{const{data:t}=await J.login(e.states.email.value,e.states.password.value);p.setToken(t),p.setUser(t),u.push({name:"projects"}),d.add({severity:"success",summary:"Success",life:3e3})}catch(t){d.add({severity:"error",summary:t.toString(),life:3e3})}finally{o.value=!1}}};return(e,t)=>{const z=G,f=U,_=H,B=T,v=D,F=I;return r(),c(h,null,[s(N),a("div",K,[s(F,{initialValues:$.value,resolver:k(S),onSubmit:V,class:"flex flex-col gap-4 w-full sm:w-60 mx-6 sm:px-0 px-8"},{default:i(l=>{var g,x;return[a("div",O,[a("p",Q,n(e.$t("logIn")),1)]),a("div",W,[s(f,{variant:"on"},{default:i(()=>[s(z,{id:"email",name:"email",type:"text",fluid:""}),a("label",X,n(e.$t("email")),1)]),_:1}),(g=l.email)!=null&&g.invalid?(r(),b(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[A(n(l.email.error.message),1)]),_:2},1024)):w("",!0)]),a("div",Y,[s(f,{variant:"on"},{default:i(()=>[s(B,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),a("label",Z,n(e.$t("password")),1)]),_:1}),(x=l.password)!=null&&x.invalid?(r(),b(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[a("ul",ee,[(r(!0),c(h,null,E(l.password.errors,(j,C)=>(r(),c("li",{key:C},n(j.message),1))),128))])]),_:2},1024)):w("",!0)]),s(v,{type:"submit",label:e.$t("logIn"),loading:o.value,disabled:o.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),s(v,{severity:"secondary",variant:"link",label:e.$t("dontHaveAnAccount"),onClick:t[0]||(t[0]=l=>k(u).push({name:"signup"}))},null,8,["label"])])],64)}}});export{ce as default};
