import{s as Y}from"./index-B8WGv_8T.js";import{s as J,a as K,b as O,c as Q}from"./index-DUns0hMB.js";import{s as U}from"./index-Bd1tQohG.js";import{s as W}from"./index-Bn9oQtae.js";import{s as X}from"./index-coNiHUPN.js";import{d as I,r as g,m as T,o as a,f as u,c as h,F as B,i as V,L as Z,j as C,k as F,s as q,u as ee,z as te,G as se,w as i,t as n,b as c,e as s,g as w,h as ae,n as ne}from"./index-CbeY2LTE.js";import{s as D}from"./index-DtxDaYMe.js";import{T as $}from"./teacherApi-2G2BCmms.js";import{T as oe}from"./index-DlG6fcw9.js";import"./index-B0qWFnFe.js";import"./index-MfN_vQa9.js";import"./index-QZTX5Q6I.js";import"./index-D0AiXIN_.js";import"./index-C8kuHmDy.js";const le={key:1,class:"flex flex-wrap gap-2"},re=I({__name:"ProjectDetails",props:{id:{},projectId:{}},setup(N){const m=N,b=F(),p=g(null),f=g(!1);async function _(){if(!f.value){f.value=!0;try{const{data:t}=await $.getStudentProjectSteps(m.id,m.projectId);p.value=t??null}catch(t){console.log(t)}finally{f.value=!1}}}T(_);function l(t,d){if(t!="completed")return t=="attempted"?"warn":(t=="started","secondary")}function y(t,d){if(t!="completed")return t=="attempted"||t=="started"?"outlined":void 0}function v(t,d){switch(t){case"article":return"pi pi-align-left";case"code":return d?"pi pi-hashtag":"pi pi-code";case"question":return"pi pi-question";case"matching":return"pi pi-arrows-h";case"open":return"pi pi-pencil";default:return"pi pi-align-left"}}return(t,d)=>{var e;const k=D,S=q,j=oe;return f.value?(a(),u(k,{key:0,class:"flex justify-center"})):(a(),h("div",le,[(a(!0),h(B,null,V((e=p.value)==null?void 0:e.steps,o=>Z((a(),u(S,{key:o.id,icon:v(o.step_type,o.skip_submit),rounded:"",severity:l(o.status),variant:y(o.status),class:"h-8 min-w-8 w-8",onClick:d[0]||(d[0]=P=>C(b).push({name:"project",params:{id:m.projectId}}))},null,8,["icon","severity","variant"])),[[j,{value:o.name&&o.name.length>0?o.name:o.id.toString()},void 0,{top:!0}]])),128))]))}}}),ie={key:1},ce={key:2,class:"flex flex-col items-start px-8 pb-4 gap-4"},ue={class:"w-full flex justify-between items-center"},de={class:"flex gap-4"},pe={class:"flex flex-col gap-2"},fe={class:"pl-1 text-3xl"},me={class:"pl-1 text-sm"},_e={class:"flex flex-col items-end"},ve={class:"text-xl"},ge={class:"text-3xl"},he={key:1,class:"flex flex-col gap-2 w-full"},ye={class:"text-gray-500 text-xl"},xe={class:"w-24 h-16 rounded-lg overflow-hidden"},we=["src"],$e={class:"flex flex-col gap-2 pl-4 w-56 items-start"},be={class:"text-lg"},ke={class:"flex gap-1"},Se={class:"flex-grow mr-2"},Le=I({__name:"StudentView",setup(N){const m=ee(),b=te(),p=ne(),f=F(),{t:_}=se(),l=g(null),y=g([]),v=g(!1),t=g(!1);async function d(){if(!v.value){v.value=!0;try{const{data:e}=await $.getStudent(Number(p.params.id));l.value=e??null}catch(e){console.log(e)}finally{v.value=!1}}}async function k(){if(!t.value){t.value=!0;try{const{data:e}=await $.getStudentProjects(Number(p.params.id));y.value=e??[]}catch(e){console.log(e)}finally{t.value=!1}}}T(()=>{d(),k()});function S(){b.require({message:_("pages.teacher.areYouSureExpelStudent"),header:_("pages.teacher.confirmation"),icon:"pi pi-exclamation-triangle",rejectProps:{label:_("pages.teacher.cancel"),severity:"secondary",outlined:!0},acceptProps:{label:_("pages.teacher.expel"),severity:"danger"},accept:()=>{j()}})}async function j(){try{const{data:e}=await $.expelStudentFromClass(Number(p.params.id));f.go(-1),m.add({severity:"success",summary:e.message,life:2e3})}catch(e){m.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}}return(e,o)=>{const P=D,A=q,E=X,x=W,z=U,L=J,R=K,G=O,H=Q,M=Y;return a(),u(M,{class:"flex-grow flex flex-col gap-2"},{default:i(()=>[v.value?(a(),u(P,{key:0,class:"flex justify-center"})):l.value?(a(),h("div",ce,[c(A,{label:e.$t("pages.teacher.back"),icon:"pi pi-angle-left",severity:"info",variant:"outlined",onClick:o[0]||(o[0]=r=>C(f).go(-1))},null,8,["label"]),s("div",ue,[s("div",de,[c(E,{image:l.value.small_avatar_url.length>0?l.value.small_avatar_url:void 0,shape:"circle",class:"w-[102px] h-[102px]"},null,8,["image"]),s("div",pe,[s("div",fe,n(l.value.name),1),s("div",me,n(e.$t("pages.teacher.since"))+" "+n(l.value.created_time.split("T")[0]),1),c(x,{class:"ml-1 w-fit"},{default:i(()=>[w(n(l.value.access_type),1)]),_:1})])]),s("div",_e,[s("div",ve,n(l.value.class_name),1),s("div",ge,n(l.value.xp)+" "+n(e.$t("pages.teacher.xp")),1)])]),t.value?(a(),u(P,{key:0,class:"flex justify-center"})):(a(),h("div",he,[s("div",ye,n(e.$t("pages.teacher.projects"))+":",1),c(H,{expandIcon:"pi pi-angle-down",collapseIcon:"pi pi-angle-up",lazy:!0,multiple:!0},{default:i(()=>[(a(!0),h(B,null,V(y.value,r=>(a(),u(G,{key:r.id,value:r.id},{default:i(()=>[c(L,{class:"flex gap-2 items-center rounded-lg"},{default:i(()=>[s("div",xe,[s("img",{src:r.source_url,class:"w-full h-full object-cover"},null,8,we)]),s("div",$e,[s("div",be,n(r.name),1),s("div",ke,[r.layer>0?(a(),u(x,{key:0,severity:"warn"},{default:i(()=>[w(n(e.$t("pages.teacher.level"))+" - "+n(r.layer),1)]),_:2},1024)):ae("",!0),r.is_guidable?(a(),u(x,{key:1},{default:i(()=>[w(n(e.$t("pages.projects.learn")),1)]),_:1})):(a(),u(x,{key:2,severity:"info"},{default:i(()=>[w(n(e.$t("pages.projects.practice")),1)]),_:1}))])]),s("div",Se,[c(z,{value:r.student_progress,pt:{root:{class:"bg-gray-200"},value:{class:"bg-cyan-500"}}},null,8,["value"])])]),_:2},1024),c(R,null,{default:i(()=>[c(re,{id:Number(C(p).params.id),"project-id":Number(r.id)},null,8,["id","project-id"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])),c(A,{label:e.$t("pages.teacher.expelFromClass"),icon:"pi pi-user-minus",severity:"danger",class:"self-end",onClick:S},null,8,["label"])])):(a(),h("div",ie,n(e.$t("pages.teacher.noStudentFound")),1))]),_:1})}}});export{Le as default};
