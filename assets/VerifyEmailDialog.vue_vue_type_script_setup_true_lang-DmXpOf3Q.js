import{a as C,M as w,u as B,Q as I,s as T,r as m,S as x,b as v,i as f,w as o,h as i,f as d,g as p,D,t as g,K as M,l as N,H as A,m as R,p as H}from"./index-B4mgNLDK.js";import{s as U}from"./index-DoG73z2a.js";import{S as j}from"./index-CslveOKd.js";const q={class:"text-blue-500"},K={class:"flex flex-col gap-1"},L={class:"flex gap-1 justify-end"},F=C({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(y){const n=w(y,"modelValue"),_=N(),u=B(),b=I(),{user:V}=T(b),t=m(!1),a=m(0);let r;const $=()=>{a.value=60,r=setInterval(()=>{a.value>0?a.value--:clearInterval(r)},1e3)};async function h(){t.value=!0;try{const{data:e}=await j.sendVerificationEmail();u.add({severity:"success",summary:e.message,life:2e3}),$()}catch(e){u.add({severity:"error",summary:e.response.data.error,detail:e,life:2e3})}finally{t.value=!1}}return x(()=>{clearInterval(r)}),(e,l)=>{const E=A("i18n-t"),c=R,k=U,S=H;return v(),f(S,{visible:n.value,"onUpdate:visible":l[1]||(l[1]=s=>n.value=s),modal:"",draggable:!1,class:"m-4 max-w-md",header:e.$t("dialog.verifyYourEmail")},{footer:o(()=>[i("div",K,[i("div",L,[d(c,{label:e.$t("dialog.changeEmail"),severity:"secondary",onClick:l[0]||(l[0]=s=>{p(_).replace({path:"/settings/change-email"}),n.value=!1})},null,8,["label"]),d(c,{label:a.value>0?`${e.$t("pages.login.resendIn")} ${a.value}s`:e.$t("dialog.sendVerificationEmail"),onClick:h,loading:t.value,disabled:t.value||a.value>0},null,8,["label","loading","disabled"])]),a.value>0?(v(),f(k,{key:0,severity:"success"},{default:o(()=>[D(g(e.$t("pages.settings.weHaveSentLinkToVerifyEmail")),1)]),_:1})):M("",!0)])]),default:o(()=>[i("div",null,[d(E,{keypath:"dialog.confirmEmailAddress"},{email:o(()=>{var s;return[i("span",q,g((s=p(V))==null?void 0:s.email),1)]}),_:1})])]),_:1},8,["visible","header"])}}});export{F as _};
