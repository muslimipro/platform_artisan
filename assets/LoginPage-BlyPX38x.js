import{z as M,a as n,b as N,s as P,_ as T,c as $}from"./index-9Ag14WnE.js";import{d as E,f as q,g as D,r as x,c as m,b as s,a,w as r,e as y,F as w,u as I,s as R,o as l,h as b,i as U,t as k,j as S,k as A}from"./index-CxyCel7M.js";import{s as G}from"./index-BAOoh0gY.js";import{s as H}from"./index-DE2X4gBR.js";import{s as J}from"./index-oCkN5M1f.js";import"./logo-Ba5PqW90.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-3PKddi90.js";import"./http-B1ARadxs.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-col gap-1"},Q={class:"flex flex-col gap-1"},W={class:"my-0 px-4 flex flex-col gap-1"},le=E({__name:"LoginPage",setup(X){const c=q(),u=I(),d=D(),t=x(!1),V=x({email:"",password:""}),h=M(n.object({email:n.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:n.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),z=async i=>{if(!t.value&&i.valid){t.value=!0;try{const{data:e}=await N.login(i.states.email.value,i.states.password.value);d.setToken(e),d.setUser(e),u.push({name:"projects"}),c.add({severity:"success",summary:"Success",life:3e3})}catch(e){c.add({severity:"error",summary:e.toString(),life:3e3})}finally{t.value=!1}}};return(i,e)=>{const B=J,p=H,f=G,F=$,v=R,L=P;return l(),m(w,null,[s(T),a("div",K,[s(L,{initialValues:V.value,resolver:y(h),onSubmit:z,class:"flex flex-col gap-4 w-full sm:w-60 mx-6"},{default:r(o=>{var g,_;return[e[3]||(e[3]=a("div",{class:"flex flex-1 items-center justify-center my-4"},[a("p",{class:"text-4xl font-semibold px-2 mr-4"},"Log In")],-1)),a("div",O,[s(p,{variant:"on"},{default:r(()=>[s(B,{id:"email",name:"email",type:"text",fluid:""}),e[1]||(e[1]=a("label",{for:"email"},"Email",-1))]),_:1}),(g=o.username)!=null&&g.invalid?(l(),b(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[U(k(o.username.error.message),1)]),_:2},1024)):S("",!0)]),a("div",Q,[s(p,{variant:"on"},{default:r(()=>[s(F,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),e[2]||(e[2]=a("label",{for:"password"},"Password",-1))]),_:1}),(_=o.password)!=null&&_.invalid?(l(),b(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[a("ul",W,[(l(!0),m(w,null,A(o.password.errors,(j,C)=>(l(),m("li",{key:C},k(j.message),1))),128))])]),_:2},1024)):S("",!0)]),s(v,{type:"submit",label:"Login",loading:t.value,disabled:t.value},null,8,["loading","disabled"])]}),_:1},8,["initialValues","resolver"]),s(v,{severity:"secondary",variant:"link",label:"Don't have an account?",onClick:e[0]||(e[0]=o=>y(u).push({name:"signup"}))})])],64)}}});export{le as default};
