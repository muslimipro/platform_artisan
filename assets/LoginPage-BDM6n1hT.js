import{h as F,z as p,s as M}from"./index-BEAdJyKd.js";import{d as N,u as P,a as T,r as w,o,c as m,b as a,e as t,w as r,t as n,f as h,g as I,h as L,F as k,i as q,j as u,k as A,s as E}from"./index-06dapWEh.js";import{s as D}from"./index-Dam-jNl8.js";import{s as H}from"./index-XkW4Jefx.js";import{s as R}from"./index-CSv1pgPJ.js";import{s as U}from"./index-Db1rzZhZ.js";import{_ as G}from"./AuthHeader.vue_vue_type_script_setup_true_lang-HSope6xQ.js";import{a as J}from"./index-D8v7f4pp.js";import"./index-D6Q7kcZY.js";import"./logo-DIHTJwoc.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-DIK7zgj_.js";import"./index-BsTfKa1U.js";import"./index-Ttz5dvpZ.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-1 items-center justify-center my-4"},Q={class:"text-4xl font-semibold px-2 mr-4"},W={class:"flex flex-col gap-1"},X={for:"email"},Y={class:"flex flex-col gap-1"},Z={for:"password"},ss={class:"flex justify-between"},es={class:"my-0 flex flex-col gap-1"},as={key:1},gs=N({__name:"LoginPage",setup(ts){const f=P(),c=A(),_=T(),l=w(!1),$=w({email:"",password:""}),S=F(p.object({email:p.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:p.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),V=async s=>{if(!l.value&&s.valid){l.value=!0;try{const{data:e}=await J.login(s.states.email.value,s.states.password.value);_.setToken(e),_.setUser(e),c.push({name:"projects"}),f.add({severity:"success",summary:"Success",life:3e3})}catch(e){f.add({severity:"error",summary:e.toString(),life:3e3})}finally{l.value=!1}}};return(s,e)=>{const j=U,v=R,g=H,z=D,d=E,B=M;return o(),m(k,null,[a(G),t("div",K,[a(B,{initialValues:$.value,resolver:u(S),onSubmit:V,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:r(i=>{var x,y;return[t("div",O,[t("p",Q,n(s.$t("logIn")),1)]),t("div",W,[a(v,{variant:"on"},{default:r(()=>[a(j,{id:"email",name:"email",type:"text",fluid:""}),t("label",X,n(s.$t("email")),1)]),_:1}),(x=i.email)!=null&&x.invalid?(o(),h(g,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[I(n(i.email.error.message),1)]),_:2},1024)):L("",!0)]),t("div",Y,[a(v,{variant:"on"},{default:r(()=>[a(z,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",Z,n(s.$t("password")),1)]),_:1}),t("div",ss,[(y=i.password)!=null&&y.invalid?(o(),h(g,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[t("ul",es,[(o(!0),m(k,null,q(i.password.errors,(b,C)=>(o(),m("li",{key:C},n(b.message),1))),128))])]),_:2},1024)):(o(),m("div",as)),a(d,{label:s.$t("pages.login.forgotPassword"),variant:"link",size:"small",class:"p-0",onClick:e[0]||(e[0]=b=>u(c).push({name:"forgot-password"}))},null,8,["label"])])]),a(d,{type:"submit",label:s.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),a(d,{variant:"link",label:s.$t("dontHaveAnAccount"),onClick:e[1]||(e[1]=i=>u(c).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{gs as default};
